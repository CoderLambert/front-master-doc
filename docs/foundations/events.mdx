# äº‹ä»¶å¤„ç†

import { Tabs, TabItem } from '@docusaurus/theme-common';

äº‹ä»¶å¤„ç†æ˜¯Reactä¸­ç”¨æˆ·äº¤äº’çš„æ ¸å¿ƒæœºåˆ¶ã€‚åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•å¤„ç†å„ç§ç”¨æˆ·äº‹ä»¶ï¼ŒåŒ…æ‹¬ç‚¹å‡»ã€è¾“å…¥ã€æäº¤ç­‰ï¼Œä»¥åŠäº‹ä»¶å¤„ç†çš„é«˜çº§æŠ€å·§å’Œæœ€ä½³å®è·µã€‚

## æœ¬ç« å­¦ä¹ ç›®æ ‡

- æŒæ¡Reactä¸­çš„äº‹ä»¶å¤„ç†æœºåˆ¶
- å­¦ä¹ äº‹ä»¶å¯¹è±¡çš„ç”¨æ³•
- æŒæ¡ä¸åŒç±»å‹äº‹ä»¶çš„å¤„ç†æ–¹æ³•
- ç†è§£äº‹ä»¶å¤„ç†ä¸­çš„thisç»‘å®šé—®é¢˜
- å­¦ä¼šä¼ é€’å‚æ•°ç»™äº‹ä»¶å¤„ç†å™¨
- æŒæ¡äº‹ä»¶å§”æ‰˜å’Œæ€§èƒ½ä¼˜åŒ–

---

## 1. Reactä¸­çš„äº‹ä»¶ç³»ç»Ÿ

### 1.1 åˆæˆäº‹ä»¶ï¼ˆSyntheticEventï¼‰

Reactä½¿ç”¨åˆæˆäº‹ä»¶ç³»ç»Ÿï¼Œå®ƒæä¾›äº†è·¨æµè§ˆå™¨çš„ä¸€è‡´æ€§äº‹ä»¶æ¥å£ã€‚

<Box style={{ padding: '20px', background: '#e3f2fd', borderRadius: '8px', margin: '20px 0' }}>
  <h4 style={{ margin: 0, color: '#1976d2' }}>ğŸ’¡ å…³é”®ç‰¹æ€§</h4>
  <ul style={{ margin: '10px 0 0 20px' }}>
    <li>ç»Ÿä¸€çš„äº‹ä»¶APIï¼Œæ— éœ€è€ƒè™‘æµè§ˆå™¨å·®å¼‚</li>
    <li>äº‹ä»¶å¯¹è±¡åœ¨å¤„ç†å‡½æ•°æ‰§è¡Œåè¢«è‡ªåŠ¨æ¸…ç†</li>
    <li>æ”¯æŒäº‹ä»¶å†’æ³¡å’Œå–æ¶ˆé»˜è®¤è¡Œä¸º</li>
  </ul>
</Box>

### 1.2 äº‹ä»¶å¤„ç†çš„åŸºæœ¬è¯­æ³•

åœ¨Reactä¸­ï¼Œäº‹ä»¶å¤„ç†ä½¿ç”¨é©¼å³°å‘½åæ³•ï¼š

<Compare>

```html
<!-- HTMLäº‹ä»¶ -->
<button onclick="handleClick()">ç‚¹å‡»æˆ‘</button>
```

```jsx
// Reactäº‹ä»¶
<button onClick={handleClick}>ç‚¹å‡»æˆ‘</button>
```

</Compare>

<Example>

```jsx
function Button() {
  const handleClick = () => {
    alert('æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼');
  };

  return <button onClick={handleClick}>ç‚¹å‡»æˆ‘</button>;
}
```

</Example>

---

## 2. åŸºç¡€äº‹ä»¶ç±»å‹

### 2.1 é¼ æ ‡äº‹ä»¶

#### 2.1.1 onClick - ç‚¹å‡»äº‹ä»¶

<CodeBlock>

```jsx
function ClickDemo() {
  const handleClick = (e) => {
    console.log('æŒ‰é’®è¢«ç‚¹å‡»');
    console.log('äº‹ä»¶å¯¹è±¡:', e);
  };

  return (
    <button onClick={handleClick}>
      ç‚¹å‡»æˆ‘
    </button>
  );
}
```

</CodeBlock>

#### 2.1.2 onDoubleClick - åŒå‡»äº‹ä»¶

<CodeBlock>

```jsx
function DoubleClickDemo() {
  const handleDoubleClick = () => {
    alert('åŒå‡»ï¼');
  };

  return (
    <button onDoubleClick={handleDoubleClick}>
      åŒå‡»æˆ‘
    </button>
  );
}
```

</CodeBlock>

#### 2.1.3 é¼ æ ‡æ‚¬åœäº‹ä»¶

<LiveCode
  code={`
function HoverDemo() {
  const [isHovered, setIsHovered] = React.useState(false);

  return (
    <div
      onMouseEnter={() => setIsHovered(true)}
      onMouseLeave={() => setIsHovered(false)}
      style={{
        padding: '20px',
        background: isHovered ? '#e3f2fd' : '#f5f5f5',
        borderRadius: '8px',
        cursor: 'pointer',
        transition: 'background-color 0.3s',
        border: '2px solid ' + (isHovered ? '#2196f3' : '#ddd')
      }}
    >
      {isHovered ? 'âœ… é¼ æ ‡æ‚¬åœä¸­...' : 'ğŸ‘† å°†é¼ æ ‡ç§»åˆ°è¿™é‡Œ'}
    </div>
  );
}
`}
  scope={{ React }}
/>

### 2.2 é”®ç›˜äº‹ä»¶

#### 2.2.1 onKeyDown / onKeyUp - æŒ‰é”®äº‹ä»¶

<LiveCode
  code={`
function KeyboardDemo() {
  const [key, setKey] = React.useState('');
  const [history, setHistory] = React.useState([]);

  const handleKeyDown = (e) => {
    const pressedKey = e.key;
    setKey(pressedKey);
    setHistory(prev => [pressedKey, ...prev.slice(0, 4)]);
  };

  return (
    <div style={{ padding: '20px' }}>
      <input
        type="text"
        onKeyDown={handleKeyDown}
        placeholder="åœ¨è¿™é‡Œè¾“å…¥ä¸€äº›æ–‡å­—..."
        style={{
          padding: '12px',
          fontSize: '16px',
          border: '2px solid #ddd',
          borderRadius: '6px',
          width: '100%',
          maxWidth: '400px',
          outline: 'none'
        }}
      />

      <div style={{ marginTop: '20px', padding: '15px', background: '#f5f5f5', borderRadius: '8px' }}>
        <h4 style={{ margin: '0 0 10px 0' }}>ğŸ“ æŒ‰é”®è®°å½•</h4>
        <p style={{ margin: '5px 0' }}><strong>æœ€è¿‘æŒ‰é”®:</strong> {key || 'æ— '}</p>
        {history.length > 0 && (
          <div>
            <strong>å†å²è®°å½•:</strong>
            <ul style={{ margin: '10px 0', paddingLeft: '20px' }}>
              {history.map((k, i) => (
                <li key={i} style={{ color: '#666' }}>
                  {i + 1}. {k}
                </li>
              ))}
            </ul>
          </div>
        )}
      </div>
    </div>
  );
}
`}
  scope={{ React }}
/>

#### 2.2.2 ç»„åˆé”®å¤„ç†

<CodeBlock>

```jsx
function HotkeyDemo() {
  const handleKeyDown = (e) => {
    // Ctrl + Enter æäº¤
    if (e.ctrlKey && e.key === 'Enter') {
      alert('Ctrl + Enter ç»„åˆé”®è§¦å‘ï¼');
    }

    // ESC å–æ¶ˆ
    if (e.key === 'Escape') {
      console.log('ESC - å–æ¶ˆæ“ä½œ');
    }
  };

  return (
    <textarea
      onKeyDown={handleKeyDown}
      placeholder="å°è¯•æŒ‰ Ctrl+Enter æˆ– ESC"
      style={{ width: '100%', height: '100px' }}
    />
  );
}
```

</CodeBlock>

### 2.3 è¡¨å•äº‹ä»¶

#### 2.3.1 onChange - è¾“å…¥å˜åŒ–

<LiveCode
  code={`
function InputDemo() {
  const [value, setValue] = React.useState('');
  const [feedback, setFeedback] = React.useState('');

  const handleChange = (e) => {
    const newValue = e.target.value;
    setValue(newValue);

    // å®æ—¶åé¦ˆ
    if (newValue.length > 10) {
      setFeedback('è¾“å…¥å¾ˆè¯¦ç»†ï¼');
    } else if (newValue.length > 5) {
      setFeedback('ä¸é”™ï¼Œç»§ç»­è¾“å…¥...');
    } else if (newValue.length > 0) {
      setFeedback('è¾“å…¥è¿›è¡Œä¸­...');
    } else {
      setFeedback('');
    }
  };

  return (
    <div style={{ padding: '20px' }}>
      <input
        type="text"
        value={value}
        onChange={handleChange}
        placeholder="åœ¨è¿™é‡Œè¾“å…¥ä¸€äº›æ–‡å­—..."
        style={{
          padding: '12px',
          fontSize: '16px',
          border: '2px solid #2196f3',
          borderRadius: '6px',
          width: '100%',
          maxWidth: '400px',
          outline: 'none'
        }}
      />

      <div style={{ marginTop: '20px', padding: '15px', background: '#e3f2fd', borderRadius: '8px' }}>
        <p style={{ margin: '5px 0', fontSize: '18px' }}>
          <strong>è¾“å…¥çš„å€¼:</strong> {value || 'ï¼ˆæ— ï¼‰'}
        </p>
        <p style={{ margin: '5px 0', color: '#666' }}>
          å­—ç¬¦æ•°: {value.length}
        </p>
        {feedback && (
          <p style={{
            margin: '10px 0 0 0',
            color: '#1976d2',
            fontStyle: 'italic',
            fontWeight: 'bold'
          }}>
            {feedback}
          </p>
        )}
      </div>
    </div>
  );
}
`}
  scope={{ React }}
/>

#### 2.3.2 onSubmit - è¡¨å•æäº¤

<LiveCode
  code={`
function FormDemo() {
  const [email, setEmail] = React.useState('');
  const [password, setPassword] = React.useState('');
  const [submitted, setSubmitted] = React.useState(false);
  const [showPassword, setShowPassword] = React.useState(false);

  const handleSubmit = (e) => {
    e.preventDefault();
    setSubmitted(true);
    console.log('æäº¤çš„æ•°æ®:', { email, password });
  };

  const handleReset = () => {
    setEmail('');
    setPassword('');
    setSubmitted(false);
  };

  return (
    <div style={{ padding: '20px', maxWidth: '450px' }}>
      <form onSubmit={handleSubmit}>
        <div style={{ marginBottom: '15px' }}>
          <label style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}>
            ğŸ“§ é‚®ç®±åœ°å€:
          </label>
          <input
            type="email"
            value={email}
            onChange={(e) => setEmail(e.target.value)}
            placeholder="è¯·è¾“å…¥é‚®ç®±"
            required
            style={{
              width: '100%',
              padding: '10px',
              fontSize: '16px',
              border: '2px solid #ddd',
              borderRadius: '6px',
              boxSizing: 'border-box'
            }}
          />
        </div>

        <div style={{ marginBottom: '15px' }}>
          <label style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}>
            ğŸ”’ å¯†ç :
          </label>
          <div style={{ position: 'relative' }}>
            <input
              type={showPassword ? 'text' : 'password'}
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              placeholder="è¯·è¾“å…¥å¯†ç "
              required
              style={{
                width: '100%',
                padding: '10px',
                fontSize: '16px',
                border: '2px solid #ddd',
                borderRadius: '6px',
                boxSizing: 'border-box'
              }}
            />
            <button
              type="button"
              onClick={() => setShowPassword(!showPassword)}
              style={{
                position: 'absolute',
                right: '10px',
                top: '50%',
                transform: 'translateY(-50%)',
                background: 'none',
                border: 'none',
                cursor: 'pointer',
                fontSize: '12px',
                color: '#666'
              }}
            >
              {showPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸'}
            </button>
          </div>
        </div>

        <div style={{ display: 'flex', gap: '10px' }}>
          <button
            type="submit"
            style={{
              flex: 1,
              padding: '12px',
              fontSize: '16px',
              background: '#2196f3',
              color: 'white',
              border: 'none',
              borderRadius: '6px',
              cursor: 'pointer',
              fontWeight: 'bold'
            }}
          >
            ğŸš€ ç™»å½•
          </button>
          <button
            type="button"
            onClick={handleReset}
            style={{
              flex: 1,
              padding: '12px',
              fontSize: '16px',
              background: '#f5f5f5',
              color: '#333',
              border: '2px solid #ddd',
              borderRadius: '6px',
              cursor: 'pointer',
              fontWeight: 'bold'
            }}
          >
            ğŸ”„ é‡ç½®
          </button>
        </div>
      </form>

      {submitted && (
        <div style={{
          marginTop: '20px',
          padding: '15px',
          background: '#e8f5e9',
          borderRadius: '8px',
          border: '2px solid #4caf50'
        }}>
          <h4 style={{ margin: '0 0 10px 0', color: '#2e7d32' }}>âœ… æäº¤æˆåŠŸï¼</h4>
          <p style={{ margin: '5px 0' }}>é‚®ç®±: {email}</p>
          <p style={{ margin: '5px 0' }}>
            å¯†ç : {'â€¢'.repeat(password.length)}
          </p>
        </div>
      )}
    </div>
  );
}
`}
  scope={{ React }}
/>

---

## 3. äº‹ä»¶å¯¹è±¡è¯¦è§£

### 3.1 äº‹ä»¶å¯¹è±¡å±æ€§

Reactåˆæˆäº‹ä»¶å¯¹è±¡åŒ…å«ä»¥ä¸‹å¸¸ç”¨å±æ€§ï¼š

<Table>

| å±æ€§ | æè¿° | ç¤ºä¾‹ |
|------|------|------|
| `type` | äº‹ä»¶ç±»å‹ | `click`, `keydown` |
| `target` | è§¦å‘äº‹ä»¶çš„å…ƒç´  | `e.target.value` |
| `currentTarget` | ç»‘å®šäº‹ä»¶çš„å…ƒç´  | `e.currentTarget` |
| `key` | æŒ‰ä¸‹çš„é”® | `Enter`, `A`, `Escape` |
| `code` | é”®çš„ç‰©ç†ä»£ç  | `KeyA`, `Enter` |
| `clientX/clientY` | é¼ æ ‡ä½ç½® | é¼ æ ‡X/Yåæ ‡ |
| `altKey/ctrlKey` | ä¿®é¥°é”® | æ˜¯å¦æŒ‰ä¸‹Alt/Ctrl |

</Table>

### 3.2 å¸¸ç”¨æ“ä½œ

#### 3.2.1 é˜»æ­¢é»˜è®¤è¡Œä¸º

<CodeBlock>

```jsx
function PreventDemo() {
  const handleLinkClick = (e) => {
    e.preventDefault(); // é˜»æ­¢é“¾æ¥è·³è½¬
    console.log('é“¾æ¥ç‚¹å‡»è¢«é˜»æ­¢');
  };

  const handleFormSubmit = (e) => {
    e.preventDefault(); // é˜»æ­¢è¡¨å•æäº¤
    console.log('è¡¨å•æäº¤è¢«é˜»æ­¢');
  };

  return (
    <div>
      <a href="https://react.dev" onClick={handleLinkClick}>
        ç‚¹å‡»æˆ‘ï¼ˆè¢«é˜»æ­¢ï¼‰
      </a>
      <form onSubmit={handleFormSubmit}>
        <input type="text" placeholder="è¾“å…¥æ–‡æœ¬" />
        <button type="submit">æäº¤ï¼ˆè¢«é˜»æ­¢ï¼‰</button>
      </form>
    </div>
  );
}
```

</CodeBlock>

#### 3.2.2 é˜»æ­¢äº‹ä»¶å†’æ³¡

<CodeBlock>

```jsx
function StopPropagationDemo() {
  const handleDivClick = () => {
    console.log('div è¢«ç‚¹å‡»');
  };

  const handleButtonClick = (e) => {
    e.stopPropagation(); // é˜»æ­¢äº‹ä»¶å†’æ³¡
    console.log('button è¢«ç‚¹å‡»ï¼ˆä¸å†’æ³¡åˆ°divï¼‰');
  };

  return (
    <div
      onClick={handleDivClick}
      style={{ padding: '20px', background: '#f0f0f0' }}
    >
      <button onClick={handleButtonClick}>
        ç‚¹å‡»æŒ‰é’®ï¼ˆä¸å†’æ³¡ï¼‰
      </button>
    </div>
  );
}
```

</CodeBlock>

---

## 4. äº‹ä»¶å¤„ç†é«˜çº§æŠ€å·§

### 4.1 ä¼ é€’å‚æ•°ç»™äº‹ä»¶å¤„ç†å™¨

#### 4.1.1 ä½¿ç”¨ç®­å¤´å‡½æ•°

<CodeBlock>

```jsx
function ParamDemo() {
  const handleItemClick = (id) => {
    console.log('ç‚¹å‡»äº†é¡¹ç›®:', id);
  };

  const items = [
    { id: 1, name: 'é¡¹ç›®1' },
    { id: 2, name: 'é¡¹ç›®2' },
    { id: 3, name: 'é¡¹ç›®3' }
  ];

  return (
    <ul>
      {items.map(item => (
        <li
          key={item.id}
          onClick={() => handleItemClick(item.id)}
          style={{ cursor: 'pointer' }}
        >
          {item.name}
        </li>
      ))}
    </ul>
  );
}
```

</CodeBlock>

#### 4.1.2 ä½¿ç”¨bindæ–¹æ³•

<CodeBlock>

```jsx
function BindDemo() {
  const handleItemClick = function(id) {
    console.log('ç‚¹å‡»äº†é¡¹ç›®:', id);
  };

  const items = [
    { id: 1, name: 'é¡¹ç›®1' },
    { id: 2, name: 'é¡¹ç›®2' }
  ];

  return (
    <ul>
      {items.map(item => (
        <li
          key={item.id}
          onClick={handleItemClick.bind(this, item.id)}
          style={{ cursor: 'pointer' }}
        >
          {item.name}
        </li>
      ))}
    </ul>
  );
}
```

</CodeBlock>

### 4.2 äº‹ä»¶å¤„ç†ä¸­çš„çŠ¶æ€æ›´æ–°

äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ç»å¸¸éœ€è¦æ›´æ–°çŠ¶æ€ã€‚ä¸‹é¢çš„å¾…åŠäº‹é¡¹åº”ç”¨å±•ç¤ºäº†å®Œæ•´çš„äº‹ä»¶å¤„ç†æµç¨‹ï¼š

<LiveCode
  code={`
function TodoList() {
  const [todos, setTodos] = React.useState([
    { id: 1, text: 'å­¦ä¹ Reactäº‹ä»¶å¤„ç†', completed: true },
    { id: 2, text: 'å®Œæˆåœ¨çº¿ç»ƒä¹ ', completed: false }
  ]);
  const [input, setInput] = React.useState('');

  const handleSubmit = (e) => {
    e.preventDefault();
    if (input.trim()) {
      setTodos([
        ...todos,
        {
          id: Date.now(),
          text: input,
          completed: false
        }
      ]);
      setInput('');
    }
  };

  const toggleTodo = (id) => {
    setTodos(todos.map(todo =>
      todo.id === id ? { ...todo, completed: !todo.completed } : todo
    ));
  };

  const deleteTodo = (id) => {
    setTodos(todos.filter(todo => todo.id !== id));
  };

  const completedCount = todos.filter(t => t.completed).length;

  return (
    <div style={{ padding: '20px', maxWidth: '500px' }}>
      <h3 style={{ marginTop: 0 }}>ğŸ“ äº¤äº’å¼å¾…åŠäº‹é¡¹åˆ—è¡¨</h3>

      <form onSubmit={handleSubmit} style={{ marginBottom: '20px' }}>
        <div style={{ display: 'flex', gap: '10px' }}>
          <input
            value={input}
            onChange={(e) => setInput(e.target.value)}
            placeholder="æ·»åŠ æ–°çš„å¾…åŠäº‹é¡¹..."
            style={{
              flex: 1,
              padding: '10px',
              fontSize: '16px',
              border: '2px solid #ddd',
              borderRadius: '6px'
            }}
          />
          <button
            type="submit"
            style={{
              padding: '10px 20px',
              fontSize: '16px',
              background: '#4caf50',
              color: 'white',
              border: 'none',
              borderRadius: '6px',
              cursor: 'pointer',
              fontWeight: 'bold'
            }}
          >
            â• æ·»åŠ 
          </button>
        </div>
      </form>

      <div style={{
        marginBottom: '20px',
        padding: '10px',
        background: '#f5f5f5',
        borderRadius: '6px',
        textAlign: 'center'
      }}>
        <strong>è¿›åº¦:</strong> {completedCount} / {todos.length} å·²å®Œæˆ
        <div style={{
          marginTop: '10px',
          height: '10px',
          background: '#e0e0e0',
          borderRadius: '5px',
          overflow: 'hidden'
        }}>
          <div style={{
            height: '100%',
            width: \`${todos.length > 0 ? (completedCount / todos.length) * 100 : 0}%\`,
            background: '#4caf50',
            transition: 'width 0.3s'
          }} />
        </div>
      </div>

      <ul style={{ listStyle: 'none', padding: 0 }}>
        {todos.map(todo => (
          <li
            key={todo.id}
            style={{
              display: 'flex',
              alignItems: 'center',
              padding: '12px',
              marginBottom: '8px',
              background: todo.completed ? '#e8f5e9' : 'white',
              border: '2px solid ' + (todo.completed ? '#4caf50' : '#ddd'),
              borderRadius: '6px',
              transition: 'all 0.2s'
            }}
          >
            <input
              type="checkbox"
              checked={todo.completed}
              onChange={() => toggleTodo(todo.id)}
              style={{
                width: '20px',
                height: '20px',
                marginRight: '12px',
                cursor: 'pointer'
              }}
            />
            <span
              onClick={() => toggleTodo(todo.id)}
              style={{
                flex: 1,
                textDecoration: todo.completed ? 'line-through' : 'none',
                color: todo.completed ? '#666' : '#333',
                cursor: 'pointer',
                fontSize: '16px'
              }}
            >
              {todo.text}
            </span>
            <button
              onClick={() => deleteTodo(todo.id)}
              style={{
                padding: '5px 10px',
                background: '#f44336',
                color: 'white',
                border: 'none',
                borderRadius: '4px',
                cursor: 'pointer',
                fontSize: '14px'
              }}
            >
              ğŸ—‘ï¸
            </button>
          </li>
        ))}
      </ul>
    </div>
  );
}
`}
  scope={{ React }}
/>

### 4.3 è‡ªå®šä¹‰äº‹ä»¶å¤„ç† Hook

<CodeBlock>

```jsx
// è‡ªå®šä¹‰Hookï¼šç”¨äºå¤„ç†è¾“å…¥
function useInput(initialValue) {
  const [value, setValue] = useState(initialValue);

  const handleChange = (e) => {
    setValue(e.target.value);
  };

  return {
    value,
    setValue,
    bind: {
      value,
      onChange: handleChange
    }
  };
}

// ä½¿ç”¨
function CustomHookDemo() {
  const name = useInput('');
  const email = useInput('');

  const handleSubmit = (e) => {
    e.preventDefault();
    console.log('æäº¤:', { name: name.value, email: email.value });
  };

  return (
    <form onSubmit={handleSubmit}>
      <input {...name.bind} placeholder="å§“å" />
      <input {...email.bind} placeholder="é‚®ç®±" />
      <button type="submit">æäº¤</button>
    </form>
  );
}
```

</CodeBlock>

---

## 5. ç±»ç»„ä»¶ä¸­çš„äº‹ä»¶å¤„ç†

### 5.1 ç±»çš„thisç»‘å®š

ç±»ç»„ä»¶ä¸­éœ€è¦åœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®šthisï¼š

<CodeBlock>

```jsx
class Counter extends React.Component {
  constructor(props) {
    super(props);
    // ç»‘å®šthis
    this.handleClick = this.handleClick.bind(this);
    this.state = { count: 0 };
  }

  handleClick() {
    this.setState({ count: this.state.count + 1 });
  }

  render() {
    return (
      <button onClick={this.handleClick}>
        è®¡æ•°: {this.state.count}
      </button>
    );
  }
}
```

</CodeBlock>

### 5.2 ç®­å¤´å‡½æ•°ç»‘å®š

å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼š

<CodeBlock>

```jsx
class Counter extends React.Component {
  state = { count: 0 };

  // ç®­å¤´å‡½æ•°è‡ªåŠ¨ç»‘å®šthis
  handleClick = () => {
    this.setState({ count: this.state.count + 1 });
  };

  render() {
    return (
      <button onClick={this.handleClick}>
        è®¡æ•°: {this.state.count}
      </button>
    );
  }
}
```

</CodeBlock>

---

## 6. äº‹ä»¶å§”æ‰˜

### 6.1 ä¸ºä»€ä¹ˆä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼Ÿ

äº‹ä»¶å§”æ‰˜å¯ä»¥æé«˜æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤§é‡åŠ¨æ€å…ƒç´ æ—¶ã€‚

<Compare>

```jsx
// âŒ ä¸å¥½çš„åšæ³• - ä¸ºæ¯ä¸ªliæ·»åŠ äº‹ä»¶ç›‘å¬
function BadList() {
  const [items] = useState(['1', '2', '3', '4', '5']);

  const handleClick = (e) => {
    console.log('ç‚¹å‡»äº†:', e.target.textContent);
  };

  return (
    <ul>
      {items.map((item, index) => (
        <li key={index} onClick={handleClick}>
          é¡¹ç›® {item}
        </li>
      ))}
    </ul>
  );
}

// âœ… å¥½çš„åšæ³• - äº‹ä»¶å§”æ‰˜
function GoodList() {
  const [items] = useState(['1', '2', '3', '4', '5']);

  const handleClick = (e) => {
    if (e.target.tagName === 'LI') {
      console.log('ç‚¹å‡»äº†:', e.target.textContent);
    }
  };

  return (
    <ul onClick={handleClick}>
      {items.map((item, index) => (
        <li key={index}>
          é¡¹ç›® {item}
        </li>
      ))}
    </ul>
  );
}
```

</Compare>

### 6.2 åŠ¨æ€å†…å®¹çš„äº‹ä»¶å¤„ç†

å½“åˆ—è¡¨åŠ¨æ€æ·»åŠ æˆ–åˆ é™¤æ—¶ï¼Œäº‹ä»¶å§”æ‰˜ç‰¹åˆ«æœ‰ç”¨ï¼š

<CodeBlock>

```jsx
function DynamicList() {
  const [items, setItems] = useState([
    { id: 1, text: 'é¡¹ç›®1' },
    { id: 2, text: 'é¡¹ç›®2' }
  ]);

  const addItem = () => {
    const newItem = {
      id: Date.now(),
      text: `é¡¹ç›®${items.length + 1}`
    };
    setItems([...items, newItem]);
  };

  const handleItemClick = (e) => {
    const li = e.target.closest('li[data-id]');
    if (li) {
      const id = parseInt(li.dataset.id);
      console.log('ç‚¹å‡»äº†é¡¹ç›®:', id);
    }
  };

  return (
    <div>
      <button onClick={addItem}>æ·»åŠ é¡¹ç›®</button>
      <ul onClick={handleItemClick}>
        {items.map(item => (
          <li key={item.id} data-id={item.id}>
            {item.text}
          </li>
        ))}
      </ul>
    </div>
  );
}
```

</CodeBlock>

---

## 7. äº‹ä»¶å¤„ç†æœ€ä½³å®è·µ

### 7.1 æ€§èƒ½ä¼˜åŒ–

#### 7.1.1 ä½¿ç”¨useCallbackç¼“å­˜äº‹ä»¶å¤„ç†å‡½æ•°

<CodeBlock>

```jsx
function OptimizedList({ items, onItemClick }) {
  // ç¼“å­˜äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œé¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
  const handleItemClick = useCallback((id) => {
    onItemClick(id);
  }, [onItemClick]);

  return (
    <ul>
      {items.map(item => (
        <li key={item.id} onClick={() => handleItemClick(item.id)}>
          {item.name}
        </li>
      ))}
    </ul>
  );
}
```

</CodeBlock>

#### 7.1.2 é¿å…åœ¨æ¸²æŸ“ä¸­åˆ›å»ºæ–°å‡½æ•°

<Compare>

```jsx
// âŒ ä¸å¥½çš„åšæ³• - æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°å‡½æ•°
function BadExample({ items }) {
  return (
    <ul>
      {items.map(item => (
        <li onClick={() => console.log(item.id)} key={item.id}>
          {item.name}
        </li>
      ))}
    </ul>
  );
}

// âœ… å¥½çš„åšæ³• - æå–å‡½æ•°æˆ–ä½¿ç”¨useCallback
function GoodExample({ items, onItemClick }) {
  const handleClick = useCallback((id) => {
    onItemClick(id);
  }, [onItemClick]);

  return (
    <ul>
      {items.map(item => (
        <li onClick={() => handleClick(item.id)} key={item.id}>
          {item.name}
        </li>
      ))}
    </ul>
  );
}
```

</Compare>

### 7.2 äº‹ä»¶å¤„ç†çš„é”™è¯¯å¤„ç†

<CodeBlock>

```jsx
function SafeEventHandler() {
  const [error, setError] = useState(null);

  const handleClick = (e) => {
    try {
      // å¯èƒ½å‡ºé”™çš„æ“ä½œ
      if (!someCondition) {
        throw new Error('æ¡ä»¶ä¸æ»¡è¶³');
      }
      console.log('å¤„ç†æˆåŠŸ');
    } catch (err) {
      setError(err.message);
      console.error('äº‹ä»¶å¤„ç†é”™è¯¯:', err);
    }
  };

  return (
    <div>
      <button onClick={handleClick}>å®‰å…¨å¤„ç†</button>
      {error && <p style={{ color: 'red' }}>é”™è¯¯: {error}</p>}
    </div>
  );
}
```

</CodeBlock>

### 7.3 æ¸…ç†äº‹ä»¶ç›‘å¬

åœ¨ç»„ä»¶å¸è½½æ—¶æ¸…ç†äº‹ä»¶ç›‘å¬å™¨ï¼š

<CodeBlock>

```jsx
function WindowListener() {
  const [size, setSize] = useState({ width: 0, height: 0 });

  useEffect(() => {
    const handleResize = () => {
      setSize({
        width: window.innerWidth,
        height: window.innerHeight
      });
    };

    // æ·»åŠ äº‹ä»¶ç›‘å¬
    window.addEventListener('resize', handleResize);
    handleResize(); // åˆå§‹åŒ–

    // æ¸…ç†å‡½æ•°
    return () => {
      window.removeEventListener('resize', handleResize);
    };
  }, []);

  return (
    <div>
      <p>çª—å£å®½åº¦: {size.width}px</p>
      <p>çª—å£é«˜åº¦: {size.height}px</p>
    </div>
  );
}
```

</CodeBlock>

---

## 8. å®è·µç»ƒä¹ 

### ç»ƒä¹ 1ï¼šç®€å•çš„ç‚¹å‡»è®¡æ•°å™¨

åˆ›å»ºä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»æ—¶æ˜¾ç¤ºç‚¹å‡»æ¬¡æ•°ã€‚

<Expandable title="ç‚¹å‡»æŸ¥çœ‹æç¤º">

```jsx
function ClickCounter() {
  const [count, setCount] = useState(0);

  return (
    <div>
      <button onClick={() => setCount(count + 1)}>
        ç‚¹å‡»äº† {count} æ¬¡
      </button>
    </div>
  );
}
```

</Expandable>

### ç»ƒä¹ 2ï¼šå¯†ç å¼ºåº¦æ£€æµ‹å™¨

åˆ›å»ºä¸€ä¸ªè¾“å…¥æ¡†ï¼Œå®æ—¶æ˜¾ç¤ºå¯†ç å¼ºåº¦ã€‚

<Expandable title="ç‚¹å‡»æŸ¥çœ‹æç¤º">

```jsx
function PasswordStrength() {
  const [password, setPassword] = useState('');

  const getStrength = (pwd) => {
    if (pwd.length < 4) return { level: 'å¼±', color: 'red' };
    if (pwd.length < 8) return { level: 'ä¸­', color: 'orange' };
    return { level: 'å¼º', color: 'green' };
  };

  const strength = getStrength(password);

  return (
    <div>
      <input
        type="password"
        value={password}
        onChange={(e) => setPassword(e.target.value)}
        placeholder="è¾“å…¥å¯†ç "
      />
      <p style={{ color: strength.color }}>
        å¯†ç å¼ºåº¦: {strength.level}
      </p>
    </div>
  );
}
```

</Expandable>

### ç»ƒä¹ 3ï¼šå›¾ç‰‡è½®æ’­

åˆ›å»ºç®€å•çš„å›¾ç‰‡è½®æ’­ç»„ä»¶ï¼Œæ”¯æŒå·¦å³åˆ‡æ¢ã€‚

<Expandable title="ç‚¹å‡»æŸ¥çœ‹æç¤º">

```jsx
function ImageSlider() {
  const [current, setCurrent] = useState(0);
  const images = [
    'https://via.placeholder.com/300/FF0000/FFFFFF?text=1',
    'https://via.placeholder.com/300/00FF00/FFFFFF?text=2',
    'https://via.placeholder.com/300/0000FF/FFFFFF?text=3'
  ];

  const next = () => {
    setCurrent((current + 1) % images.length);
  };

  const prev = () => {
    setCurrent((current - 1 + images.length) % images.length);
  };

  return (
    <div>
      <img src={images[current]} alt={`å›¾ç‰‡ ${current + 1}`} />
      <div>
        <button onClick={prev}>ä¸Šä¸€å¼ </button>
        <span> {current + 1} / {images.length} </span>
        <button onClick={next}>ä¸‹ä¸€å¼ </button>
      </div>
    </div>
  );
}
```

</Expandable>

---

## 9. å¸¸è§é”™è¯¯

### 9.1 å¿˜è®°ä½¿ç”¨ç®­å¤´å‡½æ•°æˆ–bind

<ErrorBox>

```jsx
// âŒ é”™è¯¯
function BadExample() {
  return <button onClick={handleClick()}>ç‚¹å‡»</button>;
}

// âœ… æ­£ç¡®
function GoodExample() {
  return <button onClick={handleClick}>ç‚¹å‡»</button>;
}
```

</ErrorBox>

### 9.2 å†…å­˜æ³„æ¼

<ErrorBox>

```jsx
// âŒ é”™è¯¯ - æ²¡æœ‰æ¸…ç†äº‹ä»¶ç›‘å¬å™¨
function BadExample() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    window.addEventListener('resize', handleResize);
  }, []);

  return <div>Count: {count}</div>;
}

// âœ… æ­£ç¡® - æ¸…ç†ç›‘å¬å™¨
function GoodExample() {
  useEffect(() => {
    const handleResize = () => setCount(window.innerWidth);

    window.addEventListener('resize', handleResize);

    return () => {
      window.removeEventListener('resize', handleResize);
    };
  }, []);

  return <div>Width: {count}px</div>;
}
```

</ErrorBox>

### 9.3 ä¸å½“çš„çŠ¶æ€æ›´æ–°

<ErrorBox>

```jsx
// âŒ é”™è¯¯ - åœ¨æ¸²æŸ“ä¸­ç›´æ¥ä¿®æ”¹çŠ¶æ€
function BadExample() {
  const [items, setItems] = useState([]);

  return (
    <div>
      {items.map(item => {
        item.clicked = true; // ä¸è¦è¿™æ ·åšï¼
        return <div key={item.id}>{item.name}</div>;
      })}
    </div>
  );
}

// âœ… æ­£ç¡® - ä½¿ç”¨setStateæ›´æ–°
function GoodExample() {
  const [items, setItems] = useState([]);

  const markClicked = (id) => {
    setItems(items.map(item =>
      item.id === id ? { ...item, clicked: true } : item
    ));
  };

  return (
    <div>
      {items.map(item => (
        <div
          key={item.id}
          onClick={() => markClicked(item.id)}
        >
          {item.name}
        </div>
      ))}
    </div>
  );
}
```

</ErrorBox>

---

## 10. æœ¬ç« å°ç»“

### å…³é”®è¦ç‚¹

<Checklist>

- âœ… Reactä½¿ç”¨åˆæˆäº‹ä»¶ç³»ç»Ÿï¼Œæä¾›è·¨æµè§ˆå™¨çš„ä¸€è‡´æ€§
- âœ… äº‹ä»¶å¤„ç†å‡½æ•°ä½¿ç”¨é©¼å³°å‘½åæ³•ï¼ˆå¦‚onClickï¼‰
- âœ… äº‹ä»¶å¯¹è±¡æä¾›æœ‰ç”¨çš„å±æ€§å’Œæ–¹æ³•
- âœ… å¯ä»¥é˜»æ­¢é»˜è®¤è¡Œä¸ºå’Œäº‹ä»¶å†’æ³¡
- âœ… å¯ä»¥é€šè¿‡ç®­å¤´å‡½æ•°æˆ–bindä¼ é€’å‚æ•°
- âœ… äº‹ä»¶å§”æ‰˜å¯ä»¥æé«˜å¤§é‡åŠ¨æ€å…ƒç´ çš„æ€§èƒ½
- âœ… ä½¿ç”¨useCallbackä¼˜åŒ–äº‹ä»¶å¤„ç†å‡½æ•°
- âœ… åŠæ—¶æ¸…ç†äº‹ä»¶ç›‘å¬å™¨é¿å…å†…å­˜æ³„æ¼

</Checklist>

### ä¸‹ä¸€æ­¥å­¦ä¹ 

ç°åœ¨ä½ å·²ç»æŒæ¡äº†äº‹ä»¶å¤„ç†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å­¦ä¹ ï¼š

1. **[æ¡ä»¶æ¸²æŸ“](conditional-rendering)** - å­¦ä¹ æ ¹æ®æ¡ä»¶æ˜¾ç¤ºä¸åŒå†…å®¹
2. **[åˆ—è¡¨æ¸²æŸ“ä¸Keys](lists-and-keys)** - æŒæ¡å¦‚ä½•é«˜æ•ˆæ¸²æŸ“åˆ—è¡¨
3. **[è¡¨å•å¤„ç†](forms)** - æ·±å…¥å­¦ä¹ è¡¨å•äº¤äº’

---

## 11. å»¶ä¼¸é˜…è¯»

### å®˜æ–¹èµ„æº

- [å¤„ç†äº‹ä»¶](https://react.dev/learn/responding-to-events) - Reactå®˜æ–¹äº‹ä»¶æŒ‡å—
- [äº‹ä»¶å‚è€ƒ](https://react.dev/reference/react-dom/components/common) - äº‹ä»¶ç³»ç»ŸAPI
- [äº‹ä»¶å§”æ‰˜](https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/Building_blocks/Events#%E4%BA%8B%E4%BB%B6%E5%A7%94%E5%8F%91) - MDNäº‹ä»¶å§”æ‰˜æ•™ç¨‹

### å®è·µå»ºè®®

1. ç»ƒä¹ ä¸åŒç±»å‹çš„äº‹ä»¶å¤„ç†
2. ç†è§£äº‹ä»¶å¯¹è±¡çš„ä½¿ç”¨
3. æŒæ¡äº‹ä»¶å§”æ‰˜çš„åº”ç”¨åœºæ™¯
4. å­¦ä¼šæ€§èƒ½ä¼˜åŒ–æŠ€å·§

---

[â† ä¸Šä¸€ç« ï¼šStateä¸ç”Ÿå‘½å‘¨æœŸ](state-lifecycle) | [ä¸‹ä¸€ç« ï¼šæ¡ä»¶æ¸²æŸ“ â†’](conditional-rendering)
