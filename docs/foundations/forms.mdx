# è¡¨å•å¤„ç†

import { Tabs, TabItem } from '@docusaurus/theme-common';

è¡¨å•æ˜¯Webåº”ç”¨çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼Œç”¨äºæ”¶é›†ç”¨æˆ·è¾“å…¥ã€‚åœ¨Reactä¸­ï¼Œè¡¨å•å¤„ç†æ¶‰åŠç®¡ç†è¾“å…¥çŠ¶æ€ã€éªŒè¯æ•°æ®å’Œå¤„ç†æäº¤ã€‚æœ¬ç« å°†æ·±å…¥æ¢è®¨Reactä¸­çš„è¡¨å•å¤„ç†æ–¹æ³•ï¼ŒåŒ…æ‹¬å—æ§ç»„ä»¶ã€éå—æ§ç»„ä»¶ã€è¡¨å•éªŒè¯å’Œæœ€ä½³å®è·µã€‚

## æœ¬ç« å­¦ä¹ ç›®æ ‡

- ç†è§£å—æ§ç»„ä»¶ä¸éå—æ§ç»„ä»¶çš„åŒºåˆ«
- æŒæ¡åŸºæœ¬è¡¨å•å…ƒç´ çš„å¤„ç†æ–¹æ³•
- å­¦ä¼šå®ç°è¡¨å•éªŒè¯
- ç†è§£å—æ§ç»„ä»¶çš„ä¼˜åŠ¿
- æŒæ¡å¤æ‚è¡¨å•çš„å¤„ç†æŠ€å·§
- å­¦ä¼šä½¿ç”¨ç¬¬ä¸‰æ–¹è¡¨å•åº“

---

## 1. ä»€ä¹ˆæ˜¯è¡¨å•å¤„ç†ï¼Ÿ

è¡¨å•å¤„ç†æ˜¯æŒ‡ç®¡ç†è¡¨å•è¾“å…¥ã€æ›´æ–°çŠ¶æ€å’ŒéªŒè¯ç”¨æˆ·è¾“å…¥çš„è¿‡ç¨‹ã€‚åœ¨Reactä¸­ï¼Œæœ‰ä¸¤ç§ä¸»è¦çš„å¤„ç†æ–¹å¼ï¼š

<Box style={{ padding: '20px', background: '#e8f5e9', borderRadius: '8px', margin: '20px 0' }}>
  <h4 style={{ margin: 0, color: '#2e7d32' }}>ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µ</h4>
  <p style={{ margin: '10px 0 0 0' }}>
    Reactä¸­çš„è¡¨å•å¤„ç†å›´ç»•<strong>çŠ¶æ€ç®¡ç†</strong>å’Œ<strong>äº‹ä»¶å¤„ç†</strong>ï¼Œç¡®ä¿UIä¸æ•°æ®ä¿æŒåŒæ­¥ã€‚
  </p>
</Box>

<Grid>

<div>
  <h4>å—æ§ç»„ä»¶</h4>
  <p>ç»„ä»¶çš„çŠ¶æ€ç”±Reactæ§åˆ¶ï¼Œè¡¨å•æ•°æ®å­˜å‚¨åœ¨stateä¸­</p>
  <ul>
    <li>âœ… æ•°æ®ä¸€è‡´æ€§</li>
    <li>âœ… æ˜“äºéªŒè¯</li>
    <li>âœ… çµæ´»æ§åˆ¶</li>
    <li>âŒ ä»£ç è¾ƒå¤š</li>
  </ul>
</div>

<div>
  <h4>éå—æ§ç»„ä»¶</h4>
  <p>è¡¨å•æ•°æ®ç”±DOMå¤„ç†ï¼Œé€šè¿‡refè·å–å€¼</p>
  <ul>
    <li>âœ… ä»£ç ç®€å•</li>
    <li>âœ… æ€§èƒ½è¾ƒå¥½</li>
    <li>âŒ éš¾ä»¥éªŒè¯</li>
    <li>âŒ æ•°æ®ä¸åŒæ­¥</li>
  </ul>
</div>

<div>
  <h4>æ··åˆæ¨¡å¼</h4>
  <p>ç»“åˆä¸¤è€…ä¼˜ç‚¹ï¼Œé’ˆå¯¹ä¸åŒåœºæ™¯é€‰æ‹©</p>
  <ul>
    <li>âœ… çµæ´»</li>
    <li>âœ… æ€§èƒ½ä¼˜åŒ–</li>
    <li>âš ï¸ å¤æ‚åº¦å¢åŠ </li>
  </ul>
</div>

</Grid>

---

## 2. å—æ§ç»„ä»¶

### 2.1 åŸºæœ¬å—æ§ç»„ä»¶

åœ¨å—æ§ç»„ä»¶ä¸­ï¼Œè¡¨å•å…ƒç´ çš„å€¼ç”±React stateæ§åˆ¶ï¼Œæ¯æ¬¡è¾“å…¥éƒ½ä¼šæ›´æ–°stateã€‚

<CodeBlock>

```jsx
function SimpleForm() {
  const [name, setName] = useState('');
  const [email, setEmail] = useState('');

  const handleSubmit = (e) => {
    e.preventDefault();
    console.log('æäº¤çš„æ•°æ®:', { name, email });
    alert(`Hello ${name}! Your email: ${email}`);
  };

  return (
    <form onSubmit={handleSubmit}>
      <div>
        <label>
          å§“å:
          <input
            type="text"
            value={name}
            onChange={(e) => setName(e.target.value)}
            placeholder="è¯·è¾“å…¥å§“å"
          />
        </label>
      </div>
      <div>
        <label>
          é‚®ç®±:
          <input
            type="email"
            value={email}
            onChange={(e) => setEmail(e.target.value)}
            placeholder="è¯·è¾“å…¥é‚®ç®±"
          />
        </label>
      </div>
      <button type="submit">æäº¤</button>
    </form>
  );
}
```

</CodeBlock>

### 2.2 textareaå…ƒç´ 

åœ¨Reactä¸­ï¼Œ`textarea`ä½¿ç”¨`value`å±æ€§è€Œä¸æ˜¯`children`ã€‚

<CodeBlock>

```jsx
function TextareaForm() {
  const [message, setMessage] = useState('');

  const handleSubmit = (e) => {
    e.preventDefault();
    console.log('æ¶ˆæ¯:', message);
  };

  return (
    <form onSubmit={handleSubmit}>
      <div>
        <label>
          ç•™è¨€:
          <textarea
            value={message}
            onChange={(e) => setMessage(e.target.value)}
            placeholder="è¯·è¾“å…¥ç•™è¨€..."
            rows="4"
            cols="50"
          />
        </label>
      </div>
      <div>
        <p>å½“å‰å­—æ•°: {message.length}</p>
      </div>
      <button type="submit">å‘é€</button>
    </form>
  );
}
```

</CodeBlock>

### 2.3 selectå…ƒç´ 

<CodeBlock>

```jsx
function SelectForm() {
  const [color, setColor] = useState('red');
  const [country, setCountry] = useState('');

  const countries = [
    { value: '', label: 'è¯·é€‰æ‹©å›½å®¶' },
    { value: 'cn', label: 'ä¸­å›½' },
    { value: 'us', label: 'ç¾å›½' },
    { value: 'jp', label: 'æ—¥æœ¬' }
  ];

  return (
    <form>
      <div>
        <label>
          å–œæ¬¢çš„é¢œè‰²:
          <select value={color} onChange={(e) => setColor(e.target.value)}>
            <option value="red">çº¢è‰²</option>
            <option value="blue">è“è‰²</option>
            <option value="green">ç»¿è‰²</option>
            <option value="yellow">é»„è‰²</option>
          </select>
        </label>
      </div>
      <div>
        <label>
          å›½å®¶:
          <select value={country} onChange={(e) => setCountry(e.target.value)}>
            {countries.map(country => (
              <option key={country.value} value={country.value}>
                {country.label}
              </option>
            ))}
          </select>
        </label>
      </div>
    </form>
  );
}
```

</CodeBlock>

### 2.4 å¤é€‰æ¡†å’Œå•é€‰æ¡†

<CodeBlock>

```jsx
function CheckboxRadioForm() {
  const [subscribe, setSubscribe] = useState(false);
  const [gender, setGender] = useState('male');
  const [hobbies, setHobbies] = useState([]);

  const handleHobbyChange = (hobby) => {
    setHobbies(prev =>
      prev.includes(hobby)
        ? prev.filter(h => h !== hobby)
        : [...prev, hobby]
    );
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    console.log({
      subscribe,
      gender,
      hobbies
    });
  };

  return (
    <form onSubmit={handleSubmit}>
      <div>
        <label>
          <input
            type="checkbox"
            checked={subscribe}
            onChange={(e) => setSubscribe(e.target.checked)}
          />
          è®¢é˜…é‚®ä»¶
        </label>
      </div>

      <div>
        <label>
          <input
            type="radio"
            name="gender"
            value="male"
            checked={gender === 'male'}
            onChange={(e) => setGender(e.target.value)}
          />
          ç”·æ€§
        </label>
        <label>
          <input
            type="radio"
            name="gender"
            value="female"
            checked={gender === 'female'}
            onChange={(e) => setGender(e.target.value)}
          />
          å¥³æ€§
        </label>
      </div>

      <div>
        <p>çˆ±å¥½:</p>
        <label>
          <input
            type="checkbox"
            value="reading"
            checked={hobbies.includes('reading')}
            onChange={() => handleHobbyChange('reading')}
          />
          é˜…è¯»
        </label>
        <label>
          <input
            type="checkbox"
            value="sports"
            checked={hobbies.includes('sports')}
            onChange={() => handleHobbyChange('sports')}
          />
          è¿åŠ¨
        </label>
        <label>
          <input
            type="checkbox"
            value="music"
            checked={hobbies.includes('music')}
            onChange={() => handleHobbyChange('music')}
          />
          éŸ³ä¹
        </label>
      </div>

      <button type="submit">æäº¤</button>
    </form>
  );
}
```

</CodeBlock>

---

## 3. éå—æ§ç»„ä»¶

### 3.1 ä½¿ç”¨useRefè·å–å€¼

éå—æ§ç»„ä»¶ä½¿ç”¨`ref`ç›´æ¥è®¿é—®DOMå…ƒç´ çš„å€¼ã€‚

<CodeBlock>

```jsx
function UncontrolledForm() {
  const nameRef = useRef();
  const emailRef = useRef();
  const fileRef = useRef();

  const handleSubmit = (e) => {
    e.preventDefault();
    console.log('å§“å:', nameRef.current.value);
    console.log('é‚®ç®±:', emailRef.current.value);
    console.log('æ–‡ä»¶:', fileRef.current.files[0]);
  };

  return (
    <form onSubmit={handleSubmit}>
      <div>
        <label>
          å§“å:
          <input type="text" ref={nameRef} />
        </label>
      </div>
      <div>
        <label>
          é‚®ç®±:
          <input type="email" ref={emailRef} />
        </label>
      </div>
      <div>
        <label>
          æ–‡ä»¶:
          <input type="file" ref={fileRef} />
        </label>
      </div>
      <button type="submit">æäº¤</button>
    </form>
  );
}
```

</CodeBlock>

### 3.2 é»˜è®¤å€¼è®¾ç½®

ä½¿ç”¨`defaultValue`è®¾ç½®éå—æ§ç»„ä»¶çš„åˆå§‹å€¼ã€‚

<CodeBlock>

```jsx
function UncontrolledWithDefaults() {
  const formRef = useRef();

  const handleSubmit = (e) => {
    e.preventDefault();
    const formData = new FormData(formRef.current);
    console.log('è¡¨å•æ•°æ®:', Object.fromEntries(formData));
  };

  return (
    <form ref={formRef} onSubmit={handleSubmit}>
      <div>
        <label>
          ç”¨æˆ·å:
          <input type="text" name="username" defaultValue="admin" />
        </label>
      </div>
      <div>
        <label>
          å¯†ç :
          <input type="password" name="password" />
        </label>
      </div>
      <div>
        <label>
          <input type="checkbox" name="remember" defaultChecked />
          è®°ä½æˆ‘
        </label>
      </div>
      <button type="submit">ç™»å½•</button>
    </form>
  );
}
```

</CodeBlock>

---

## 4. è¡¨å•éªŒè¯

### 4.1 åŸºç¡€éªŒè¯

åœ¨Reactä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨`onChange`æˆ–`onBlur`æ—¶è¿›è¡Œå®æ—¶éªŒè¯ã€‚

<CodeBlock>

```jsx
function ValidatedForm() {
  const [formData, setFormData] = useState({
    username: '',
    email: '',
    password: '',
    confirmPassword: ''
  });
  const [errors, setErrors] = useState({});

  const validate = (name, value) => {
    switch (name) {
      case 'username':
        if (value.length < 3) {
          return 'ç”¨æˆ·åè‡³å°‘3ä¸ªå­—ç¬¦';
        }
        return '';
      case 'email':
        if (!/\S+@\S+\.\S+/.test(value)) {
          return 'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®';
        }
        return '';
      case 'password':
        if (value.length < 6) {
          return 'å¯†ç è‡³å°‘6ä¸ªå­—ç¬¦';
        }
        return '';
      case 'confirmPassword':
        if (value !== formData.password) {
          return 'ä¸¤æ¬¡å¯†ç è¾“å…¥ä¸ä¸€è‡´';
        }
        return '';
      default:
        return '';
    }
  };

  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData(prev => ({ ...prev, [name]: value }));

    // å®æ—¶éªŒè¯
    const error = validate(name, value);
    setErrors(prev => ({ ...prev, [name]: error }));
  };

  const handleSubmit = (e) => {
    e.preventDefault();

    // éªŒè¯æ‰€æœ‰å­—æ®µ
    const newErrors = {};
    Object.keys(formData).forEach(key => {
      const error = validate(key, formData[key]);
      if (error) newErrors[key] = error;
    });

    if (Object.keys(newErrors).length > 0) {
      setErrors(newErrors);
      return;
    }

    console.log('è¡¨å•æ•°æ®:', formData);
    alert('æäº¤æˆåŠŸï¼');
  };

  return (
    <form onSubmit={handleSubmit}>
      <div>
        <label>
          ç”¨æˆ·å:
          <input
            type="text"
            name="username"
            value={formData.username}
            onChange={handleChange}
          />
        </label>
        {errors.username && <p style={{ color: 'red' }}>{errors.username}</p>}
      </div>

      <div>
        <label>
          é‚®ç®±:
          <input
            type="email"
            name="email"
            value={formData.email}
            onChange={handleChange}
          />
        </label>
        {errors.email && <p style={{ color: 'red' }}>{errors.email}</p>}
      </div>

      <div>
        <label>
          å¯†ç :
          <input
            type="password"
            name="password"
            value={formData.password}
            onChange={handleChange}
          />
        </label>
        {errors.password && <p style={{ color: 'red' }}>{errors.password}</p>}
      </div>

      <div>
        <label>
          ç¡®è®¤å¯†ç :
          <input
            type="password"
            name="confirmPassword"
            value={formData.confirmPassword}
            onChange={handleChange}
          />
        </label>
        {errors.confirmPassword && <p style={{ color: 'red' }}>{errors.confirmPassword}</p>}
      </div>

      <button type="submit">æ³¨å†Œ</button>
    </form>
  );
}
```

</CodeBlock>

### 4.2 å¼‚æ­¥éªŒè¯

<CodeBlock>

```jsx
function AsyncValidatedForm() {
  const [username, setUsername] = useState('');
  const [usernameError, setUsernameError] = useState('');
  const [checking, setChecking] = useState(false);

  // æ¨¡æ‹ŸAPIæ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨
  const checkUsername = useCallback(
    debounce(async (username) => {
      if (!username) return;

      setChecking(true);
      try {
        // æ¨¡æ‹ŸAPIè¯·æ±‚
        const response = await fetch(`/api/check-username?username=${username}`);
        const data = await response.json();

        if (data.exists) {
          setUsernameError('ç”¨æˆ·åå·²è¢«ä½¿ç”¨');
        } else {
          setUsernameError('');
        }
      } catch (error) {
        setUsernameError('æ£€æŸ¥å¤±è´¥ï¼Œè¯·é‡è¯•');
      } finally {
        setChecking(false);
      }
    }, 500),
    []
  );

  const handleUsernameChange = (e) => {
    const value = e.target.value;
    setUsername(value);
    checkUsername(value);
  };

  return (
    <form>
      <div>
        <label>
          ç”¨æˆ·å:
          <input
            type="text"
            value={username}
            onChange={handleUsernameChange}
          />
          {checking && <span>æ£€æŸ¥ä¸­...</span>}
        </label>
        {usernameError && <p style={{ color: 'red' }}>{usernameError}</p>}
      </div>
    </form>
  );
}

// Debounceå‡½æ•°å®ç°
function debounce(func, delay) {
  let timeoutId;
  return (...args) => {
    clearTimeout(timeoutId);
    timeoutId = setTimeout(() => func(...args), delay);
  };
}
```

</CodeBlock>

---

## 5. å¤æ‚è¡¨å•å¤„ç†

### 5.1 åŠ¨æ€å­—æ®µ

<CodeBlock>

```jsx
function DynamicFieldsForm() {
  const [inputs, setInputs] = useState([
    { id: 1, value: '' }
  ]);

  const addInput = () => {
    setInputs([...inputs, { id: Date.now(), value: '' }]);
  };

  const removeInput = (id) => {
    setInputs(inputs.filter(input => input.id !== id));
  };

  const updateInput = (id, value) => {
    setInputs(inputs.map(input =>
      input.id === id ? { ...input, value } : input
    ));
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    const values = inputs.map(input => input.value);
    console.log('æ‰€æœ‰å€¼:', values);
  };

  return (
    <form onSubmit={handleSubmit}>
      <h3>åŠ¨æ€å­—æ®µ</h3>
      {inputs.map((input, index) => (
        <div key={input.id}>
          <input
            type="text"
            value={input.value}
            onChange={(e) => updateInput(input.id, e.target.value)}
            placeholder={`å­—æ®µ ${index + 1}`}
          />
          {inputs.length > 1 && (
            <button type="button" onClick={() => removeInput(input.id)}>
              åˆ é™¤
            </button>
          )}
        </div>
      ))}
      <button type="button" onClick={addInput}>
        æ·»åŠ å­—æ®µ
      </button>
      <button type="submit">æäº¤</button>
    </form>
  );
}
```

</CodeBlock>

### 5.2 åµŒå¥—å¯¹è±¡è¡¨å•

<CodeBlock>

```jsx
function NestedForm() {
  const [formData, setFormData] = useState({
    user: {
      name: '',
      email: '',
      address: {
        street: '',
        city: '',
        zipCode: ''
      }
    }
  });

  const handleChange = (e) => {
    const { name, value } = e.target;
    const nameParts = name.split('.');

    setFormData(prev => {
      const newData = { ...prev };
      let current = newData.user;

      // å¯¼èˆªåˆ°åµŒå¥—å±æ€§
      for (let i = 0; i < nameParts.length - 1; i++) {
        current[nameParts[i]] = { ...current[nameParts[i]] };
        current = current[nameParts[i]];
      }

      // è®¾ç½®å€¼
      current[nameParts[nameParts.length - 1]] = value;

      return newData;
    });
  };

  return (
    <form>
      <h3>ç”¨æˆ·ä¿¡æ¯</h3>
      <div>
        <label>
          å§“å:
          <input
            type="text"
            name="user.name"
            value={formData.user.name}
            onChange={handleChange}
          />
        </label>
      </div>
      <div>
        <label>
          é‚®ç®±:
          <input
            type="email"
            name="user.email"
            value={formData.user.email}
            onChange={handleChange}
          />
        </label>
      </div>

      <h3>åœ°å€</h3>
      <div>
        <label>
          è¡—é“:
          <input
            type="text"
            name="user.address.street"
            value={formData.user.address.street}
            onChange={handleChange}
          />
        </label>
      </div>
      <div>
        <label>
          åŸå¸‚:
          <input
            type="text"
            name="user.address.city"
            value={formData.user.address.city}
            onChange={handleChange}
          />
        </label>
      </div>
      <div>
        <label>
          é‚®æ”¿ç¼–ç :
          <input
            type="text"
            name="user.address.zipCode"
            value={formData.user.address.zipCode}
            onChange={handleChange}
          />
        </label>
      </div>
    </form>
  );
}
```

</CodeBlock>

### 5.3 è¡¨å•æ•°ç»„

<CodeBlock>

```jsx
function TeamForm() {
  const [team, setTeam] = useState({
    name: '',
    members: [
      { name: '', email: '', role: 'member' }
    ]
  });

  const addMember = () => {
    setTeam({
      ...team,
      members: [
        ...team.members,
        { name: '', email: '', role: 'member' }
      ]
    });
  };

  const removeMember = (index) => {
    const newMembers = team.members.filter((_, i) => i !== index);
    setTeam({ ...team, members: newMembers });
  };

  const updateMember = (index, field, value) => {
    const newMembers = [...team.members];
    newMembers[index] = { ...newMembers[index], [field]: value };
    setTeam({ ...team, members: newMembers });
  };

  return (
    <form>
      <h3>å›¢é˜Ÿä¿¡æ¯</h3>
      <div>
        <label>
          å›¢é˜Ÿåç§°:
          <input
            type="text"
            value={team.name}
            onChange={(e) => setTeam({ ...team, name: e.target.value })}
          />
        </label>
      </div>

      <h3>æˆå‘˜</h3>
      {team.members.map((member, index) => (
        <div key={index} style={{ border: '1px solid #ddd', padding: '10px', margin: '10px 0' }}>
          <div>
            <label>
              å§“å:
              <input
                type="text"
                value={member.name}
                onChange={(e) => updateMember(index, 'name', e.target.value)}
              />
            </label>
          </div>
          <div>
            <label>
              é‚®ç®±:
              <input
                type="email"
                value={member.email}
                onChange={(e) => updateMember(index, 'email', e.target.value)}
              />
            </label>
          </div>
          <div>
            <label>
              è§’è‰²:
              <select
                value={member.role}
                onChange={(e) => updateMember(index, 'role', e.target.value)}
              >
                <option value="member">æˆå‘˜</option>
                <option value="lead">ç»„é•¿</option>
                <option value="admin">ç®¡ç†å‘˜</option>
              </select>
            </label>
          </div>
          {team.members.length > 1 && (
            <button type="button" onClick={() => removeMember(index)}>
              ç§»é™¤æˆå‘˜
            </button>
          )}
        </div>
      ))}

      <button type="button" onClick={addMember}>
        æ·»åŠ æˆå‘˜
      </button>
    </form>
  );
}
```

</CodeBlock>

---

## 6. è¡¨å•é‡ç½®ä¸ä¿å­˜

### 6.1 é‡ç½®è¡¨å•

<CodeBlock>

```jsx
function ResettableForm() {
  const [formData, setFormData] = useState({
    name: '',
    email: '',
    message: ''
  });

  const handleChange = (e) => {
    setFormData({
      ...formData,
      [e.target.name]: e.target.value
    });
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    console.log('æäº¤:', formData);
    // æäº¤é€»è¾‘
  };

  const handleReset = () => {
    setFormData({
      name: '',
      email: '',
      message: ''
    });
  };

  return (
    <form onSubmit={handleSubmit} onReset={handleReset}>
      <div>
        <label>
          å§“å:
          <input
            type="text"
            name="name"
            value={formData.name}
            onChange={handleChange}
          />
        </label>
      </div>
      <div>
        <label>
          é‚®ç®±:
          <input
            type="email"
            name="email"
            value={formData.email}
            onChange={handleChange}
          />
        </label>
      </div>
      <div>
        <label>
          ç•™è¨€:
          <textarea
            name="message"
            value={formData.message}
            onChange={handleChange}
          />
        </label>
      </div>
      <button type="submit">æäº¤</button>
      <button type="reset">é‡ç½®</button>
    </form>
  );
}
```

</CodeBlock>

### 6.2 ä¿å­˜è‰ç¨¿

<CodeBlock>

```jsx
function AutoSaveForm() {
  const [formData, setFormData] = useState(
    () => JSON.parse(localStorage.getItem('formData')) || {
      title: '',
      content: ''
    }
  );

  // è‡ªåŠ¨ä¿å­˜åˆ°localStorage
  useEffect(() => {
    const timer = setTimeout(() => {
      localStorage.setItem('formData', JSON.stringify(formData));
      console.log('è‰ç¨¿å·²ä¿å­˜');
    }, 1000);

    return () => clearTimeout(timer);
  }, [formData]);

  const handleChange = (e) => {
    setFormData({
      ...formData,
      [e.target.name]: e.target.value
    });
  };

  const clearDraft = () => {
    localStorage.removeItem('formData');
    setFormData({ title: '', content: '' });
  };

  return (
    <form>
      <div>
        <label>
          æ ‡é¢˜:
          <input
            type="text"
            name="title"
            value={formData.title}
            onChange={handleChange}
          />
        </label>
      </div>
      <div>
        <label>
          å†…å®¹:
          <textarea
            name="content"
            value={formData.content}
            onChange={handleChange}
            rows="10"
          />
        </label>
      </div>
      <button type="button" onClick={clearDraft}>
        æ¸…é™¤è‰ç¨¿
      </button>
    </form>
  );
}
```

</CodeBlock>

---

## 7. æ€§èƒ½ä¼˜åŒ–

### 7.1 ä½¿ç”¨useCallbackä¼˜åŒ–äº‹ä»¶å¤„ç†

<CodeBlock>

```jsx
function OptimizedForm() {
  const [formData, setFormData] = useState({
    name: '',
    email: '',
    message: ''
  });

  // ä½¿ç”¨useCallbackç¼“å­˜å‡½æ•°
  const handleChange = useCallback((e) => {
    const { name, value } = e.target;
    setFormData(prev => ({ ...prev, [name]: value }));
  }, []);

  const handleSubmit = useCallback((e) => {
    e.preventDefault();
    console.log(formData);
  }, [formData]);

  return (
    <form onSubmit={handleSubmit}>
      <input
        type="text"
        name="name"
        value={formData.name}
        onChange={handleChange}
      />
      <input
        type="email"
        name="email"
        value={formData.email}
        onChange={handleChange}
      />
      <textarea
        name="message"
        value={formData.message}
        onChange={handleChange}
      />
      <button type="submit">æäº¤</button>
    </form>
  );
}
```

</CodeBlock>

### 7.2 æ‹†åˆ†å¤æ‚è¡¨å•

<CodeBlock>

```jsx
// å°†è¡¨å•æ‹†åˆ†ä¸ºå­ç»„ä»¶
function FormSection({ title, children }) {
  return (
    <fieldset>
      <legend>{title}</legend>
      {children}
    </fieldset>
  );
}

function PersonalInfo({ data, onChange }) {
  return (
    <FormSection title="ä¸ªäººä¿¡æ¯">
      <input
        type="text"
        value={data.name}
        onChange={(e) => onChange('name', e.target.value)}
        placeholder="å§“å"
      />
      <input
        type="email"
        value={data.email}
        onChange={(e) => onChange('email', e.target.value)}
        placeholder="é‚®ç®±"
      />
    </FormSection>
  );
}

function AddressInfo({ data, onChange }) {
  return (
    <FormSection title="åœ°å€ä¿¡æ¯">
      <input
        type="text"
        value={data.street}
        onChange={(e) => onChange('street', e.target.value)}
        placeholder="è¡—é“"
      />
      <input
        type="text"
        value={data.city}
        onChange={(e) => onChange('city', e.target.value)}
        placeholder="åŸå¸‚"
      />
    </FormSection>
  );
}

function ComplexForm() {
  const [formData, setFormData] = useState({
    name: '',
    email: '',
    street: '',
    city: ''
  });

  const handleChange = (field, value) => {
    setFormData(prev => ({ ...prev, [field]: value }));
  };

  return (
    <form>
      <PersonalInfo data={formData} onChange={handleChange} />
      <AddressInfo data={formData} onChange={handleChange} />
      <button type="submit">æäº¤</button>
    </form>
  );
}
```

</CodeBlock>

---

## 8. ç¬¬ä¸‰æ–¹è¡¨å•åº“

### 8.1 Formikç®€ä»‹

Formikæ˜¯ä¸€ä¸ªæµè¡Œçš„Reactè¡¨å•åº“ï¼Œç®€åŒ–è¡¨å•å¤„ç†å’ŒéªŒè¯ã€‚

<CodeBlock>

```jsx
// ä½¿ç”¨Formik
import { Formik, Form, Field, ErrorMessage } from 'formik';

// ç®€å•éªŒè¯å‡½æ•°
const validate = (values) => {
  const errors = {};
  if (!values.email) {
    errors.email = 'å¿…å¡«';
  } else if (!/\S+@\S+\.\S+/.test(values.email)) {
    errors.email = 'é‚®ç®±æ ¼å¼æ— æ•ˆ';
  }
  return errors;
};

function FormikForm() {
  return (
    <Formik
      initialValues={{ email: '', password: '' }}
      validate={validate}
      onSubmit={(values) => {
        console.log('æäº¤:', values);
        alert('æäº¤æˆåŠŸï¼');
      }}
    >
      <Form>
        <div>
          <label>é‚®ç®±:</label>
          <Field type="email" name="email" />
          <ErrorMessage name="email" component="div" style={{ color: 'red' }} />
        </div>
        <div>
          <label>å¯†ç :</label>
          <Field type="password" name="password" />
          <ErrorMessage name="password" component="div" style={{ color: 'red' }} />
        </div>
        <button type="submit">ç™»å½•</button>
      </Form>
    </Formik>
  );
}
```

</CodeBlock>

### 8.2 React Hook Formç®€ä»‹

React Hook Formæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„è¡¨å•åº“ï¼Œæ€§èƒ½ä¼˜å¼‚ã€‚

<CodeBlock>

```jsx
// ä½¿ç”¨React Hook Form
import { useForm } from 'react-hook-form';

function HookForm() {
  const { register, handleSubmit, formState: { errors } } = useForm();

  const onSubmit = (data) => {
    console.log('æäº¤:', data);
    alert('æäº¤æˆåŠŸï¼');
  };

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <div>
        <label>é‚®ç®±:</label>
        <input
          type="email"
          {...register('email', {
            required: 'å¿…å¡«',
            pattern: {
              value: /\S+@\S+\.\S+/,
              message: 'é‚®ç®±æ ¼å¼æ— æ•ˆ'
            }
          })}
        />
        {errors.email && <p style={{ color: 'red' }}>{errors.email.message}</p>}
      </div>

      <div>
        <label>å¯†ç :</label>
        <input
          type="password"
          {...register('password', {
            required: 'å¿…å¡«',
            minLength: {
              value: 6,
              message: 'è‡³å°‘6ä¸ªå­—ç¬¦'
            }
          })}
        />
        {errors.password && <p style={{ color: 'red' }}>{errors.password.message}</p>}
      </div>

      <button type="submit">ç™»å½•</button>
    </form>
  );
}
```

</CodeBlock>

---

## 9. å®è·µç»ƒä¹ 

### ç»ƒä¹ 1ï¼šç™»å½•è¡¨å•

åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„ç™»å½•è¡¨å•ï¼ŒåŒ…å«éªŒè¯ã€åŠ è½½çŠ¶æ€å’Œé”™è¯¯å¤„ç†ã€‚

<Expandable title="ç‚¹å‡»æŸ¥çœ‹è¦æ±‚">

**åŠŸèƒ½è¦æ±‚**ï¼š
- é‚®ç®±å’Œå¯†ç è¾“å…¥
- è¡¨å•éªŒè¯ï¼ˆå¿…å¡«ã€é‚®ç®±æ ¼å¼ã€å¯†ç é•¿åº¦ï¼‰
- ç™»å½•æŒ‰é’®loadingçŠ¶æ€
- é”™è¯¯ä¿¡æ¯æ˜¾ç¤º
- è¡¨å•é‡ç½®åŠŸèƒ½

**æç¤º**ï¼š
- ä½¿ç”¨å—æ§ç»„ä»¶
- å®ç°å¼‚æ­¥éªŒè¯
- ä½¿ç”¨useStateç®¡ç†åŠ è½½å’Œé”™è¯¯çŠ¶æ€

</Expandable>

### ç»ƒä¹ 2ï¼šç”¨æˆ·æ³¨å†Œ

åˆ›å»ºä¸€ä¸ªç”¨æˆ·æ³¨å†Œè¡¨å•ï¼ŒåŒ…å«å¤šä¸ªå­—æ®µå’Œå¤æ‚éªŒè¯ã€‚

<Expandable title="ç‚¹å‡»æŸ¥çœ‹è¦æ±‚">

**åŠŸèƒ½è¦æ±‚**ï¼š
- ç”¨æˆ·åã€é‚®ç®±ã€å¯†ç ã€ç¡®è®¤å¯†ç 
- ç”¨æˆ·åå”¯ä¸€æ€§æ£€æŸ¥ï¼ˆæ¨¡æ‹ŸAPIï¼‰
- å¯†ç å¼ºåº¦æ£€æŸ¥
- å®æ—¶éªŒè¯åé¦ˆ
- æˆåŠŸæäº¤åŠ¨ç”»

**æ•°æ®ç»“æ„**ï¼š
```javascript
{
  username: string,
  email: string,
  password: string,
  confirmPassword: string,
  acceptTerms: boolean
}
```

</Expandable>

### ç»ƒä¹ 3ï¼šäº§å“è¯„ä»·è¡¨å•

åˆ›å»ºä¸€ä¸ªäº§å“è¯„ä»·è¡¨å•ï¼Œæ”¯æŒè¯„åˆ†ã€æ–‡å­—è¯„è®ºå’Œå›¾ç‰‡ä¸Šä¼ ã€‚

<Expandable title="ç‚¹å‡»æŸ¥çœ‹è¦æ±‚">

**åŠŸèƒ½è¦æ±‚**ï¼š
- 1-5æ˜Ÿè¯„åˆ†
- æ–‡å­—è¯„è®ºï¼ˆæ”¯æŒå¤šè¡Œï¼‰
- å›¾ç‰‡ä¸Šä¼ é¢„è§ˆ
- åŒ¿åè¯„ä»·é€‰é¡¹
- å­—æ•°ç»Ÿè®¡

**éªŒè¯è§„åˆ™**ï¼š
- è¯„è®ºè‡³å°‘10ä¸ªå­—ç¬¦
- è‡³å°‘ä¸Šä¼ 1å¼ å›¾ç‰‡æˆ–å¡«å†™è¯„è®º

</Expandable>

### ç»ƒä¹ 4ï¼šæœç´¢ç­›é€‰å™¨

åˆ›å»ºä¸€ä¸ªé«˜çº§æœç´¢è¡¨å•ï¼Œæ”¯æŒå¤šæ¡ä»¶ç­›é€‰ã€‚

<Expandable title="ç‚¹å‡»æŸ¥çœ‹è¦æ±‚">

**åŠŸèƒ½è¦æ±‚**ï¼š
- å…³é”®å­—æœç´¢
- æ—¥æœŸèŒƒå›´é€‰æ‹©
- å¤šé€‰åˆ†ç±»
- ä»·æ ¼èŒƒå›´æ»‘å—
- é‡ç½®ç­›é€‰å™¨
- æœç´¢å»ºè®®

**çŠ¶æ€ç®¡ç†**ï¼š
- ä½¿ç”¨URLå‚æ•°ä¿å­˜ç­›é€‰çŠ¶æ€
- æ”¯æŒä¹¦ç­¾å’Œåˆ†äº«

</Expandable>

---

## 10. å¸¸è§é”™è¯¯

### é”™è¯¯1ï¼šå¿˜è®°ä½¿ç”¨e.preventDefault()

<ErrorBox>

```jsx
// âŒ é”™è¯¯ - é¡µé¢ä¼šåˆ·æ–°
function BadForm() {
  const [value, setValue] = useState('');

  const handleSubmit = () => {
    console.log(value);  // ä¼šåˆ·æ–°é¡µé¢
  };

  return (
    <form onSubmit={handleSubmit}>
      <input value={value} onChange={(e) => setValue(e.target.value)} />
      <button type="submit">æäº¤</button>
    </form>
  );
}

// âœ… æ­£ç¡®
function GoodForm() {
  const [value, setValue] = useState('');

  const handleSubmit = (e) => {
    e.preventDefault();  // é˜»æ­¢é»˜è®¤æäº¤
    console.log(value);
  };

  return (
    <form onSubmit={handleSubmit}>
      <input value={value} onChange={(e) => setValue(e.target.value)} />
      <button type="submit">æäº¤</button>
    </form>
  );
}
```

</ErrorBox>

### é”™è¯¯2ï¼šç›´æ¥ä¿®æ”¹state

<ErrorBox>

```jsx
// âŒ é”™è¯¯
function BadForm() {
  const [items, setItems] = useState([]);

  const addItem = (item) => {
    items.push(item);  // ç›´æ¥ä¿®æ”¹stateï¼
    setItems(items);
  };

  return <button onClick={() => addItem('new')}>æ·»åŠ </button>;
}

// âœ… æ­£ç¡®
function GoodForm() {
  const [items, setItems] = useState([]);

  const addItem = (item) => {
    setItems([...items, item]);  // åˆ›å»ºæ–°æ•°ç»„
  };

  return <button onClick={() => addItem('new')}>æ·»åŠ </button>;
}
```

</ErrorBox>

### é”™è¯¯3ï¼šæ··ç”¨å—æ§å’Œéå—æ§ç»„ä»¶

<ErrorBox>

```jsx
// âŒ é”™è¯¯ - åŒæ—¶ä½¿ç”¨valueå’ŒdefaultValue
<input
  value={value}
  defaultValue={value}  // å†²çªï¼
  onChange={handleChange}
/>

// âœ… æ­£ç¡® - åªä½¿ç”¨ä¸€ç§
<input
  value={value}
  onChange={handleChange}
/>

// æˆ–è€…
<input
  defaultValue={value}
  ref={inputRef}
/>
```

</ErrorBox>

### é”™è¯¯4ï¼šå¿˜è®°å¤„ç†å¼‚æ­¥çŠ¶æ€æ›´æ–°

<ErrorBox>

```jsx
// âŒ é”™è¯¯
function BadForm() {
  const [count, setCount] = useState(0);

  const increment = () => {
    setCount(count + 1);
    console.log(count);  // æ‰“å°çš„æ˜¯æ—§å€¼ï¼
  };

  return <button onClick={increment}>è®¡æ•°: {count}</button>;
}

// âœ… æ­£ç¡® - ä½¿ç”¨å›è°ƒå½¢å¼
function GoodForm() {
  const [count, setCount] = useState(0);

  const increment = () => {
    setCount(prevCount => {
      const newCount = prevCount + 1;
      console.log(newCount);  // æ–°å€¼
      return newCount;
    });
  };

  return <button onClick={increment}>è®¡æ•°: {count}</button>;
}
```

</ErrorBox>

### é”™è¯¯5ï¼šè¿‡åº¦éªŒè¯

<ErrorBox>

```jsx
// âŒ ä¸å¥½ - æ¯æ¬¡æŒ‰é”®éƒ½éªŒè¯æ‰€æœ‰å­—æ®µ
const handleChange = (e) => {
  const { name, value } = e.target;
  setFormData(prev => ({ ...prev, [name]: value }));

  // éªŒè¯æ‰€æœ‰å­—æ®µ
  const newErrors = validateAll(formData);
  setErrors(newErrors);
};

// âœ… æ›´å¥½ - åªéªŒè¯å½“å‰å­—æ®µ
const handleChange = (e) => {
  const { name, value } = e.target;
  setFormData(prev => ({ ...prev, [name]: value }));

  // åªéªŒè¯å½“å‰å­—æ®µ
  const error = validateField(name, value);
  setErrors(prev => ({ ...prev, [name]: error }));
};
```

</ErrorBox>

---

## 11. æœ¬ç« å°ç»“

### å…³é”®è¦ç‚¹

<Checklist>

- âœ… å—æ§ç»„ä»¶ä½¿ç”¨stateç®¡ç†è¡¨å•æ•°æ®ï¼Œå€¼ä¸UIåŒæ­¥
- âœ… éå—æ§ç»„ä»¶ä½¿ç”¨refç›´æ¥è®¿é—®DOMå€¼
- âœ… äº‹ä»¶å¤„ç†å‡½æ•°ä½¿ç”¨`e.preventDefault()`é˜»æ­¢é»˜è®¤æäº¤
- âœ… è¡¨å•éªŒè¯å¯ä»¥æ˜¯åŒæ­¥çš„ï¼ˆç«‹å³åé¦ˆï¼‰æˆ–å¼‚æ­¥çš„ï¼ˆAPIæ£€æŸ¥ï¼‰
- âœ… å¤æ‚è¡¨å•å¯ä»¥æ‹†åˆ†ä¸ºå¤šä¸ªå­ç»„ä»¶
- âœ… ä½¿ç”¨`useCallback`ä¼˜åŒ–æ€§èƒ½ï¼Œé¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
- âœ… è€ƒè™‘ä½¿ç”¨Formikæˆ–React Hook Formç­‰ç¬¬ä¸‰æ–¹åº“
- âœ… å§‹ç»ˆéªŒè¯æ‰€æœ‰ç”¨æˆ·è¾“å…¥ï¼Œé¿å…XSSæ”»å‡»

</Checklist>

### æœ€ä½³å®è·µ

<BestPractices>

1. **ä¼˜å…ˆä½¿ç”¨å—æ§ç»„ä»¶** - ä¾¿äºéªŒè¯å’ŒçŠ¶æ€ç®¡ç†
2. **å®æ—¶éªŒè¯** - æä¾›å³æ—¶åé¦ˆæ”¹å–„ç”¨æˆ·ä½“éªŒ
3. **æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯** - å¸®åŠ©ç”¨æˆ·å¿«é€Ÿä¿®æ­£é”™è¯¯
4. **æ‹†åˆ†å¤æ‚è¡¨å•** - æé«˜å¯ç»´æŠ¤æ€§
5. **æ€§èƒ½ä¼˜åŒ–** - ä½¿ç”¨`useCallback`å’Œ`useMemo`
6. **æµ‹è¯•æ‰€æœ‰åœºæ™¯** - åŒ…æ‹¬è¾¹ç•Œæƒ…å†µå’Œé”™è¯¯å¤„ç†

</BestPractices>

### ä¸‹ä¸€æ­¥å­¦ä¹ 

ç°åœ¨ä½ å·²ç»æŒæ¡äº†è¡¨å•å¤„ç†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å­¦ä¹ ï¼š

1. **[çŠ¶æ€ç®¡ç†è¿›é˜¶](../hooks/basics/useState)** - æ·±å…¥ç†è§£useState
2. **[è‡ªå®šä¹‰Hooks](../hooks/custom)** - åˆ›å»ºå¯å¤ç”¨çš„çŠ¶æ€é€»è¾‘
3. **[æ€§èƒ½ä¼˜åŒ–](../performance/optimization)** - æå‡åº”ç”¨æ€§èƒ½

---

## 12. å»¶ä¼¸é˜…è¯»

### å®˜æ–¹èµ„æº

- [è¡¨å•](https://react.dev/learn/forms) - Reactå®˜æ–¹è¡¨å•æ–‡æ¡£
- [å—æ§ç»„ä»¶](https://react.dev/reference/react/Component#specifying-lifecycle-methods) - å—æ§ç»„ä»¶æŒ‡å—
- [useRef](https://react.dev/reference/react/useRef) - Ref APIæ–‡æ¡£

### æ¨èåº“

- [React Hook Form](https://react-hook-form.com/) - é«˜æ€§èƒ½è¡¨å•åº“
- [Formik](https://formik.org/) - æµè¡Œçš„è¡¨å•è§£å†³æ–¹æ¡ˆ
- [Yup](https://github.com/jquense/yup) - æ•°æ®éªŒè¯åº“

### å·¥å…·æ¨è

- [React Hook Form DevTools](https://react-hook-form.com/dev-tools) - è°ƒè¯•å·¥å…·

---

[â† ä¸Šä¸€ç« ï¼šåˆ—è¡¨æ¸²æŸ“ä¸Keys](lists-and-keys) | [åŸºç¡€å…¥é—¨å®Œæˆï¼ğŸ‰]
