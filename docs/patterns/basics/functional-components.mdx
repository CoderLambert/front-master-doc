# å‡½æ•°å¼ç»„ä»¶ - åŸºç¡€ä¸æœ€ä½³å®è·µ

import { Tabs, TabItem } from '@docusaurus/theme-common';

å‡½æ•°å¼ç»„ä»¶æ˜¯Reactä¸­æœ€åŸºç¡€ã€æœ€å¸¸ç”¨çš„ç»„ä»¶å½¢å¼ã€‚éšç€React Hooksçš„å¼•å…¥ï¼Œå‡½æ•°å¼ç»„ä»¶å·²ç»æˆä¸ºç°ä»£Reactå¼€å‘çš„ä¸»æµæ–¹å¼ã€‚åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨å‡½æ•°å¼ç»„ä»¶çš„å„ä¸ªæ–¹é¢ï¼Œä»åŸºç¡€è¯­æ³•åˆ°é«˜çº§æ¨¡å¼ã€‚

## æœ¬ç« å­¦ä¹ ç›®æ ‡

- æŒæ¡å‡½æ•°å¼ç»„ä»¶çš„åŸºæœ¬è¯­æ³•å’Œç»“æ„
- ç†è§£å‡½æ•°å¼ç»„ä»¶ä¸ç±»ç»„ä»¶çš„åŒºåˆ«
- å­¦ä¼šå‡½æ•°å¼ç»„ä»¶çš„æœ€ä½³å®è·µ
- æŒæ¡å‡½æ•°å¼ç»„ä»¶çš„å¸¸è§æ¨¡å¼å’Œè®¾è®¡åŸåˆ™
- ç†è§£å‡½æ•°å¼ç»„ä»¶çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§
- å­¦ä¼šç»„ç»‡å’Œç®¡ç†å‡½æ•°å¼ç»„ä»¶

---

## 1. ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç»„ä»¶ï¼Ÿ

å‡½æ•°å¼ç»„ä»¶æ˜¯Reactä¸­å®šä¹‰ç»„ä»¶çš„ä¸€ç§æ–¹å¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªè¿”å›JSXçš„JavaScriptå‡½æ•°ã€‚å‡½æ•°å¼ç»„ä»¶æ¥æ”¶propsä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›æè¿°UIçš„Reactå…ƒç´ ã€‚

<Box style={{ padding: '20px', background: '#e3f2fd', borderRadius: '8px', margin: '20px 0' }}>
  <h4 style={{ margin: 0, color: '#1976d2' }}>ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µ</h4>
  <p style={{ margin: '10px 0 0 0' }}>
    å‡½æ•°å¼ç»„ä»¶æ˜¯<strong>çº¯å‡½æ•°</strong>ï¼šç»™å®šç›¸åŒçš„propsï¼Œæ€»æ˜¯è¿”å›ç›¸åŒçš„JSXã€‚å®ƒä¸ç®¡ç†è‡ªå·±çš„çŠ¶æ€ï¼ˆé™¤éä½¿ç”¨Hooksï¼‰ï¼Œåªè´Ÿè´£UIçš„æ¸²æŸ“ã€‚
  </p>
</Box>

<LiveCode
  code={`
function FunctionalComponentDemo() {
  // æœ€ç®€å•çš„å‡½æ•°å¼ç»„ä»¶
  const Welcome = (props) => {
    return <h1>Hello, {props.name}</h1>;
  };

  // ä½¿ç”¨ES6ç®­å¤´å‡½æ•°çš„å‡½æ•°å¼ç»„ä»¶
  const WelcomeWithAge = (props) => {
    return <h2>Hello, {props.name}! You are {props.age} years old.</h2>;
  };

  // ç®€åŒ–çš„ç®­å¤´å‡½æ•°ï¼ˆå•è¡Œè¿”å›ï¼‰
  const Greeting = (props) => <p>Welcome to React, {props.message}!</p>;

  return (
    <div style={{ padding: '20px' }}>
      <Welcome name="Alice" />
      <WelcomeWithAge name="Bob" age={25} />
      <Greeting message="learning functional components" />
    </div>
  );
}
`}
  scope={{ React }}
/>

### 1.1 å‡½æ•°å¼ç»„ä»¶çš„å†å²

å‡½æ•°å¼ç»„ä»¶åœ¨Reactä¸­ç»å†äº†æ¼”å˜ï¼š

- **React 0.14+**ï¼šå¼•å…¥å‡½æ•°å¼ç»„ä»¶æ¦‚å¿µ
- **React 16.8+**ï¼šHooksä½¿å‡½æ•°å¼ç»„ä»¶æ”¯æŒçŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸ
- **React 18+**ï¼šå‡½æ•°å¼ç»„ä»¶æˆä¸ºä¸»æµæ¨èæ–¹å¼

### 1.2 ä¸ºä»€ä¹ˆé€‰æ‹©å‡½æ•°å¼ç»„ä»¶ï¼Ÿ

<Grid>

<div>
  <h4>ä¼˜ç‚¹</h4>
  <ul>
    <li>âœ… è¯­æ³•ç®€æ´ï¼Œæ˜“äºç†è§£</li>
    <li>âœ… æ€§èƒ½è¾ƒå¥½ï¼ˆæ²¡æœ‰ç±»å¼€é”€ï¼‰</li>
    <li>âœ… æ›´å®¹æ˜“æµ‹è¯•å’Œå¤ç”¨</li>
    <li>âœ… ç¬¦åˆå‡½æ•°å¼ç¼–ç¨‹æ€æƒ³</li>
    <li>âœ… Hooksæä¾›å®Œæ•´èƒ½åŠ›</li>
    <li>âœ… æ›´å¥½çš„Tree Shaking</li>
  </ul>
</div>

<div>
  <h4>ä½¿ç”¨åœºæ™¯</h4>
  <ul>
    <li>ğŸ“Œ å¤§éƒ¨åˆ†UIç»„ä»¶</li>
    <li>ğŸ“Œ å±•ç¤ºå‹ç»„ä»¶</li>
    <li>ğŸ“Œ è½»é‡çº§ç»„ä»¶</li>
    <li>ğŸ“Œ å®¹å™¨ç»„ä»¶</li>
    <li>ğŸ“Œ é«˜é˜¶ç»„ä»¶çš„å­ç»„ä»¶</li>
    <li>ğŸ“Œ æ‰€æœ‰éœ€è¦çŠ¶æ€çš„ç»„ä»¶</li>
  </ul>
</div>

</Grid>

---

## 2. å‡½æ•°å¼ç»„ä»¶åŸºç¡€è¯­æ³•

### 2.1 åŸºæœ¬ç»“æ„

<CodeBlock>

```jsx
// æ–¹å¼1ï¼šfunctionå…³é”®å­—
function Header(props) {
  return (
    <header className="header">
      <h1>{props.title}</h1>
      <nav>{props.children}</nav>
    </header>
  );
}

// æ–¹å¼2ï¼šç®­å¤´å‡½æ•°
const Header = (props) => {
  return (
    <header className="header">
      <h1>{props.title}</h1>
      <nav>{props.children}</nav>
    </header>
  );
};

// æ–¹å¼3ï¼šè§£æ„èµ‹å€¼
const Header = ({ title, children }) => {
  return (
    <header className="header">
      <h1>{title}</h1>
      <nav>{children}</nav>
    </header>
  );
};
```

</CodeBlock>

### 2.2 Propså¤„ç†

<LiveCode
  code={`
function PropsHandlingDemo() {
  // æœªè§£æ„ - éœ€è¦ä½¿ç”¨props.*
  const UserCardOld = (props) => {
    return (
      <div style={{
        border: '1px solid #ddd',
        padding: '10px',
        marginBottom: '10px',
        borderRadius: '5px'
      }}>
        <h3>âŒ æœªè§£æ„æ–¹å¼</h3>
        <p><strong>Name:</strong> {props.name}</p>
        <p><strong>Email:</strong> {props.email}</p>
      </div>
    );
  };

  // è§£æ„èµ‹å€¼ - æ›´ç®€æ´
  const UserCardNew = ({ avatar, name, email }) => {
    return (
      <div style={{
        border: '1px solid #4caf50',
        padding: '10px',
        marginBottom: '10px',
        borderRadius: '5px',
        background: '#e8f5e9'
      }}>
        <h3>âœ… è§£æ„èµ‹å€¼æ–¹å¼</h3>
        <p><strong>Name:</strong> {name}</p>
        <p><strong>Email:</strong> {email}</p>
      </div>
    );
  };

  // é»˜è®¤å€¼
  const UserCardWithDefault = ({ name, email, role = 'User' }) => {
    return (
      <div style={{
        border: '1px solid #2196f3',
        padding: '10px',
        marginBottom: '10px',
        borderRadius: '5px',
        background: '#e3f2fd'
      }}>
        <h3>ğŸ”° é»˜è®¤å€¼æ–¹å¼</h3>
        <p><strong>Name:</strong> {name}</p>
        <p><strong>Email:</strong> {email}</p>
        <p><strong>Role:</strong> {role}</p>
      </div>
    );
  };

  return (
    <div style={{ padding: '20px' }}>
      <UserCardOld name="John Doe" email="john@example.com" />
      <UserCardNew name="Jane Smith" email="jane@example.com" />
      <UserCardWithDefault name="Bob Wilson" email="bob@example.com" />
      <UserCardWithDefault name="Alice Brown" email="alice@example.com" role="Admin" />
    </div>
  );
}
`}
  scope={{ React }}
/>

### 2.3 æ¡ä»¶æ¸²æŸ“

<LiveCode
  code={`
function ConditionalRenderingDemo() {
  const [status, setStatus] = React.useState('success');
  const [isActive, setIsActive] = React.useState(true);
  const [showNotifications, setShowNotifications] = React.useState(true);
  const [notifications, setNotifications] = React.useState([
    { id: 1, message: 'Welcome to React!' },
    { id: 2, message: 'Components are awesome' },
    { id: 3, message: 'Keep learning!' }
  ]);

  // æ–¹å¼1ï¼šifè¯­å¥
  const StatusIndicator = ({ status }) => {
    if (status === 'loading') {
      return <div style={{ color: '#ff9800', fontWeight: 'bold' }}>â³ Loading...</div>;
    }
    if (status === 'error') {
      return <div style={{ color: '#f44336', fontWeight: 'bold' }}>âŒ Something went wrong</div>;
    }
    return <div style={{ color: '#4caf50', fontWeight: 'bold' }}>âœ… Success!</div>;
  };

  // æ–¹å¼2ï¼šä¸‰å…ƒè¿ç®—ç¬¦
  const StatusBadge = ({ isActive }) => (
    <span style={{
      padding: '5px 10px',
      borderRadius: '5px',
      background: isActive ? '#4caf50' : '#9e9e9e',
      color: 'white',
      fontWeight: 'bold'
    }}>
      {isActive ? 'ğŸŸ¢ Active' : 'âšª Inactive'}
    </span>
  );

  // æ–¹å¼3ï¼šé€»è¾‘ä¸è¿ç®—ç¬¦
  const NotificationList = ({ notifications, showNotifications }) => (
    <div>
      {showNotifications && notifications.length > 0 && (
        <ul style={{ background: '#f5f5f5', padding: '10px', borderRadius: '5px' }}>
          {notifications.map(notification => (
            <li key={notification.id} style={{ marginBottom: '5px' }}>
              {notification.message}
            </li>
          ))}
        </ul>
      )}
    </div>
  );

  return (
    <div style={{ padding: '20px' }}>
      <h3>ğŸ“Š Conditional Rendering Demo</h3>

      <div style={{ marginBottom: '20px', padding: '15px', border: '1px solid #ddd', borderRadius: '5px' }}>
        <h4>1. ifè¯­å¥æ–¹å¼</h4>
        <StatusIndicator status={status} />
        <div style={{ marginTop: '10px' }}>
          <button onClick={() => setStatus('success')} style={{ marginRight: '5px', padding: '5px 10px' }}>
            Set Success
          </button>
          <button onClick={() => setStatus('loading')} style={{ marginRight: '5px', padding: '5px 10px' }}>
            Set Loading
          </button>
          <button onClick={() => setStatus('error')} style={{ padding: '5px 10px' }}>
            Set Error
          </button>
        </div>
      </div>

      <div style={{ marginBottom: '20px', padding: '15px', border: '1px solid #ddd', borderRadius: '5px' }}>
        <h4>2. ä¸‰å…ƒè¿ç®—ç¬¦æ–¹å¼</h4>
        <StatusBadge isActive={isActive} />
        <div style={{ marginTop: '10px' }}>
          <button onClick={() => setIsActive(!isActive)} style={{ padding: '5px 10px' }}>
            Toggle Status
          </button>
        </div>
      </div>

      <div style={{ padding: '15px', border: '1px solid #ddd', borderRadius: '5px' }}>
        <h4>3. é€»è¾‘ä¸è¿ç®—ç¬¦æ–¹å¼</h4>
        <NotificationList notifications={notifications} showNotifications={showNotifications} />
        <div style={{ marginTop: '10px' }}>
          <button
            onClick={() => setShowNotifications(!showNotifications)}
            style={{ marginRight: '5px', padding: '5px 10px' }}
          >
            Toggle Notifications
          </button>
        </div>
      </div>
    </div>
  );
}
`}
  scope={{ React }}
/>

### 2.4 åˆ—è¡¨æ¸²æŸ“

<LiveCode
  code={`
function ListRenderingDemo() {
  const [todos, setTodos] = React.useState([
    { id: 1, text: 'Learn React', completed: true },
    { id: 2, text: 'Build an app', completed: false },
    { id: 3, text: 'Deploy to production', completed: false }
  ]);

  const [users, setUsers] = React.useState([
    { id: 1, name: 'Alice Johnson', email: 'alice@example.com', role: 'Admin' },
    { id: 2, name: 'Bob Smith', email: 'bob@example.com', role: 'User' },
    { id: 3, name: 'Charlie Brown', email: 'charlie@example.com', role: 'User' }
  ]);

  function TodoList({ todos }) {
    if (!todos || todos.length === 0) {
      return <p style={{ color: '#999' }}>No todos found</p>;
    }

    return (
      <ul style={{ listStyle: 'none', padding: 0 }}>
        {todos.map(todo => (
          <li
            key={todo.id}
            style={{
              padding: '10px',
              marginBottom: '5px',
              background: todo.completed ? '#e8f5e9' : '#fff',
              border: '1px solid #ddd',
              borderRadius: '5px',
              display: 'flex',
              alignItems: 'center'
            }}
          >
            <input
              type="checkbox"
              checked={todo.completed}
              onChange={() => {
                setTodos(todos.map(t =>
                  t.id === todo.id ? { ...t, completed: !t.completed } : t
                ));
              }}
              style={{ marginRight: '10px', width: '20px', height: '20px' }}
            />
            <span style={{
              textDecoration: todo.completed ? 'line-through' : 'none',
              color: todo.completed ? '#666' : '#333'
            }}>
              {todo.text}
            </span>
          </li>
        ))}
      </ul>
    );
  }

  function UserList({ users }) {
    if (!users || users.length === 0) {
      return <p style={{ color: '#999' }}>No users found</p>;
    }

    return (
      <div>
        {users.map(user => (
          <div
            key={user.id}
            style={{
              padding: '15px',
              marginBottom: '10px',
              background: '#f5f5f5',
              borderRadius: '5px',
              border: '1px solid #ddd'
            }}
          >
            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
              <div>
                <strong style={{ fontSize: '16px' }}>{user.name}</strong>
                <p style={{ margin: '5px 0 0 0', color: '#666', fontSize: '14px' }}>
                  {user.email}
                </p>
              </div>
              <span style={{
                padding: '5px 10px',
                background: user.role === 'Admin' ? '#2196f3' : '#9e9e9e',
                color: 'white',
                borderRadius: '5px',
                fontSize: '12px'
              }}>
                {user.role}
              </span>
            </div>
          </div>
        ))}
      </div>
    );
  }

  return (
    <div style={{ padding: '20px' }}>
      <h3>ğŸ“ List Rendering Demo</h3>

      <div style={{ marginBottom: '30px' }}>
        <h4>Todo List</h4>
        <TodoList todos={todos} />
        <div style={{ marginTop: '10px' }}>
          <button
            onClick={() => setTodos([...todos, {
              id: todos.length + 1,
              text: 'New task',
              completed: false
            }])}
            style={{ padding: '8px 15px', background: '#4caf50', color: 'white', border: 'none', borderRadius: '5px', cursor: 'pointer' }}
          >
            â• Add Todo
          </button>
        </div>
      </div>

      <div>
        <h4>User List</h4>
        <UserList users={users} />
      </div>
    </div>
  );
}
`}
  scope={{ React }}
/>

---

## 3. å‡½æ•°å¼ç»„ä»¶ vs ç±»ç»„ä»¶

### 3.1 è¯­æ³•å¯¹æ¯”

è®©æˆ‘ä»¬çœ‹çœ‹å‡½æ•°å¼ç»„ä»¶å’Œç±»ç»„ä»¶åœ¨å®ç°ç›¸åŒåŠŸèƒ½æ—¶çš„å¯¹æ¯”ï¼š

<LiveCode
  code={`
function FunctionalVsClassDemo() {
  const [activeTab, setActiveTab] = React.useState('functional');

  const CounterDisplay = ({ type }) => {
    if (type === 'functional') {
      return (
        <div style={{
          padding: '20px',
          background: '#e8f5e9',
          borderRadius: '8px',
          marginBottom: '15px'
        }}>
          <h4 style={{ margin: '0 0 10px 0', color: '#2e7d32' }}>âœ… å‡½æ•°å¼ç»„ä»¶</h4>
          <div style={{
            padding: '15px',
            background: 'white',
            borderRadius: '6px',
            fontFamily: 'monospace',
            fontSize: '14px',
            marginBottom: '10px'
          }}>
            <div style={{ marginBottom: '8px' }}>function Counter(&#123; initialCount = 0 &#125;) &#123;</div>
            <div style={{ marginLeft: '20px', marginBottom: '8px' }}>
              const [count, setCount] = useState(initialCount);
            </div>
            <div style={{ marginLeft: '20px', marginBottom: '8px' }}>
              const increment = () => setCount(prev => prev + 1);
            </div>
            <div style={{ marginLeft: '20px', marginBottom: '8px' }}>
              const decrement = () => setCount(prev => prev - 1);
            </div>
            <div style={{ marginLeft: '20px', marginBottom: '8px' }}>
              return (
                &lt;div className="counter"&gt;
            </div>
            <div style={{ marginLeft: '40px', marginBottom: '8px' }}>
              &lt;button onClick=&#123;decrement&#125;&gt;-&lt;/button&gt;
            </div>
            <div style={{ marginLeft: '40px', marginBottom: '8px' }}>
              &lt;span&gt;&#123;count&#125;&lt;/span&gt;
            </div>
            <div style={{ marginLeft: '40px', marginBottom: '8px' }}>
              &lt;button onClick=&#123;increment&#125;&gt;+&lt;/button&gt;
            </div>
            <div style={{ marginLeft: '20px' }}>
              &lt;/div&gt;
            </div>
            <div style={{ marginTop: '8px' }}>&#125;</div>
          </div>
          <div style={{
            padding: '15px',
            background: '#f5f5f5',
            borderRadius: '4px',
            textAlign: 'center'
          }}>
            <strong>ä¼˜åŠ¿ï¼š</strong> ç®€æ´ã€æ˜“è¯»ã€æ—  this ç»‘å®š
          </div>
        </div>
      );
    } else {
      return (
        <div style={{
          padding: '20px',
          background: '#fff3e0',
          borderRadius: '8px',
          marginBottom: '15px'
        }}>
          <h4 style={{ margin: '0 0 10px 0', color: '#e65100' }}>âš ï¸ ç±»ç»„ä»¶</h4>
          <div style={{
            padding: '15px',
            background: 'white',
            borderRadius: '6px',
            fontFamily: 'monospace',
            fontSize: '14px',
            marginBottom: '10px'
          }}>
            <div style={{ marginBottom: '8px' }}>class Counter extends React.Component &#123;</div>
            <div style={{ marginLeft: '20px', marginBottom: '8px' }}>
              constructor(props) &#123;
            </div>
            <div style={{ marginLeft: '40px', marginBottom: '8px' }}>
              super(props);
            </div>
            <div style={{ marginLeft: '40px', marginBottom: '8px' }}>
              this.state = &#123;
            </div>
            <div style={{ marginLeft: '60px', marginBottom: '8px' }}>
              count: props.initialCount || 0
            </div>
            <div style={{ marginLeft: '40px' }}>
              &#125;;
            </div>
            <div style={{ marginLeft: '20px', marginBottom: '8px' }}>
              &#125;
            </div>
            <div style={{ marginLeft: '20px', marginBottom: '8px' }}>
              increment = () => &#123;
            </div>
            <div style={{ marginLeft: '40px', marginBottom: '8px' }}>
              this.setState(prev => (&#123; count: prev.count + 1 &#125;));
            </div>
            <div style={{ marginLeft: '20px', marginBottom: '8px' }}>
              &#125;;
            </div>
            <div style={{ marginLeft: '20px', marginBottom: '8px' }}>
              render() &#123;
            </div>
            <div style={{ marginLeft: '40px', marginBottom: '8px' }}>
              return &lt;div&gt;...&lt;/div&gt;;
            </div>
            <div style={{ marginLeft: '20px' }}>
              &#125;
            </div>
            <div style={{ marginTop: '8px' }}>&#125;</div>
          </div>
          <div style={{
            padding: '15px',
            background: '#f5f5f5',
            borderRadius: '4px',
            textAlign: 'center'
          }}>
            <strong>åŠ£åŠ¿ï¼š</strong> ä»£ç å†—é•¿ã€éœ€è¦ç†è§£ this
          </div>
        </div>
      );
    }
  };

  return (
    <div style={{ padding: '20px' }}>
      <h3 style={{ marginTop: 0 }}>ğŸ”„ å‡½æ•°å¼ç»„ä»¶ vs ç±»ç»„ä»¶</h3>

      <div style={{
        display: 'flex',
        gap: '10px',
        marginBottom: '20px',
        background: '#f5f5f5',
        padding: '10px',
        borderRadius: '8px'
      }}>
        <button
          onClick={() => setActiveTab('functional')}
          style={{
            flex: 1,
            padding: '12px',
            border: 'none',
            borderRadius: '6px',
            cursor: 'pointer',
            fontWeight: 'bold',
            background: activeTab === 'functional' ? '#4caf50' : 'white',
            color: activeTab === 'functional' ? 'white' : '#333',
            transition: 'all 0.2s'
          }}
        >
          âœ… å‡½æ•°å¼ç»„ä»¶
        </button>
        <button
          onClick={() => setActiveTab('class')}
          style={{
            flex: 1,
            padding: '12px',
            border: 'none',
            borderRadius: '6px',
            cursor: 'pointer',
            fontWeight: 'bold',
            background: activeTab === 'class' ? '#ff9800' : 'white',
            color: activeTab === 'class' ? 'white' : '#333',
            transition: 'all 0.2s'
          }}
        >
          âš ï¸ ç±»ç»„ä»¶
        </button>
      </div>

      <CounterDisplay type={activeTab} />

      <div style={{
        padding: '20px',
        background: '#e3f2fd',
        borderRadius: '8px',
        marginTop: '20px'
      }}>
        <h4 style={{ margin: '0 0 10px 0', color: '#1565c0' }}>ğŸ’¡ æ€»ç»“</h4>
        <ul style={{ margin: '0', paddingLeft: '20px', lineHeight: '1.8' }}>
          <li>ç°ä»£Reactå¼€å‘<strong>æ¨èä½¿ç”¨å‡½æ•°å¼ç»„ä»¶</strong></li>
          <li>å‡½æ•°å¼ç»„ä»¶è¯­æ³•æ›´ç®€æ´ï¼Œä»£ç é‡æ›´å°‘</li>
          <li>æ— thisç»‘å®šé—®é¢˜ï¼Œå‡å°‘å¿ƒæ™ºè´Ÿæ‹…</li>
          <li>å€ŸåŠ©Hookså¯ä»¥å®Œå…¨æ›¿ä»£ç±»ç»„ä»¶çš„åŠŸèƒ½</li>
          <li>æ›´å¥½çš„Tree Shakingï¼Œä½“ç§¯æ›´å°</li>
        </ul>
      </div>
    </div>
  );
}
`}
  scope={{ React }}
/>

### 3.2 å…³é”®åŒºåˆ«

<CodeBlock>

```jsx
// å‡½æ•°å¼ç»„ä»¶ç‰¹ç‚¹
1. è¯­æ³•æ›´ç®€æ´ï¼Œæ²¡æœ‰thiså…³é”®å­—
2. ä½¿ç”¨Hooksæ›¿ä»£ç”Ÿå‘½å‘¨æœŸæ–¹æ³•
3. å¤©ç„¶æ”¯æŒTree Shaking
4. æ›´å®¹æ˜“æµ‹è¯•
5. æ›´å¥½çš„æ€§èƒ½ï¼ˆæ— ç±»å®ä¾‹å¼€é”€ï¼‰

// ç±»ç»„ä»¶ç‰¹ç‚¹
1. éœ€è¦ç†è§£thisç»‘å®š
2. ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•
3. ä»£ç é‡æ›´å¤š
4. éš¾ä»¥è¿›è¡ŒTree Shaking
5. æ€§èƒ½å¼€é”€ç•¥å¤§
```

</CodeBlock>

### 3.3 è¿ç§»æŒ‡å—

<CodeBlock>

```jsx
// å°†ç±»ç»„ä»¶è½¬æ¢ä¸ºå‡½æ•°å¼ç»„ä»¶

// æ­¥éª¤1ï¼šå°†classæ”¹ä¸ºfunction
class UserProfile extends React.Component {
  // â†“
function UserProfile() { }

// æ­¥éª¤2ï¼šç§»é™¤constructor
class UserProfile extends React.Component {
  constructor(props) {
    super(props);
    this.state = { user: null, loading: true };
  }
  // â†“
function UserProfile() {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);
}

// æ­¥éª¤3ï¼šç§»é™¤this.state
class UserProfile extends React.Component {
  // ...
  render() {
    return <div>{this.state.user.name}</div>;
  }
  // â†“
function UserProfile() {
  const [user, setUser] = useState(null);
  // ...
  return <div>{user.name}</div>;
}

// æ­¥éª¤4ï¼šå°†ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ›¿æ¢ä¸ºHooks
class UserProfile extends React.Component {
  componentDidMount() {
    fetchUser(this.props.userId).then(user => {
      this.setState({ user, loading: false });
    });
  }
  // â†“
function UserProfile({ userId }) {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetchUser(userId).then(user => {
      setUser(user);
      setLoading(false);
    });
  }, [userId]);
}
```

</CodeBlock>

---

## 4. å‡½æ•°å¼ç»„ä»¶è®¾è®¡åŸåˆ™

### 4.1 å•ä¸€èŒè´£åŸåˆ™

å•ä¸€èŒè´£åŸåˆ™æ˜¯å‡½æ•°å¼ç»„ä»¶è®¾è®¡çš„é‡è¦åŸåˆ™ã€‚è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®é™…ç¤ºä¾‹æ¥ç†è§£ï¼š

<LiveCode
  code={`
function SingleResponsibilityPrincipleDemo() {
  const [activeTab, setActiveTab] = React.useState('bad');
  const [mockUser, setMockUser] = React.useState({
    id: 1,
    name: 'John Doe',
    email: 'john@example.com',
    bio: 'Software developer'
  });

  const mockPosts = [
    { id: 1, title: 'My First Post', content: 'Hello World!' },
    { id: 2, title: 'React Tips', content: 'Use hooks wisely' }
  ];

  // æ¨¡æ‹ŸAPI
  const simulateAPI = (delay) => new Promise(resolve => {
    setTimeout(resolve, delay);
  });

  // Bad Example Component
  const BadUserProfile = () => {
    const [user, setUser] = React.useState(null);
    const [posts, setPosts] = React.useState([]);
    const [loading, setLoading] = React.useState(true);

    React.useEffect(() => {
      // æ¨¡æ‹Ÿï¼šæ—¢è·å–ç”¨æˆ·æ•°æ®åˆè·å–æ–‡ç« æ•°æ®
      Promise.all([
        simulateAPI(800).then(() => mockUser),
        simulateAPI(800).then(() => mockPosts)
      ]).then(([userData, postsData]) => {
        setUser(userData);
        setPosts(postsData);
        setLoading(false);
      });
    }, []);

    // æ—¢è´Ÿè´£æ•°æ®è·å–åˆè´Ÿè´£æ¸²æŸ“
    return (
      <div style={{
        padding: '15px',
        background: '#ffebee',
        borderRadius: '8px',
        border: '2px solid #ef5350'
      }}>
        <h4 style={{ margin: '0 0 10px 0', color: '#c62828' }}>
          âŒ åä¾‹ï¼šèŒè´£è¿‡å¤š
        </h4>
        {loading ? (
          <div style={{
            padding: '20px',
            textAlign: 'center',
            background: 'white',
            borderRadius: '6px'
          }}>
            åŠ è½½ä¸­...
          </div>
        ) : (
          <div style={{
            background: 'white',
            padding: '15px',
            borderRadius: '6px'
          }}>
            <p><strong>é—®é¢˜ï¼š</strong></p>
            <ul style={{ fontSize: '14px', lineHeight: '1.6' }}>
              <li>âš ï¸ ç»„ä»¶åŒæ—¶è´Ÿè´£æ•°æ®è·å–å’ŒUIæ¸²æŸ“</li>
              <li>âš ï¸ è·å–ç”¨æˆ·æ•°æ®å’Œæ–‡ç« æ•°æ®çš„é€»è¾‘æ··åˆ</li>
              <li>âš ï¸ éš¾ä»¥å¤ç”¨å’Œæµ‹è¯•</li>
              <li>âš ï¸ è¿åå•ä¸€èŒè´£åŸåˆ™</li>
            </ul>
          </div>
        )}
      </div>
    );
  };

  // Good Example Components
  const UserDataProvider = ({ userId, children }) => {
    const [user, setUser] = React.useState(null);
    const [posts, setPosts] = React.useState([]);
    const [loading, setLoading] = React.useState(true);

    React.useEffect(() => {
      Promise.all([
        simulateAPI(800).then(() => mockUser),
        simulateAPI(800).then(() => mockPosts)
      ]).then(([userData, postsData]) => {
        setUser(userData);
        setPosts(postsData);
        setLoading(false);
      });
    }, []);

    return (
      <div style={{
        padding: '15px',
        background: '#e8f5e9',
        borderRadius: '8px',
        border: '2px solid #66bb6a'
      }}>
        <h4 style={{ margin: '0 0 10px 0', color: '#2e7d32' }}>
          âœ… æ­£ä¾‹ï¼šèŒè´£åˆ†ç¦»
        </h4>
        {loading ? (
          <div style={{
            padding: '20px',
            textAlign: 'center',
            background: 'white',
            borderRadius: '6px'
          }}>
            åŠ è½½ä¸­...
          </div>
        ) : (
          <div>
            <div style={{
              background: 'white',
              padding: '15px',
              borderRadius: '6px',
              marginBottom: '10px'
            }}>
              <p><strong>UserDataProvider èŒè´£ï¼š</strong></p>
              <ul style={{ fontSize: '14px', lineHeight: '1.6' }}>
                <li>âœ… ä»…è´Ÿè´£æ•°æ®è·å–</li>
                <li>âœ… ç»Ÿä¸€ç®¡ç†ç”¨æˆ·å’Œæ–‡ç« æ•°æ®</li>
                <li>âœ… é€šè¿‡Contextå‘ä¸‹ä¼ é€’æ•°æ®</li>
              </ul>
            </div>
            <div style={{
              background: 'white',
              padding: '15px',
              borderRadius: '6px'
            }}>
              <p><strong>UIç»„ä»¶èŒè´£ï¼š</strong></p>
              <ul style={{ fontSize: '14px', lineHeight: '1.6' }}>
                <li>âœ… ä»…è´Ÿè´£UIæ¸²æŸ“</li>
                <li>âœ… å¯å¤ç”¨åˆ°å…¶ä»–åœ°æ–¹</li>
                <li>âœ… æ˜“äºæµ‹è¯•å’Œç»´æŠ¤</li>
              </ul>
            </div>
          </div>
        )}
      </div>
    );
  };

  return (
    <div style={{ padding: '20px' }}>
      <h3 style={{ marginTop: 0 }}>ğŸ“ å•ä¸€èŒè´£åŸåˆ™</h3>

      <div style={{
        display: 'flex',
        gap: '10px',
        marginBottom: '20px',
        background: '#f5f5f5',
        padding: '10px',
        borderRadius: '8px'
      }}>
        <button
          onClick={() => setActiveTab('bad')}
          style={{
            flex: 1,
            padding: '12px',
            border: 'none',
            borderRadius: '6px',
            cursor: 'pointer',
            fontWeight: 'bold',
            background: activeTab === 'bad' ? '#f44336' : 'white',
            color: activeTab === 'bad' ? 'white' : '#333',
            transition: 'all 0.2s'
          }}
        >
          âŒ åä¾‹ï¼šèŒè´£æ··åˆ
        </button>
        <button
          onClick={() => setActiveTab('good')}
          style={{
            flex: 1,
            padding: '12px',
            border: 'none',
            borderRadius: '6px',
            cursor: 'pointer',
            fontWeight: 'bold',
            background: activeTab === 'good' ? '#4caf50' : 'white',
            color: activeTab === 'good' ? 'white' : '#333',
            transition: 'all 0.2s'
          }}
        >
          âœ… æ­£ä¾‹ï¼šèŒè´£åˆ†ç¦»
        </button>
      </div>

      <div style={{ marginBottom: '20px' }}>
        {activeTab === 'bad' ? <BadUserProfile /> : <UserDataProvider userId={1} />}
      </div>

      <div style={{
        padding: '20px',
        background: '#e3f2fd',
        borderRadius: '8px'
      }}>
        <h4 style={{ margin: '0 0 10px 0', color: '#1565c0' }}>ğŸ’¡ æœ€ä½³å®è·µ</h4>
        <ul style={{ margin: '0', paddingLeft: '20px', lineHeight: '1.8' }}>
          <li><strong>ä¸€ä¸ªç»„ä»¶åªåšä¸€ä»¶äº‹</strong> - å¦‚æœç»„ä»¶å¤ªå¤æ‚ï¼Œæ‹†åˆ†æˆå¤šä¸ª</li>
          <li><strong>æ•°æ®è·å–ä¸æ¸²æŸ“åˆ†ç¦»</strong> - ä½¿ç”¨Provideræˆ–è‡ªå®šä¹‰Hook</li>
          <li><strong>é€»è¾‘ä¸UIåˆ†ç¦»</strong> - ä¸šåŠ¡é€»è¾‘æ”¾åœ¨è‡ªå®šä¹‰Hookä¸­</li>
          <li><strong>æé«˜å¤ç”¨æ€§</strong> - çº¯æ¸²æŸ“ç»„ä»¶å¯ä»¥åœ¨å¤šå¤„ä½¿ç”¨</li>
          <li><strong>ä¾¿äºæµ‹è¯•</strong> - èŒè´£å•ä¸€çš„ç»„ä»¶æ›´å®¹æ˜“ç¼–å†™å•å…ƒæµ‹è¯•</li>
        </ul>
      </div>
    </div>
  );
}
`}
  scope={{ React }}
/>

### 4.2 çº¯å‡½æ•°åŸåˆ™

<CodeBlock>

```jsx
// âœ… çº¯å‡½æ•° - ç»™å®šç›¸åŒpropsæ€»æ˜¯è¿”å›ç›¸åŒç»“æœ
function Button({ label, onClick, disabled }) {
  return (
    <button
      onClick={onClick}
      disabled={disabled}
      className={`btn ${disabled ? 'btn-disabled' : 'btn-primary'}`}
    >
      {label}
    </button>
  );
}

// âœ… çº¯å‡½æ•° - ä¸ä¿®æ”¹è¾“å…¥
function formatUserName(user) {
  if (!user || !user.firstName || !user.lastName) {
    return 'Unknown User';
  }
  // åˆ›å»ºæ–°å¯¹è±¡è€Œä¸ä¿®æ”¹åŸå¯¹è±¡
  return `${user.firstName} ${user.lastName}`;
}

// âŒ éçº¯å‡½æ•° - é¿å…
function formatUserName(user) {
  if (user) {
    user.formattedName = `${user.firstName} ${user.lastName}`; // ä¿®æ”¹åŸå¯¹è±¡ï¼
  }
  return user;
}
```

</CodeBlock>

### 4.3 ç»„åˆä¼˜äºç»§æ‰¿

<CodeBlock>

```jsx
// âœ… æ¨èï¼šä½¿ç”¨ç»„åˆ
function Card({ children, title }) {
  return (
    <div className="card">
      {title && <h3 className="card-title">{title}</h3>}
      <div className="card-content">
        {children}
      </div>
    </div>
  );
}

function UserCard({ user }) {
  return (
    <Card title="User Information">
      <p>Name: {user.name}</p>
      <p>Email: {user.email}</p>
    </Card>
  );
}

// âœ… æ¨èï¼šä½¿ç”¨props.children
function Modal({ isOpen, onClose, children }) {
  if (!isOpen) return null;

  return (
    <div className="modal-overlay" onClick={onClose}>
      <div className="modal-content" onClick={e => e.stopPropagation()}>
        <button className="modal-close" onClick={onClose}>Ã—</button>
        {children}
      </div>
    </div>
  );
}

function LoginModal({ isOpen, onClose }) {
  return (
    <Modal isOpen={isOpen} onClose={onClose}>
      <h2>Login</h2>
      <form>...</form>
    </Modal>
  );
}
```

</CodeBlock>

---

## 5. é«˜çº§å‡½æ•°å¼ç»„ä»¶æ¨¡å¼

### 5.1 çŠ¶æ€æå‡æ¨¡å¼

çŠ¶æ€æå‡æ˜¯Reactä¸­å…±äº«çŠ¶æ€çš„æ ‡å‡†æ¨¡å¼ã€‚å½“å¤šä¸ªç»„ä»¶éœ€è¦å…±äº«åŒä¸€ä¸ªçŠ¶æ€æ—¶ï¼Œå°†çŠ¶æ€æå‡åˆ°å®ƒä»¬çš„æœ€è¿‘å…±åŒçˆ¶ç»„ä»¶ã€‚

<LiveCode
  code={`
function TemperatureCalculator() {
  const [temperature, setTemperature] = React.useState('');
  const [scale, setScale] = React.useState('c');

  // æ¸©åº¦è½¬æ¢å‡½æ•°
  const toCelsius = (fahrenheit) => (fahrenheit - 32) * 5 / 9;
  const toFahrenheit = (celsius) => (celsius * 9 / 5) + 32;

  const tryConvert = (temperature, convert) => {
    const input = parseFloat(temperature);
    if (Number.isNaN(input)) return '';
    return (Math.round(convert(input) * 100) / 100).toString();
  };

  const celsius = scale === 'f' ? tryConvert(temperature, toCelsius) : temperature;
  const fahrenheit = scale === 'c' ? tryConvert(temperature, toFahrenheit) : temperature;

  const handleCelsiusChange = (value) => {
    setScale('c');
    setTemperature(value);
  };

  const handleFahrenheitChange = (value) => {
    setScale('f');
    setTemperature(value);
  };

  // åˆ¤æ–­æ˜¯å¦æ²¸è…¾
  const isBoiling = (temp, scale) => {
    const num = parseFloat(temp);
    if (Number.isNaN(num)) return false;
    return scale === 'c' ? num >= 100 : num >= 212;
  };

  return (
    <div style={{ padding: '20px', maxWidth: '600px' }}>
      <h3 style={{ marginTop: 0 }}>ğŸŒ¡ï¸ æ¸©åº¦è½¬æ¢å™¨</h3>

      <div style={{
        display: 'grid',
        gridTemplateColumns: '1fr 1fr',
        gap: '20px',
        marginBottom: '20px'
      }}>
        <TemperatureInput
          scale="c"
          temperature={celsius}
          onTemperatureChange={handleCelsiusChange}
          isBoiling={isBoiling(celsius, 'c')}
        />
        <TemperatureInput
          scale="f"
          temperature={fahrenheit}
          onTemperatureChange={handleFahrenheitChange}
          isBoiling={isBoiling(fahrenheit, 'f')}
        />
      </div>

      <div style={{
        padding: '20px',
        background: '#e3f2fd',
        borderRadius: '8px',
        border: '2px solid #2196f3'
      }}>
        <h4 style={{ margin: '0 0 15px 0', color: '#1565c0' }}>ğŸ“Š å½“å‰çŠ¶æ€</h4>
        <div style={{ fontSize: '16px', lineHeight: '1.8' }}>
          <p><strong>æ‘„æ°æ¸©åº¦ï¼š</strong> {celsius || 'N/A'}Â°C</p>
          <p><strong>åæ°æ¸©åº¦ï¼š</strong> {fahrenheit || 'N/A'}Â°F</p>
          <p><strong>æ´»è·ƒæ¸©åº¦è®¡ï¼š</strong> {scale === 'c' ? 'æ‘„æ°åº¦' : 'åæ°åº¦'}</p>
          <p><strong>è¾“å…¥å€¼ï¼š</strong> {temperature || 'N/A'}</p>
        </div>
      </div>

      <div style={{
        marginTop: '20px',
        padding: '15px',
        background: '#f5f5f5',
        borderRadius: '8px',
        fontSize: '14px'
      }}>
        <h4 style={{ margin: '0 0 10px 0' }}>ğŸ’¡ çŠ¶æ€æå‡åŸç†</h4>
        <ul style={{ margin: '0', paddingLeft: '20px', lineHeight: '1.6' }}>
          <li>å…±äº«çŠ¶æ€ï¼ˆ<code>temperature</code>ï¼‰æå‡åˆ°çˆ¶ç»„ä»¶</li>
          <li>çˆ¶ç»„ä»¶é€šè¿‡propså°†çŠ¶æ€å’Œå›è°ƒå‡½æ•°ä¼ é€’ç»™å­ç»„ä»¶</li>
          <li>å­ç»„ä»¶ä»…è´Ÿè´£UIæ¸²æŸ“å’Œè§¦å‘äº‹ä»¶</li>
          <li>ä»»ä½•ç»„ä»¶éƒ½ä¸èƒ½ç›´æ¥ä¿®æ”¹å…±äº«çŠ¶æ€ï¼Œåªèƒ½é€šè¿‡å›è°ƒå‡½æ•°</li>
        </ul>
      </div>
    </div>
  );
}

function TemperatureInput({ scale, temperature, onTemperatureChange, isBoiling }) {
  const handleChange = (e) => {
    onTemperatureChange(e.target.value);
  };

  const scaleName = scale === 'c' ? 'Celsius' : 'Fahrenheit';
  const scaleColor = scale === 'c' ? '#2196f3' : '#ff9800';

  return (
    <div style={{
      padding: '20px',
      background: 'white',
      borderRadius: '8px',
      border: \`3px solid ${scaleColor}\`,
      boxShadow: '0 2px 8px rgba(0,0,0,0.1)'
    }}>
      <div style={{
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        marginBottom: '15px'
      }}>
        <h4 style={{ margin: 0, color: scaleColor }}>
          {scale === 'c' ? 'ğŸŒ¡ï¸' : 'â„‰'} {scaleName}
        </h4>
        {isBoiling && (
          <span style={{
            padding: '4px 12px',
            background: '#f44336',
            color: 'white',
            borderRadius: '12px',
            fontSize: '12px',
            fontWeight: 'bold'
          }}>
            æ²¸è…¾ï¼
          </span>
        )}
      </div>

      <div style={{ position: 'relative' }}>
        <input
          type="text"
          value={temperature}
          onChange={handleChange}
          placeholder={\`è¾“å…¥${scaleName}æ¸©åº¦\`}
          style={{
            width: '100%',
            padding: '12px',
            fontSize: '18px',
            border: \`2px solid ${scaleColor}\`,
            borderRadius: '6px',
            boxSizing: 'border-box',
            outline: 'none',
            transition: 'border-color 0.2s'
          }}
        />
        <span style={{
          position: 'absolute',
          right: '12px',
          top: '50%',
          transform: 'translateY(-50%)',
          fontSize: '18px',
          fontWeight: 'bold',
          color: scaleColor
        }}>
          Â°{scale.toUpperCase()}
        </span>
      </div>

      {temperature && isBoiling && (
        <div style={{
          marginTop: '10px',
          padding: '8px',
          background: '#ffebee',
          color: '#c62828',
          borderRadius: '4px',
          fontSize: '14px',
          textAlign: 'center'
        }}>
          ğŸ’§ æ°´åœ¨ {temperature}Â°{scale.toUpperCase()} ä¼šæ²¸è…¾ï¼
        </div>
      )}
    </div>
  );
}
`}
  scope={{ React }}
/>

### 5.2 Render Propsæ¨¡å¼

<CodeBlock>

```jsx
// ä½¿ç”¨render propså…±äº«é€»è¾‘
function DataProvider({ render }) {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    fetchData()
      .then(setData)
      .catch(setError)
      .finally(() => setLoading(false));
  }, []);

  return render({ data, loading, error });
}

// ä½¿ç”¨
function UserList() {
  return (
    <DataProvider
      render={({ data, loading, error }) => {
        if (loading) return <div>Loading...</div>;
        if (error) return <div>Error: {error.message}</div>;
        return (
          <ul>
            {data.map(user => <li key={user.id}>{user.name}</li>)}
          </ul>
        );
      }}
    />
  );
}
```

</CodeBlock>

### 5.3 ç»„åˆç»„ä»¶æ¨¡å¼

<CodeBlock>

```jsx
// åˆ›å»ºç»„ä»¶ç»„åˆ
function Select({ children, value, onChange }) {
  return (
    <div className="select">
      {Children.map(children, child =>
        cloneElement(child, { value, onChange })
      )}
    </div>
  );
}

function SelectOption({ value, children, value: currentValue, onChange }) {
  const isSelected = value === currentValue;

  return (
    <div
      className={`select-option ${isSelected ? 'selected' : ''}`}
      onClick={() => onChange(value)}
    >
      {children}
    </div>
  );
}

// ä½¿ç”¨
function CountrySelector() {
  const [country, setCountry] = useState('us');

  return (
    <Select value={country} onChange={setCountry}>
      <SelectOption value="us">United States</SelectOption>
      <SelectOption value="uk">United Kingdom</SelectOption>
      <SelectOption value="cn">China</SelectOption>
    </Select>
  );
}
```

</CodeBlock>

---

## 6. æ€§èƒ½ä¼˜åŒ–

### 6.1 React.memoä¼˜åŒ–

<CodeBlock>

```jsx
// åŸºç¡€ä½¿ç”¨
const UserCard = React.memo(({ user }) => {
  return (
    <div className="user-card">
      <h3>{user.name}</h3>
      <p>{user.email}</p>
    </div>
  );
});

// è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°
const UserCard = React.memo(
  ({ user, onEdit }) => {
    return (
      <div className="user-card">
        <h3>{user.name}</h3>
        <p>{user.email}</p>
        <button onClick={() => onEdit(user.id)}>Edit</button>
      </div>
    );
  },
  (prevProps, nextProps) => {
    // è‡ªå®šä¹‰æ¯”è¾ƒé€»è¾‘
    return (
      prevProps.user.id === nextProps.user.id &&
      prevProps.user.name === nextProps.user.name &&
      prevProps.onEdit === nextProps.onEdit
    );
  }
);

// é”™è¯¯ç¤ºä¾‹ - ä¸è¦åœ¨memoå‡½æ•°ä¸­åˆ›å»ºå¯¹è±¡
const UserList = ({ users }) => {
  return (
    <div>
      {users.map(user => (
        <UserCard
          key={user.id}
          user={user}
          onEdit={() => console.log('Edit', user.id)} // æ¯æ¬¡æ¸²æŸ“éƒ½æ˜¯æ–°å‡½æ•°
        />
      ))}
    </div>
  );
};

// æ­£ç¡®ç¤ºä¾‹ - ä½¿ç”¨useCallback
const UserList = ({ users }) => {
  const handleEdit = useCallback((id) => {
    console.log('Edit', id);
  }, []);

  return (
    <div>
      {users.map(user => (
        <UserCard
          key={user.id}
          user={user}
          onEdit={handleEdit}
        />
      ))}
    </div>
  );
};
```

</CodeBlock>

### 6.2 useCallbackä¼˜åŒ–

<CodeBlock>

```jsx
// é¿å…å­ç»„ä»¶ä¸å¿…è¦æ¸²æŸ“
function ParentComponent() {
  const [count, setCount] = useState(0);
  const [value, setValue] = useState('');

  // ç¼“å­˜å‡½æ•°ï¼Œé¿å…æ¯æ¬¡æ¸²æŸ“åˆ›å»ºæ–°å‡½æ•°
  const handleClick = useCallback(() => {
    console.log('Button clicked', count);
  }, [count]);

  const handleInputChange = useCallback((e) => {
    setValue(e.target.value);
  }, []);

  return (
    <div>
      <button onClick={handleClick}>Click me</button>
      <input value={value} onChange={handleInputChange} />
    </div>
  );
}

// ä¸React.memoç»“åˆä½¿ç”¨
const ExpensiveChild = React.memo(({ onAction }) => {
  console.log('ExpensiveChild rendered');
  return <button onClick={onAction}>Action</button>;
});

function Parent() {
  const [count, setCount] = useState(0);

  const handleAction = useCallback(() => {
    console.log('Action performed', count);
  }, [count]);

  return (
    <div>
      <ExpensiveChild onAction={handleAction} />
      <button onClick={() => setCount(c => c + 1)}>
        Count: {count}
      </button>
    </div>
  );
}
```

</CodeBlock>

---

## 7. ç»„ä»¶ç»„ç»‡ä¸å‘½å

### 7.1 æ–‡ä»¶ç»„ç»‡

<CodeBlock>

```jsx
// æ¨èçš„æ–‡ä»¶ç»„ç»‡æ–¹å¼

// 1. å•ä¸€èŒè´£ï¼Œæ¯ä¸ªæ–‡ä»¶ä¸€ä¸ªç»„ä»¶
// UserCard/index.jsx
export default function UserCard({ user }) {
  return <div>{user.name}</div>;
}

// 2. ç›¸å…³çš„ç»„ä»¶æ”¾åœ¨åŒä¸€ç›®å½•
// components/
//   â”œâ”€â”€ Button/
//   â”‚   â”œâ”€â”€ index.jsx
//   â”‚   â”œâ”€â”€ Button.jsx
//   â”‚   â””â”€â”€ Button.test.jsx
//   â””â”€â”€ Modal/
//       â”œâ”€â”€ index.jsx
//       â”œâ”€â”€ Modal.jsx
//       â”œâ”€â”€ ModalHeader.jsx
//       â”œâ”€â”€ ModalBody.jsx
//       â””â”€â”€ ModalFooter.jsx

// 3. ä½¿ç”¨index.jsä½œä¸ºå…¥å£
// components/Button/index.js
export { default } from './Button';
export * from './Button';

// 4. å¯¼å‡ºå¤šä¸ªç›¸å…³ç»„ä»¶
// components/Button/Button.jsx
export const PrimaryButton = ({ children, ...props }) => (
  <button className="btn btn-primary" {...props}>
    {children}
  </button>
);

export const SecondaryButton = ({ children, ...props }) => (
  <button className="btn btn-secondary" {...props}>
    {children}
  </button>
);
```

</CodeBlock>

### 7.2 å‘½åçº¦å®š

<CodeBlock>

```jsx
// âœ… å¥½çš„å‘½å

// 1. ç»„ä»¶åä½¿ç”¨PascalCase
function UserProfile() { }      // âœ…
function userProfile() { }      // âŒ

// 2. æ–‡ä»¶åä¸ç»„ä»¶åä¸€è‡´
// UserProfile.jsx
export default function UserProfile() { }

// 3. æè¿°æ€§çš„åå­—
function TemperatureConverter() { }  // âœ… æ¸…æ¥šè¡¨è¾¾äº†ç”¨é€”
function Temp() { }                  // âŒ å¤ªç®€çŸ­

// 4. ä½¿ç”¨åè¯æˆ–å½¢å®¹è¯
function Button() { }           // âœ… åè¯
function LoadingSpinner() { }   // âœ… å½¢å®¹è¯+åè¯
function IsLoggedIn() { }       // âœ… æè¿°çŠ¶æ€

// 5. é¿å…ä¸è‡ªç„¶çš„ç¼©å†™
function UserProfilePage() { }  // âœ…
function UserProf() { }         // âŒ

// 6. å¸ƒå°”å€¼propsä»¥isã€hasã€canå¼€å¤´
<Modal isOpen={true} hasCloseButton={true} canClose={true} />
```

</CodeBlock>

---

## 8. å®è·µç»ƒä¹ 

### ç»ƒä¹ 1ï¼šç”¨æˆ·å¡ç‰‡ç»„ä»¶

åˆ›å»ºä¸€ä¸ªå¯å¤ç”¨çš„ç”¨æˆ·å¡ç‰‡ç»„ä»¶ï¼Œæ”¯æŒä¸åŒç”¨æˆ·è§’è‰²ã€‚

<Expandable title="ç‚¹å‡»æŸ¥çœ‹è¦æ±‚">

**åŠŸèƒ½è¦æ±‚**ï¼š
- æ¥æ”¶ç”¨æˆ·ä¿¡æ¯ï¼šname, email, avatar, role
- æ ¹æ®è§’è‰²æ˜¾ç¤ºä¸åŒé¢œè‰²å¾½ç« 
- æ”¯æŒå¯é€‰çš„é¢å¤–ä¿¡æ¯ï¼ˆbio, location, websiteï¼‰
- ä½¿ç”¨React.memoä¼˜åŒ–

**è®¾è®¡è¦æ±‚**ï¼š
- å¤´åƒä½¿ç”¨é»˜è®¤å€¼å ä½ç¬¦
- è§’è‰²å¾½ç« é¢œè‰²ï¼šAdmin(çº¢è‰²)ã€User(è“è‰²)ã€Guest(ç°è‰²)
- å“åº”å¼å¸ƒå±€
- æ‚¬åœæ•ˆæœ

**æç¤º**ï¼š
- ä½¿ç”¨è§£æ„èµ‹å€¼æ¥æ”¶props
- ä½¿ç”¨é»˜è®¤å‚æ•°è®¾ç½®é»˜è®¤å€¼
- ä½¿ç”¨CSSæ¨¡å—æˆ–Styled Components

</Expandable>

### ç»ƒä¹ 2ï¼šè¯„è®ºç³»ç»Ÿ

åˆ›å»ºä¸€ä¸ªåµŒå¥—è¯„è®ºç»„ä»¶ç³»ç»Ÿã€‚

<Expandable title="ç‚¹å‡»æŸ¥çœ‹è¦æ±‚">

**åŠŸèƒ½è¦æ±‚**ï¼š
- æ”¯æŒå¤šçº§åµŒå¥—è¯„è®º
- æ¯æ¡è¯„è®ºåŒ…å«ï¼šä½œè€…ã€å¤´åƒã€æ—¶é—´ã€å†…å®¹ã€å›å¤æŒ‰é’®
- é€’å½’æ¸²æŸ“å­è¯„è®º
- è¯„è®ºæ•°é‡ç»Ÿè®¡

**è®¾è®¡è¦æ±‚**ï¼š
- ä½¿ç”¨ç»„åˆæ¨¡å¼
- æœ€å¤šæ˜¾ç¤º3çº§åµŒå¥—
- è¶…è¿‡3çº§çš„å­è¯„è®ºæ˜¾ç¤º"è¿˜æœ‰Xæ¡å›å¤"
- ç‚¹å‡»"æ˜¾ç¤ºæ›´å¤š"å±•å¼€

**æç¤º**ï¼š
- ä½¿ç”¨mapé€’å½’æ¸²æŸ“
- æ§åˆ¶é€’å½’æ·±åº¦
- æ¡ä»¶æ¸²æŸ“

</Expandable>

### ç»ƒä¹ 3ï¼šè¡¨å•ç”Ÿæˆå™¨

åˆ›å»ºä¸€ä¸ªåŠ¨æ€è¡¨å•ç»„ä»¶ã€‚

<Expandable title="ç‚¹å‡»æŸ¥çœ‹è¦æ±‚">

**åŠŸèƒ½è¦æ±‚**ï¼š
- æ”¯æŒå¤šç§è¾“å…¥ç±»å‹ï¼štext, email, password, select, checkbox
- å®æ—¶éªŒè¯å’Œé”™è¯¯æç¤º
- è¡¨å•å­—æ®µé…ç½®åŒ–

**æ•°æ®ç»“æ„**ï¼š
```javascript
const formConfig = [
  { type: 'text', name: 'username', label: 'Username', required: true },
  { type: 'email', name: 'email', label: 'Email', required: true },
  { type: 'select', name: 'country', label: 'Country', options: [...] },
  { type: 'checkbox', name: 'accept', label: 'Accept Terms', required: true }
];
```

**æç¤º**ï¼š
- ä½¿ç”¨switchæˆ–å¯¹è±¡æ˜ å°„æ¸²æŸ“ä¸åŒè¾“å…¥ç±»å‹
- åŠ¨æ€åˆ›å»ºè¡¨å•å­—æ®µ
- çŠ¶æ€æå‡æ¨¡å¼ç®¡ç†è¡¨å•æ•°æ®

</Expandable>

### ç»ƒä¹ 4ï¼šè™šæ‹Ÿåˆ—è¡¨

åˆ›å»ºä¸€ä¸ªé«˜æ€§èƒ½çš„è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨ç»„ä»¶ã€‚

<Expandable title="ç‚¹å‡»æŸ¥çœ‹è¦æ±‚">

**åŠŸèƒ½è¦æ±‚**ï¼š
- åªæ¸²æŸ“å¯è§åŒºåŸŸçš„åˆ—è¡¨é¡¹
- æ”¯æŒ10000+æ¡æ•°æ®
- å¹³æ»‘æ»šåŠ¨ä½“éªŒ
- å¯é…ç½®é¡¹é«˜åº¦

**å®ç°è¦ç‚¹**ï¼š
- è®¡ç®—å¯è§é¡¹èŒƒå›´
- åŠ¨æ€è®¡ç®—å®¹å™¨é«˜åº¦
- ä½¿ç”¨translateYä¼˜åŒ–æ¸²æŸ“
- ä½¿ç”¨useMemoç¼“å­˜è®¡ç®—ç»“æœ

**æç¤º**ï¼š
- ç›‘å¬æ»šåŠ¨äº‹ä»¶
- è®¡ç®—scrollTop
- ä½¿ç”¨Math.floorå’ŒMath.ceilç¡®å®šèŒƒå›´

</Expandable>

---

## 9. å¸¸è§é”™è¯¯

### é”™è¯¯1ï¼šå¿˜è®°æ·»åŠ keyå±æ€§

<ErrorBox>

```jsx
// âŒ é”™è¯¯
function UserList({ users }) {
  return (
    <ul>
      {users.map(user => (
        <li>{user.name}</li>  // ç¼ºå°‘key
      ))}
    </ul>
  );
}

// âœ… æ­£ç¡®
function UserList({ users }) {
  return (
    <ul>
      {users.map(user => (
        <li key={user.id}>{user.name}</li>  // æ·»åŠ key
      ))}
    </ul>
  );
}
```

</ErrorBox>

### é”™è¯¯2ï¼šåœ¨ç»„ä»¶å†…éƒ¨å®šä¹‰å‡½æ•°

<ErrorBox>

```jsx
// âŒ ä¸å¥½ - æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°å‡½æ•°
function ParentComponent() {
  return (
    <ChildComponent
      onClick={() => console.log('clicked')}  // æ–°å‡½æ•°ï¼
    />
  );
}

// âœ… æ­£ç¡® - ä½¿ç”¨useCallbackç¼“å­˜
function ParentComponent() {
  const handleClick = useCallback(() => {
    console.log('clicked');
  }, []);

  return (
    <ChildComponent onClick={handleClick} />
  );
}
```

</ErrorBox>

### é”™è¯¯3ï¼šç›´æ¥ä¿®æ”¹props

<ErrorBox>

```jsx
// âŒ é”™è¯¯ - ä¸è¦ä¿®æ”¹props
function Button(props) {
  props.disabled = true;  // ç»å¯¹ä¸è¦è¿™æ ·åšï¼
  return <button {...props}>Click</button>;
}

// âœ… æ­£ç¡® - åˆ›å»ºæ–°å¯¹è±¡
function Button({ disabled, ...otherProps }) {
  const isDisabled = disabled || isLoading;
  return <button disabled={isDisabled} {...otherProps}>Click</button>;
}
```

</ErrorBox>

### é”™è¯¯4ï¼šé”™è¯¯çš„é»˜è®¤å€¼

<ErrorBox>

```jsx
// âŒ é”™è¯¯ - ç›´æ¥ä¿®æ”¹props
function UserCard(props) {
  const user = props.user || {};  // é¿å…ç›´æ¥ä¿®æ”¹
  return <div>{user.name}</div>;
}

// âœ… æ­£ç¡® - ä½¿ç”¨é»˜è®¤å€¼
function UserCard({ user = {} }) {
  return <div>{user.name}</div>;
}

// æˆ–è€…æ›´å®‰å…¨
function UserCard({ user }) {
  if (!user) return null;
  return <div>{user.name}</div>;
}
```

</ErrorBox>

### é”™è¯¯5ï¼šå¿˜è®°å¤„ç†ç©ºçŠ¶æ€

<ErrorBox>

```jsx
// âŒ é”™è¯¯ - æ²¡æœ‰å¤„ç†ç©ºçŠ¶æ€
function UserList({ users }) {
  return (
    <ul>
      {users.map(user => (
        <li key={user.id}>{user.name}</li>
      ))}
    </ul>
  );
}

// âœ… æ­£ç¡® - å¤„ç†ç©ºçŠ¶æ€
function UserList({ users }) {
  if (!users || users.length === 0) {
    return <p>No users found</p>;
  }

  return (
    <ul>
      {users.map(user => (
        <li key={user.id}>{user.name}</li>
      ))}
    </ul>
  );
}
```

</ErrorBox>

---

## 10. æœ¬ç« å°ç»“

### å…³é”®è¦ç‚¹

<Checklist>

- âœ… å‡½æ•°å¼ç»„ä»¶æ˜¯è¿”å›JSXçš„JavaScriptå‡½æ•°
- âœ… ä¼˜å…ˆä½¿ç”¨è§£æ„èµ‹å€¼å¤„ç†props
- âœ… ä¿æŒå‡½æ•°å¼ç»„ä»¶çš„çº¯å‡½æ•°ç‰¹æ€§
- âœ… éµå¾ªå•ä¸€èŒè´£åŸåˆ™
- âœ… ä½¿ç”¨React.memoä¼˜åŒ–æ€§èƒ½
- âœ… ä½¿ç”¨useCallbackç¼“å­˜å‡½æ•°
- âœ… ç»„ä»¶å‘½åä½¿ç”¨PascalCase
- âœ… æ€»æ˜¯ä¸ºåˆ—è¡¨é¡¹æ·»åŠ keyå±æ€§
- âœ… æ­£ç¡®å¤„ç†ç©ºçŠ¶æ€å’Œé”™è¯¯çŠ¶æ€
- âœ… é¿å…åœ¨ç»„ä»¶å†…éƒ¨åˆ›å»ºå¯¹è±¡æˆ–å‡½æ•°

</Checklist>

### æœ€ä½³å®è·µ

<BestPractices>

1. **ä¿æŒç®€å•** - å‡½æ•°å¼ç»„ä»¶åº”è¯¥ä¸“æ³¨äºæ¸²æŸ“UI
2. **å•ä¸€èŒè´£** - æ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
3. **çº¯å‡½æ•°** - ç»™å®šç›¸åŒè¾“å…¥ï¼Œæ€»æ˜¯è¿”å›ç›¸åŒè¾“å‡º
4. **è§£æ„props** - ä½¿ç”¨è§£æ„èµ‹å€¼è®©ä»£ç æ›´æ¸…æ™°
5. **åˆç†æ‹†åˆ†** - å°†å¤æ‚ç»„ä»¶æ‹†åˆ†ä¸ºå¤šä¸ªå°ç»„ä»¶
6. **å‘½åæ¸…æ™°** - ä½¿ç”¨æè¿°æ€§çš„ç»„ä»¶åå’Œpropså
7. **æ€§èƒ½ä¼˜åŒ–** - åˆç†ä½¿ç”¨React.memoå’ŒuseCallback
8. **æµ‹è¯•è¦†ç›–** - ä¸ºç»„ä»¶ç¼–å†™å•å…ƒæµ‹è¯•

</BestPractices>

### ä¸‹ä¸€æ­¥å­¦ä¹ 

ç°åœ¨ä½ å·²ç»æŒæ¡äº†å‡½æ•°å¼ç»„ä»¶çš„åŸºç¡€ï¼Œæ¥ä¸‹æ¥å¯ä»¥å­¦ä¹ ï¼š

1. **[é«˜é˜¶ç»„ä»¶](higher-order-components)** - å­¦ä¹ å¦‚ä½•åˆ›å»ºå¯å¤ç”¨çš„ç»„ä»¶é€»è¾‘
2. **[æ¸²æŸ“å±æ€§æ¨¡å¼](render-props)** - ç†è§£render propsæ¨¡å¼
3. **[å¤åˆç»„ä»¶](compound-components)** - æŒæ¡ç»„ä»¶ç»„åˆçš„é«˜çº§æŠ€å·§
4. **[å®¹å™¨-å±•ç¤ºæ¨¡å¼](container-presentational)** - å­¦ä¹ çŠ¶æ€ç®¡ç†æœ€ä½³å®è·µ

---

## 11. å»¶ä¼¸é˜…è¯»

### å®˜æ–¹èµ„æº

- [å‡½æ•°å¼ç»„ä»¶ä¸çŠ¶æ€](https://react.dev/reference/react) - Reactå®˜æ–¹Hooksæ–‡æ¡£
- [ç»„ä»¶å’ŒProps](https://react.dev/learn/components-and-props) - ç»„ä»¶è®¾è®¡æŒ‡å—
- [æ€§èƒ½ä¼˜åŒ–](https://react.dev/learn/render-and-commit) - Reactæ€§èƒ½ä¼˜åŒ–

### æ¨èé˜…è¯»

- [å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³](https://en.wikipedia.org/wiki/Functional_programming) - å‡½æ•°å¼ç¼–ç¨‹åŸºç¡€
- [ç»„åˆæ¨¡å¼](https://en.wikipedia.org/wiki/Composite_pattern) - è®¾è®¡æ¨¡å¼
- [Reactç»„ä»¶æ¨¡å¼](https://kentcdodds.com/blog/application-state-management-with-react) - ç»„ä»¶çŠ¶æ€ç®¡ç†

---

[â† ä¸Šä¸€ç« ï¼šè‡ªå®šä¹‰Hooks](../hooks/advanced/custom-hooks) | [ä¸‹ä¸€ç« ï¼šé«˜é˜¶ç»„ä»¶ â†’](higher-order-components)
