# å‡½æ•°å¼ç»„ä»¶ - åŸºç¡€ä¸æœ€ä½³å®è·µ

import { Tabs, TabItem } from '@docusaurus/theme-common';

å‡½æ•°å¼ç»„ä»¶æ˜¯Reactä¸­æœ€åŸºç¡€ã€æœ€å¸¸ç”¨çš„ç»„ä»¶å½¢å¼ã€‚éšç€React Hooksçš„å¼•å…¥ï¼Œå‡½æ•°å¼ç»„ä»¶å·²ç»æˆä¸ºç°ä»£Reactå¼€å‘çš„ä¸»æµæ–¹å¼ã€‚åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨å‡½æ•°å¼ç»„ä»¶çš„å„ä¸ªæ–¹é¢ï¼Œä»åŸºç¡€è¯­æ³•åˆ°é«˜çº§æ¨¡å¼ã€‚

## æœ¬ç« å­¦ä¹ ç›®æ ‡

- æŒæ¡å‡½æ•°å¼ç»„ä»¶çš„åŸºæœ¬è¯­æ³•å’Œç»“æ„
- ç†è§£å‡½æ•°å¼ç»„ä»¶ä¸ç±»ç»„ä»¶çš„åŒºåˆ«
- å­¦ä¼šå‡½æ•°å¼ç»„ä»¶çš„æœ€ä½³å®è·µ
- æŒæ¡å‡½æ•°å¼ç»„ä»¶çš„å¸¸è§æ¨¡å¼å’Œè®¾è®¡åŸåˆ™
- ç†è§£å‡½æ•°å¼ç»„ä»¶çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§
- å­¦ä¼šç»„ç»‡å’Œç®¡ç†å‡½æ•°å¼ç»„ä»¶

---

## 1. ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç»„ä»¶ï¼Ÿ

å‡½æ•°å¼ç»„ä»¶æ˜¯Reactä¸­å®šä¹‰ç»„ä»¶çš„ä¸€ç§æ–¹å¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªè¿”å›JSXçš„JavaScriptå‡½æ•°ã€‚å‡½æ•°å¼ç»„ä»¶æ¥æ”¶propsä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›æè¿°UIçš„Reactå…ƒç´ ã€‚

<Box style={{ padding: '20px', background: '#e3f2fd', borderRadius: '8px', margin: '20px 0' }}>
  <h4 style={{ margin: 0, color: '#1976d2' }}>ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µ</h4>
  <p style={{ margin: '10px 0 0 0' }}>
    å‡½æ•°å¼ç»„ä»¶æ˜¯<strong>çº¯å‡½æ•°</strong>ï¼šç»™å®šç›¸åŒçš„propsï¼Œæ€»æ˜¯è¿”å›ç›¸åŒçš„JSXã€‚å®ƒä¸ç®¡ç†è‡ªå·±çš„çŠ¶æ€ï¼ˆé™¤éä½¿ç”¨Hooksï¼‰ï¼Œåªè´Ÿè´£UIçš„æ¸²æŸ“ã€‚
  </p>
</Box>

<CodeBlock>

```jsx
// æœ€ç®€å•çš„å‡½æ•°å¼ç»„ä»¶
function Welcome(props) {
  return <h1>Hello, {props.name}</h1>;
}

// ä½¿ç”¨ES6ç®­å¤´å‡½æ•°çš„å‡½æ•°å¼ç»„ä»¶
const Welcome = (props) => {
  return <h1>Hello, {props.name}</h1>;
};

// ç®€åŒ–çš„ç®­å¤´å‡½æ•°ï¼ˆå•è¡Œè¿”å›ï¼‰
const Welcome = (props) => <h1>Hello, {props.name}</h1>;
```

</CodeBlock>

### 1.1 å‡½æ•°å¼ç»„ä»¶çš„å†å²

å‡½æ•°å¼ç»„ä»¶åœ¨Reactä¸­ç»å†äº†æ¼”å˜ï¼š

- **React 0.14+**ï¼šå¼•å…¥å‡½æ•°å¼ç»„ä»¶æ¦‚å¿µ
- **React 16.8+**ï¼šHooksä½¿å‡½æ•°å¼ç»„ä»¶æ”¯æŒçŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸ
- **React 18+**ï¼šå‡½æ•°å¼ç»„ä»¶æˆä¸ºä¸»æµæ¨èæ–¹å¼

### 1.2 ä¸ºä»€ä¹ˆé€‰æ‹©å‡½æ•°å¼ç»„ä»¶ï¼Ÿ

<Grid>

<div>
  <h4>ä¼˜ç‚¹</h4>
  <ul>
    <li>âœ… è¯­æ³•ç®€æ´ï¼Œæ˜“äºç†è§£</li>
    <li>âœ… æ€§èƒ½è¾ƒå¥½ï¼ˆæ²¡æœ‰ç±»å¼€é”€ï¼‰</li>
    <li>âœ… æ›´å®¹æ˜“æµ‹è¯•å’Œå¤ç”¨</li>
    <li>âœ… ç¬¦åˆå‡½æ•°å¼ç¼–ç¨‹æ€æƒ³</li>
    <li>âœ… Hooksæä¾›å®Œæ•´èƒ½åŠ›</li>
    <li>âœ… æ›´å¥½çš„Tree Shaking</li>
  </ul>
</div>

<div>
  <h4>ä½¿ç”¨åœºæ™¯</h4>
  <ul>
    <li>ğŸ“Œ å¤§éƒ¨åˆ†UIç»„ä»¶</li>
    <li>ğŸ“Œ å±•ç¤ºå‹ç»„ä»¶</li>
    <li>ğŸ“Œ è½»é‡çº§ç»„ä»¶</li>
    <li>ğŸ“Œ å®¹å™¨ç»„ä»¶</li>
    <li>ğŸ“Œ é«˜é˜¶ç»„ä»¶çš„å­ç»„ä»¶</li>
    <li>ğŸ“Œ æ‰€æœ‰éœ€è¦çŠ¶æ€çš„ç»„ä»¶</li>
  </ul>
</div>

</Grid>

---

## 2. å‡½æ•°å¼ç»„ä»¶åŸºç¡€è¯­æ³•

### 2.1 åŸºæœ¬ç»“æ„

<CodeBlock>

```jsx
// æ–¹å¼1ï¼šfunctionå…³é”®å­—
function Header(props) {
  return (
    <header className="header">
      <h1>{props.title}</h1>
      <nav>{props.children}</nav>
    </header>
  );
}

// æ–¹å¼2ï¼šç®­å¤´å‡½æ•°
const Header = (props) => {
  return (
    <header className="header">
      <h1>{props.title}</h1>
      <nav>{props.children}</nav>
    </header>
  );
};

// æ–¹å¼3ï¼šè§£æ„èµ‹å€¼
const Header = ({ title, children }) => {
  return (
    <header className="header">
      <h1>{title}</h1>
      <nav>{children}</nav>
    </header>
  );
};
```

</CodeBlock>

### 2.2 Propså¤„ç†

<CodeBlock>

```jsx
// æœªè§£æ„ - éœ€è¦ä½¿ç”¨props.*
function UserCard(props) {
  return (
    <div className="user-card">
      <img src={props.avatar} alt={props.name} />
      <h3>{props.name}</h3>
      <p>{props.email}</p>
    </div>
  );
}

// è§£æ„èµ‹å€¼ - æ›´ç®€æ´
function UserCard({ avatar, name, email }) {
  return (
    <div className="user-card">
      <img src={avatar} alt={name} />
      <h3>{name}</h3>
      <p>{email}</p>
    </div>
  );
}

// é»˜è®¤å€¼
function UserCard({ avatar, name, email, role = 'User' }) {
  return (
    <div className="user-card">
      <img src={avatar} alt={name} />
      <h3>{name}</h3>
      <p>{email}</p>
      <span className="role">{role}</span>
    </div>
  );
}

// å‰©ä½™å‚æ•°
function UserCard({ name, email, ...otherProps }) {
  return (
    <div className="user-card" {...otherProps}>
      <h3>{name}</h3>
      <p>{email}</p>
    </div>
  );
}
```

</CodeBlock>

### 2.3 æ¡ä»¶æ¸²æŸ“

<CodeBlock>

```jsx
// æ–¹å¼1ï¼šifè¯­å¥
function StatusIndicator({ status }) {
  if (status === 'loading') {
    return <div className="spinner">Loading...</div>;
  }

  if (status === 'error') {
    return <div className="error">Something went wrong</div>;
  }

  return <div className="success">Success!</div>;
}

// æ–¹å¼2ï¼šä¸‰å…ƒè¿ç®—ç¬¦
function StatusBadge({ isActive }) {
  return (
    <span className={`badge ${isActive ? 'active' : 'inactive'}`}>
      {isActive ? 'Active' : 'Inactive'}
    </span>
  );
}

// æ–¹å¼3ï¼šé€»è¾‘ä¸è¿ç®—ç¬¦
function NotificationList({ notifications, showNotifications }) {
  return (
    <div>
      {showNotifications && notifications.length > 0 && (
        <ul>
          {notifications.map(notification => (
            <li key={notification.id}>{notification.message}</li>
          ))}
        </ul>
      )}
    </div>
  );
}
```

</CodeBlock>

### 2.4 åˆ—è¡¨æ¸²æŸ“

<CodeBlock>

```jsx
function TodoList({ todos }) {
  return (
    <ul className="todo-list">
      {todos.map(todo => (
        <li key={todo.id} className={todo.completed ? 'completed' : ''}>
          <input
            type="checkbox"
            checked={todo.completed}
            readOnly
          />
          <span>{todo.text}</span>
        </li>
      ))}
    </ul>
  );
}

function UserList({ users }) {
  if (!users || users.length === 0) {
    return <p>No users found</p>;
  }

  return (
    <div className="user-list">
      {users.map(user => (
        <UserCard key={user.id} {...user} />
      ))}
    </div>
  );
}
```

</CodeBlock>

---

## 3. å‡½æ•°å¼ç»„ä»¶ vs ç±»ç»„ä»¶

### 3.1 è¯­æ³•å¯¹æ¯”

<Compare>

```jsx
// å‡½æ•°å¼ç»„ä»¶
function Counter({ initialCount = 0 }) {
  const [count, setCount] = useState(initialCount);

  const increment = () => setCount(prev => prev + 1);
  const decrement = () => setCount(prev => prev - 1);

  return (
    <div className="counter">
      <button onClick={decrement}>-</button>
      <span>{count}</span>
      <button onClick={increment}>+</button>
    </div>
  );
}

// ç±»ç»„ä»¶
class Counter extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      count: props.initialCount || 0
    };
  }

  increment = () => {
    this.setState(prev => ({ count: prev.count + 1 }));
  };

  decrement = () => {
    this.setState(prev => ({ count: prev.count - 1 }));
  };

  render() {
    return (
      <div className="counter">
        <button onClick={this.decrement}>-</button>
        <span>{this.state.count}</span>
        <button onClick={this.increment}>+</button>
      </div>
    );
  }
}
```

</Compare>

### 3.2 å…³é”®åŒºåˆ«

<CodeBlock>

```jsx
// å‡½æ•°å¼ç»„ä»¶ç‰¹ç‚¹
1. è¯­æ³•æ›´ç®€æ´ï¼Œæ²¡æœ‰thiså…³é”®å­—
2. ä½¿ç”¨Hooksæ›¿ä»£ç”Ÿå‘½å‘¨æœŸæ–¹æ³•
3. å¤©ç„¶æ”¯æŒTree Shaking
4. æ›´å®¹æ˜“æµ‹è¯•
5. æ›´å¥½çš„æ€§èƒ½ï¼ˆæ— ç±»å®ä¾‹å¼€é”€ï¼‰

// ç±»ç»„ä»¶ç‰¹ç‚¹
1. éœ€è¦ç†è§£thisç»‘å®š
2. ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•
3. ä»£ç é‡æ›´å¤š
4. éš¾ä»¥è¿›è¡ŒTree Shaking
5. æ€§èƒ½å¼€é”€ç•¥å¤§
```

</CodeBlock>

### 3.3 è¿ç§»æŒ‡å—

<CodeBlock>

```jsx
// å°†ç±»ç»„ä»¶è½¬æ¢ä¸ºå‡½æ•°å¼ç»„ä»¶

// æ­¥éª¤1ï¼šå°†classæ”¹ä¸ºfunction
class UserProfile extends React.Component {
  // â†“
function UserProfile() { }

// æ­¥éª¤2ï¼šç§»é™¤constructor
class UserProfile extends React.Component {
  constructor(props) {
    super(props);
    this.state = { user: null, loading: true };
  }
  // â†“
function UserProfile() {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);
}

// æ­¥éª¤3ï¼šç§»é™¤this.state
class UserProfile extends React.Component {
  // ...
  render() {
    return <div>{this.state.user.name}</div>;
  }
  // â†“
function UserProfile() {
  const [user, setUser] = useState(null);
  // ...
  return <div>{user.name}</div>;
}

// æ­¥éª¤4ï¼šå°†ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ›¿æ¢ä¸ºHooks
class UserProfile extends React.Component {
  componentDidMount() {
    fetchUser(this.props.userId).then(user => {
      this.setState({ user, loading: false });
    });
  }
  // â†“
function UserProfile({ userId }) {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetchUser(userId).then(user => {
      setUser(user);
      setLoading(false);
    });
  }, [userId]);
}
```

</CodeBlock>

---

## 4. å‡½æ•°å¼ç»„ä»¶è®¾è®¡åŸåˆ™

### 4.1 å•ä¸€èŒè´£åŸåˆ™

<Compare>

```jsx
// âŒ ä¸å¥½çš„ä¾‹å­ - èŒè´£è¿‡å¤š
function UserProfile({ userId }) {
  const [user, setUser] = useState(null);
  const [posts, setPosts] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    // æ—¢è·å–ç”¨æˆ·æ•°æ®åˆè·å–æ–‡ç« æ•°æ®
    fetchUser(userId).then(setUser);
    fetchUserPosts(userId).then(setPosts);
    setLoading(false);
  }, [userId]);

  // æ—¢è´Ÿè´£æ•°æ®è·å–åˆè´Ÿè´£æ¸²æŸ“
  return (
    <div>
      {loading ? <Spinner /> : (
        <>
          <UserInfo user={user} />
          <UserPosts posts={posts} />
        </>
      )}
    </div>
  );
}

// âœ… å¥½çš„ä¾‹å­ - å•ä¸€èŒè´£
function UserProfile({ userId }) {
  return (
    <div>
      <UserDataProvider userId={userId}>
        <UserInfo />
        <UserPosts />
      </UserDataProvider>
    </div>
  );
}

function UserDataProvider({ userId, children }) {
  const [user, setUser] = useState(null);
  const [posts, setPosts] = useState([]);

  useEffect(() => {
    Promise.all([
      fetchUser(userId).then(setUser),
      fetchUserPosts(userId).then(setPosts)
    ]);
  }, [userId]);

  return (
    <UserDataContext.Provider value={{ user, posts }}>
      {children}
    </UserDataContext.Provider>
  );
}
```

</Compare>

### 4.2 çº¯å‡½æ•°åŸåˆ™

<CodeBlock>

```jsx
// âœ… çº¯å‡½æ•° - ç»™å®šç›¸åŒpropsæ€»æ˜¯è¿”å›ç›¸åŒç»“æœ
function Button({ label, onClick, disabled }) {
  return (
    <button
      onClick={onClick}
      disabled={disabled}
      className={`btn ${disabled ? 'btn-disabled' : 'btn-primary'}`}
    >
      {label}
    </button>
  );
}

// âœ… çº¯å‡½æ•° - ä¸ä¿®æ”¹è¾“å…¥
function formatUserName(user) {
  if (!user || !user.firstName || !user.lastName) {
    return 'Unknown User';
  }
  // åˆ›å»ºæ–°å¯¹è±¡è€Œä¸ä¿®æ”¹åŸå¯¹è±¡
  return `${user.firstName} ${user.lastName}`;
}

// âŒ éçº¯å‡½æ•° - é¿å…
function formatUserName(user) {
  if (user) {
    user.formattedName = `${user.firstName} ${user.lastName}`; // ä¿®æ”¹åŸå¯¹è±¡ï¼
  }
  return user;
}
```

</CodeBlock>

### 4.3 ç»„åˆä¼˜äºç»§æ‰¿

<CodeBlock>

```jsx
// âœ… æ¨èï¼šä½¿ç”¨ç»„åˆ
function Card({ children, title }) {
  return (
    <div className="card">
      {title && <h3 className="card-title">{title}</h3>}
      <div className="card-content">
        {children}
      </div>
    </div>
  );
}

function UserCard({ user }) {
  return (
    <Card title="User Information">
      <p>Name: {user.name}</p>
      <p>Email: {user.email}</p>
    </Card>
  );
}

// âœ… æ¨èï¼šä½¿ç”¨props.children
function Modal({ isOpen, onClose, children }) {
  if (!isOpen) return null;

  return (
    <div className="modal-overlay" onClick={onClose}>
      <div className="modal-content" onClick={e => e.stopPropagation()}>
        <button className="modal-close" onClick={onClose}>Ã—</button>
        {children}
      </div>
    </div>
  );
}

function LoginModal({ isOpen, onClose }) {
  return (
    <Modal isOpen={isOpen} onClose={onClose}>
      <h2>Login</h2>
      <form>...</form>
    </Modal>
  );
}
```

</CodeBlock>

---

## 5. é«˜çº§å‡½æ•°å¼ç»„ä»¶æ¨¡å¼

### 5.1 çŠ¶æ€æå‡æ¨¡å¼

<CodeBlock>

```jsx
// å°†å…±äº«çŠ¶æ€æå‡åˆ°çˆ¶ç»„ä»¶
function TemperatureCalculator() {
  const [temperature, setTemperature] = useState('');
  const [scale, setScale] = useState('c');

  const celsius = scale === 'f' ? tryConvert(temperature, toCelsius) : temperature;
  const fahrenheit = scale === 'c' ? tryConvert(temperature, toFahrenheit) : temperature;

  return (
    <div>
      <TemperatureInput
        scale="c"
        temperature={celsius}
        onTemperatureChange={setTemperature}
      />
      <TemperatureInput
        scale="f"
        temperature={fahrenheit}
        onTemperatureChange={setTemperature}
      />
    </div>
  );
}

function TemperatureInput({ scale, temperature, onTemperatureChange }) {
  const handleChange = (e) => {
    onTemperatureChange(e.target.value);
  };

  return (
    <fieldset>
      <legend>Enter temperature in {scale === 'c' ? 'Celsius' : 'Fahrenheit'}:</legend>
      <input
        value={temperature}
        onChange={handleChange}
      />
    </fieldset>
  );
}
```

</CodeBlock>

### 5.2 Render Propsæ¨¡å¼

<CodeBlock>

```jsx
// ä½¿ç”¨render propså…±äº«é€»è¾‘
function DataProvider({ render }) {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    fetchData()
      .then(setData)
      .catch(setError)
      .finally(() => setLoading(false));
  }, []);

  return render({ data, loading, error });
}

// ä½¿ç”¨
function UserList() {
  return (
    <DataProvider
      render={({ data, loading, error }) => {
        if (loading) return <div>Loading...</div>;
        if (error) return <div>Error: {error.message}</div>;
        return (
          <ul>
            {data.map(user => <li key={user.id}>{user.name}</li>)}
          </ul>
        );
      }}
    />
  );
}
```

</CodeBlock>

### 5.3 ç»„åˆç»„ä»¶æ¨¡å¼

<CodeBlock>

```jsx
// åˆ›å»ºç»„ä»¶ç»„åˆ
function Select({ children, value, onChange }) {
  return (
    <div className="select">
      {Children.map(children, child =>
        cloneElement(child, { value, onChange })
      )}
    </div>
  );
}

function SelectOption({ value, children, value: currentValue, onChange }) {
  const isSelected = value === currentValue;

  return (
    <div
      className={`select-option ${isSelected ? 'selected' : ''}`}
      onClick={() => onChange(value)}
    >
      {children}
    </div>
  );
}

// ä½¿ç”¨
function CountrySelector() {
  const [country, setCountry] = useState('us');

  return (
    <Select value={country} onChange={setCountry}>
      <SelectOption value="us">United States</SelectOption>
      <SelectOption value="uk">United Kingdom</SelectOption>
      <SelectOption value="cn">China</SelectOption>
    </Select>
  );
}
```

</CodeBlock>

---

## 6. æ€§èƒ½ä¼˜åŒ–

### 6.1 React.memoä¼˜åŒ–

<CodeBlock>

```jsx
// åŸºç¡€ä½¿ç”¨
const UserCard = React.memo(({ user }) => {
  return (
    <div className="user-card">
      <h3>{user.name}</h3>
      <p>{user.email}</p>
    </div>
  );
});

// è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°
const UserCard = React.memo(
  ({ user, onEdit }) => {
    return (
      <div className="user-card">
        <h3>{user.name}</h3>
        <p>{user.email}</p>
        <button onClick={() => onEdit(user.id)}>Edit</button>
      </div>
    );
  },
  (prevProps, nextProps) => {
    // è‡ªå®šä¹‰æ¯”è¾ƒé€»è¾‘
    return (
      prevProps.user.id === nextProps.user.id &&
      prevProps.user.name === nextProps.user.name &&
      prevProps.onEdit === nextProps.onEdit
    );
  }
);

// é”™è¯¯ç¤ºä¾‹ - ä¸è¦åœ¨memoå‡½æ•°ä¸­åˆ›å»ºå¯¹è±¡
const UserList = ({ users }) => {
  return (
    <div>
      {users.map(user => (
        <UserCard
          key={user.id}
          user={user}
          onEdit={() => console.log('Edit', user.id)} // æ¯æ¬¡æ¸²æŸ“éƒ½æ˜¯æ–°å‡½æ•°
        />
      ))}
    </div>
  );
};

// æ­£ç¡®ç¤ºä¾‹ - ä½¿ç”¨useCallback
const UserList = ({ users }) => {
  const handleEdit = useCallback((id) => {
    console.log('Edit', id);
  }, []);

  return (
    <div>
      {users.map(user => (
        <UserCard
          key={user.id}
          user={user}
          onEdit={handleEdit}
        />
      ))}
    </div>
  );
};
```

</CodeBlock>

### 6.2 useCallbackä¼˜åŒ–

<CodeBlock>

```jsx
// é¿å…å­ç»„ä»¶ä¸å¿…è¦æ¸²æŸ“
function ParentComponent() {
  const [count, setCount] = useState(0);
  const [value, setValue] = useState('');

  // ç¼“å­˜å‡½æ•°ï¼Œé¿å…æ¯æ¬¡æ¸²æŸ“åˆ›å»ºæ–°å‡½æ•°
  const handleClick = useCallback(() => {
    console.log('Button clicked', count);
  }, [count]);

  const handleInputChange = useCallback((e) => {
    setValue(e.target.value);
  }, []);

  return (
    <div>
      <button onClick={handleClick}>Click me</button>
      <input value={value} onChange={handleInputChange} />
    </div>
  );
}

// ä¸React.memoç»“åˆä½¿ç”¨
const ExpensiveChild = React.memo(({ onAction }) => {
  console.log('ExpensiveChild rendered');
  return <button onClick={onAction}>Action</button>;
});

function Parent() {
  const [count, setCount] = useState(0);

  const handleAction = useCallback(() => {
    console.log('Action performed', count);
  }, [count]);

  return (
    <div>
      <ExpensiveChild onAction={handleAction} />
      <button onClick={() => setCount(c => c + 1)}>
        Count: {count}
      </button>
    </div>
  );
}
```

</CodeBlock>

---

## 7. ç»„ä»¶ç»„ç»‡ä¸å‘½å

### 7.1 æ–‡ä»¶ç»„ç»‡

<CodeBlock>

```jsx
// æ¨èçš„æ–‡ä»¶ç»„ç»‡æ–¹å¼

// 1. å•ä¸€èŒè´£ï¼Œæ¯ä¸ªæ–‡ä»¶ä¸€ä¸ªç»„ä»¶
// UserCard/index.jsx
export default function UserCard({ user }) {
  return <div>{user.name}</div>;
}

// 2. ç›¸å…³çš„ç»„ä»¶æ”¾åœ¨åŒä¸€ç›®å½•
// components/
//   â”œâ”€â”€ Button/
//   â”‚   â”œâ”€â”€ index.jsx
//   â”‚   â”œâ”€â”€ Button.jsx
//   â”‚   â””â”€â”€ Button.test.jsx
//   â””â”€â”€ Modal/
//       â”œâ”€â”€ index.jsx
//       â”œâ”€â”€ Modal.jsx
//       â”œâ”€â”€ ModalHeader.jsx
//       â”œâ”€â”€ ModalBody.jsx
//       â””â”€â”€ ModalFooter.jsx

// 3. ä½¿ç”¨index.jsä½œä¸ºå…¥å£
// components/Button/index.js
export { default } from './Button';
export * from './Button';

// 4. å¯¼å‡ºå¤šä¸ªç›¸å…³ç»„ä»¶
// components/Button/Button.jsx
export const PrimaryButton = ({ children, ...props }) => (
  <button className="btn btn-primary" {...props}>
    {children}
  </button>
);

export const SecondaryButton = ({ children, ...props }) => (
  <button className="btn btn-secondary" {...props}>
    {children}
  </button>
);
```

</CodeBlock>

### 7.2 å‘½åçº¦å®š

<CodeBlock>

```jsx
// âœ… å¥½çš„å‘½å

// 1. ç»„ä»¶åä½¿ç”¨PascalCase
function UserProfile() { }      // âœ…
function userProfile() { }      // âŒ

// 2. æ–‡ä»¶åä¸ç»„ä»¶åä¸€è‡´
// UserProfile.jsx
export default function UserProfile() { }

// 3. æè¿°æ€§çš„åå­—
function TemperatureConverter() { }  // âœ… æ¸…æ¥šè¡¨è¾¾äº†ç”¨é€”
function Temp() { }                  // âŒ å¤ªç®€çŸ­

// 4. ä½¿ç”¨åè¯æˆ–å½¢å®¹è¯
function Button() { }           // âœ… åè¯
function LoadingSpinner() { }   // âœ… å½¢å®¹è¯+åè¯
function IsLoggedIn() { }       // âœ… æè¿°çŠ¶æ€

// 5. é¿å…ä¸è‡ªç„¶çš„ç¼©å†™
function UserProfilePage() { }  // âœ…
function UserProf() { }         // âŒ

// 6. å¸ƒå°”å€¼propsä»¥isã€hasã€canå¼€å¤´
<Modal isOpen={true} hasCloseButton={true} canClose={true} />
```

</CodeBlock>

---

## 8. å®è·µç»ƒä¹ 

### ç»ƒä¹ 1ï¼šç”¨æˆ·å¡ç‰‡ç»„ä»¶

åˆ›å»ºä¸€ä¸ªå¯å¤ç”¨çš„ç”¨æˆ·å¡ç‰‡ç»„ä»¶ï¼Œæ”¯æŒä¸åŒç”¨æˆ·è§’è‰²ã€‚

<Expandable title="ç‚¹å‡»æŸ¥çœ‹è¦æ±‚">

**åŠŸèƒ½è¦æ±‚**ï¼š
- æ¥æ”¶ç”¨æˆ·ä¿¡æ¯ï¼šname, email, avatar, role
- æ ¹æ®è§’è‰²æ˜¾ç¤ºä¸åŒé¢œè‰²å¾½ç« 
- æ”¯æŒå¯é€‰çš„é¢å¤–ä¿¡æ¯ï¼ˆbio, location, websiteï¼‰
- ä½¿ç”¨React.memoä¼˜åŒ–

**è®¾è®¡è¦æ±‚**ï¼š
- å¤´åƒä½¿ç”¨é»˜è®¤å€¼å ä½ç¬¦
- è§’è‰²å¾½ç« é¢œè‰²ï¼šAdmin(çº¢è‰²)ã€User(è“è‰²)ã€Guest(ç°è‰²)
- å“åº”å¼å¸ƒå±€
- æ‚¬åœæ•ˆæœ

**æç¤º**ï¼š
- ä½¿ç”¨è§£æ„èµ‹å€¼æ¥æ”¶props
- ä½¿ç”¨é»˜è®¤å‚æ•°è®¾ç½®é»˜è®¤å€¼
- ä½¿ç”¨CSSæ¨¡å—æˆ–Styled Components

</Expandable>

### ç»ƒä¹ 2ï¼šè¯„è®ºç³»ç»Ÿ

åˆ›å»ºä¸€ä¸ªåµŒå¥—è¯„è®ºç»„ä»¶ç³»ç»Ÿã€‚

<Expandable title="ç‚¹å‡»æŸ¥çœ‹è¦æ±‚">

**åŠŸèƒ½è¦æ±‚**ï¼š
- æ”¯æŒå¤šçº§åµŒå¥—è¯„è®º
- æ¯æ¡è¯„è®ºåŒ…å«ï¼šä½œè€…ã€å¤´åƒã€æ—¶é—´ã€å†…å®¹ã€å›å¤æŒ‰é’®
- é€’å½’æ¸²æŸ“å­è¯„è®º
- è¯„è®ºæ•°é‡ç»Ÿè®¡

**è®¾è®¡è¦æ±‚**ï¼š
- ä½¿ç”¨ç»„åˆæ¨¡å¼
- æœ€å¤šæ˜¾ç¤º3çº§åµŒå¥—
- è¶…è¿‡3çº§çš„å­è¯„è®ºæ˜¾ç¤º"è¿˜æœ‰Xæ¡å›å¤"
- ç‚¹å‡»"æ˜¾ç¤ºæ›´å¤š"å±•å¼€

**æç¤º**ï¼š
- ä½¿ç”¨mapé€’å½’æ¸²æŸ“
- æ§åˆ¶é€’å½’æ·±åº¦
- æ¡ä»¶æ¸²æŸ“

</Expandable>

### ç»ƒä¹ 3ï¼šè¡¨å•ç”Ÿæˆå™¨

åˆ›å»ºä¸€ä¸ªåŠ¨æ€è¡¨å•ç»„ä»¶ã€‚

<Expandable title="ç‚¹å‡»æŸ¥çœ‹è¦æ±‚">

**åŠŸèƒ½è¦æ±‚**ï¼š
- æ”¯æŒå¤šç§è¾“å…¥ç±»å‹ï¼štext, email, password, select, checkbox
- å®æ—¶éªŒè¯å’Œé”™è¯¯æç¤º
- è¡¨å•å­—æ®µé…ç½®åŒ–

**æ•°æ®ç»“æ„**ï¼š
```javascript
const formConfig = [
  { type: 'text', name: 'username', label: 'Username', required: true },
  { type: 'email', name: 'email', label: 'Email', required: true },
  { type: 'select', name: 'country', label: 'Country', options: [...] },
  { type: 'checkbox', name: 'accept', label: 'Accept Terms', required: true }
];
```

**æç¤º**ï¼š
- ä½¿ç”¨switchæˆ–å¯¹è±¡æ˜ å°„æ¸²æŸ“ä¸åŒè¾“å…¥ç±»å‹
- åŠ¨æ€åˆ›å»ºè¡¨å•å­—æ®µ
- çŠ¶æ€æå‡æ¨¡å¼ç®¡ç†è¡¨å•æ•°æ®

</Expandable>

### ç»ƒä¹ 4ï¼šè™šæ‹Ÿåˆ—è¡¨

åˆ›å»ºä¸€ä¸ªé«˜æ€§èƒ½çš„è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨ç»„ä»¶ã€‚

<Expandable title="ç‚¹å‡»æŸ¥çœ‹è¦æ±‚">

**åŠŸèƒ½è¦æ±‚**ï¼š
- åªæ¸²æŸ“å¯è§åŒºåŸŸçš„åˆ—è¡¨é¡¹
- æ”¯æŒ10000+æ¡æ•°æ®
- å¹³æ»‘æ»šåŠ¨ä½“éªŒ
- å¯é…ç½®é¡¹é«˜åº¦

**å®ç°è¦ç‚¹**ï¼š
- è®¡ç®—å¯è§é¡¹èŒƒå›´
- åŠ¨æ€è®¡ç®—å®¹å™¨é«˜åº¦
- ä½¿ç”¨translateYä¼˜åŒ–æ¸²æŸ“
- ä½¿ç”¨useMemoç¼“å­˜è®¡ç®—ç»“æœ

**æç¤º**ï¼š
- ç›‘å¬æ»šåŠ¨äº‹ä»¶
- è®¡ç®—scrollTop
- ä½¿ç”¨Math.floorå’ŒMath.ceilç¡®å®šèŒƒå›´

</Expandable>

---

## 9. å¸¸è§é”™è¯¯

### é”™è¯¯1ï¼šå¿˜è®°æ·»åŠ keyå±æ€§

<ErrorBox>

```jsx
// âŒ é”™è¯¯
function UserList({ users }) {
  return (
    <ul>
      {users.map(user => (
        <li>{user.name}</li>  // ç¼ºå°‘key
      ))}
    </ul>
  );
}

// âœ… æ­£ç¡®
function UserList({ users }) {
  return (
    <ul>
      {users.map(user => (
        <li key={user.id}>{user.name}</li>  // æ·»åŠ key
      ))}
    </ul>
  );
}
```

</ErrorBox>

### é”™è¯¯2ï¼šåœ¨ç»„ä»¶å†…éƒ¨å®šä¹‰å‡½æ•°

<ErrorBox>

```jsx
// âŒ ä¸å¥½ - æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°å‡½æ•°
function ParentComponent() {
  return (
    <ChildComponent
      onClick={() => console.log('clicked')}  // æ–°å‡½æ•°ï¼
    />
  );
}

// âœ… æ­£ç¡® - ä½¿ç”¨useCallbackç¼“å­˜
function ParentComponent() {
  const handleClick = useCallback(() => {
    console.log('clicked');
  }, []);

  return (
    <ChildComponent onClick={handleClick} />
  );
}
```

</ErrorBox>

### é”™è¯¯3ï¼šç›´æ¥ä¿®æ”¹props

<ErrorBox>

```jsx
// âŒ é”™è¯¯ - ä¸è¦ä¿®æ”¹props
function Button(props) {
  props.disabled = true;  // ç»å¯¹ä¸è¦è¿™æ ·åšï¼
  return <button {...props}>Click</button>;
}

// âœ… æ­£ç¡® - åˆ›å»ºæ–°å¯¹è±¡
function Button({ disabled, ...otherProps }) {
  const isDisabled = disabled || isLoading;
  return <button disabled={isDisabled} {...otherProps}>Click</button>;
}
```

</ErrorBox>

### é”™è¯¯4ï¼šé”™è¯¯çš„é»˜è®¤å€¼

<ErrorBox>

```jsx
// âŒ é”™è¯¯ - ç›´æ¥ä¿®æ”¹props
function UserCard(props) {
  const user = props.user || {};  // é¿å…ç›´æ¥ä¿®æ”¹
  return <div>{user.name}</div>;
}

// âœ… æ­£ç¡® - ä½¿ç”¨é»˜è®¤å€¼
function UserCard({ user = {} }) {
  return <div>{user.name}</div>;
}

// æˆ–è€…æ›´å®‰å…¨
function UserCard({ user }) {
  if (!user) return null;
  return <div>{user.name}</div>;
}
```

</ErrorBox>

### é”™è¯¯5ï¼šå¿˜è®°å¤„ç†ç©ºçŠ¶æ€

<ErrorBox>

```jsx
// âŒ é”™è¯¯ - æ²¡æœ‰å¤„ç†ç©ºçŠ¶æ€
function UserList({ users }) {
  return (
    <ul>
      {users.map(user => (
        <li key={user.id}>{user.name}</li>
      ))}
    </ul>
  );
}

// âœ… æ­£ç¡® - å¤„ç†ç©ºçŠ¶æ€
function UserList({ users }) {
  if (!users || users.length === 0) {
    return <p>No users found</p>;
  }

  return (
    <ul>
      {users.map(user => (
        <li key={user.id}>{user.name}</li>
      ))}
    </ul>
  );
}
```

</ErrorBox>

---

## 10. æœ¬ç« å°ç»“

### å…³é”®è¦ç‚¹

<Checklist>

- âœ… å‡½æ•°å¼ç»„ä»¶æ˜¯è¿”å›JSXçš„JavaScriptå‡½æ•°
- âœ… ä¼˜å…ˆä½¿ç”¨è§£æ„èµ‹å€¼å¤„ç†props
- âœ… ä¿æŒå‡½æ•°å¼ç»„ä»¶çš„çº¯å‡½æ•°ç‰¹æ€§
- âœ… éµå¾ªå•ä¸€èŒè´£åŸåˆ™
- âœ… ä½¿ç”¨React.memoä¼˜åŒ–æ€§èƒ½
- âœ… ä½¿ç”¨useCallbackç¼“å­˜å‡½æ•°
- âœ… ç»„ä»¶å‘½åä½¿ç”¨PascalCase
- âœ… æ€»æ˜¯ä¸ºåˆ—è¡¨é¡¹æ·»åŠ keyå±æ€§
- âœ… æ­£ç¡®å¤„ç†ç©ºçŠ¶æ€å’Œé”™è¯¯çŠ¶æ€
- âœ… é¿å…åœ¨ç»„ä»¶å†…éƒ¨åˆ›å»ºå¯¹è±¡æˆ–å‡½æ•°

</Checklist>

### æœ€ä½³å®è·µ

<BestPractices>

1. **ä¿æŒç®€å•** - å‡½æ•°å¼ç»„ä»¶åº”è¯¥ä¸“æ³¨äºæ¸²æŸ“UI
2. **å•ä¸€èŒè´£** - æ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
3. **çº¯å‡½æ•°** - ç»™å®šç›¸åŒè¾“å…¥ï¼Œæ€»æ˜¯è¿”å›ç›¸åŒè¾“å‡º
4. **è§£æ„props** - ä½¿ç”¨è§£æ„èµ‹å€¼è®©ä»£ç æ›´æ¸…æ™°
5. **åˆç†æ‹†åˆ†** - å°†å¤æ‚ç»„ä»¶æ‹†åˆ†ä¸ºå¤šä¸ªå°ç»„ä»¶
6. **å‘½åæ¸…æ™°** - ä½¿ç”¨æè¿°æ€§çš„ç»„ä»¶åå’Œpropså
7. **æ€§èƒ½ä¼˜åŒ–** - åˆç†ä½¿ç”¨React.memoå’ŒuseCallback
8. **æµ‹è¯•è¦†ç›–** - ä¸ºç»„ä»¶ç¼–å†™å•å…ƒæµ‹è¯•

</BestPractices>

### ä¸‹ä¸€æ­¥å­¦ä¹ 

ç°åœ¨ä½ å·²ç»æŒæ¡äº†å‡½æ•°å¼ç»„ä»¶çš„åŸºç¡€ï¼Œæ¥ä¸‹æ¥å¯ä»¥å­¦ä¹ ï¼š

1. **[é«˜é˜¶ç»„ä»¶](higher-order-components)** - å­¦ä¹ å¦‚ä½•åˆ›å»ºå¯å¤ç”¨çš„ç»„ä»¶é€»è¾‘
2. **[æ¸²æŸ“å±æ€§æ¨¡å¼](render-props)** - ç†è§£render propsæ¨¡å¼
3. **[å¤åˆç»„ä»¶](compound-components)** - æŒæ¡ç»„ä»¶ç»„åˆçš„é«˜çº§æŠ€å·§
4. **[å®¹å™¨-å±•ç¤ºæ¨¡å¼](container-presentational)** - å­¦ä¹ çŠ¶æ€ç®¡ç†æœ€ä½³å®è·µ

---

## 11. å»¶ä¼¸é˜…è¯»

### å®˜æ–¹èµ„æº

- [å‡½æ•°å¼ç»„ä»¶ä¸çŠ¶æ€](https://react.dev/reference/react) - Reactå®˜æ–¹Hooksæ–‡æ¡£
- [ç»„ä»¶å’ŒProps](https://react.dev/learn/components-and-props) - ç»„ä»¶è®¾è®¡æŒ‡å—
- [æ€§èƒ½ä¼˜åŒ–](https://react.dev/learn/render-and-commit) - Reactæ€§èƒ½ä¼˜åŒ–

### æ¨èé˜…è¯»

- [å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³](https://en.wikipedia.org/wiki/Functional_programming) - å‡½æ•°å¼ç¼–ç¨‹åŸºç¡€
- [ç»„åˆæ¨¡å¼](https://en.wikipedia.org/wiki/Composite_pattern) - è®¾è®¡æ¨¡å¼
- [Reactç»„ä»¶æ¨¡å¼](https://kentcdodds.com/blog/application-state-management-with-react) - ç»„ä»¶çŠ¶æ€ç®¡ç†

---

[â† ä¸Šä¸€ç« ï¼šè‡ªå®šä¹‰Hooks](../hooks/advanced/custom-hooks) | [ä¸‹ä¸€ç« ï¼šé«˜é˜¶ç»„ä»¶ â†’](higher-order-components)
