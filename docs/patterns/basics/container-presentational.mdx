# å®¹å™¨-å±•ç¤ºæ¨¡å¼ (Container-Presenter) - å…³æ³¨ç‚¹åˆ†ç¦»

import { Tabs, TabItem } from '@docusaurus/theme-common';

å®¹å™¨-å±•ç¤ºæ¨¡å¼ï¼ˆContainer-Presenter Patternï¼‰æ˜¯Reactä¸­ä¸€ä¸ªç»å…¸çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå°†ç»„ä»¶çš„é€»è¾‘ï¼ˆæ•°æ®è·å–ã€çŠ¶æ€ç®¡ç†ï¼‰ä¸UIå±•ç¤ºåˆ†ç¦»ã€‚åœ¨Hookså‡ºç°ä¹‹å‰ï¼Œè¿™ä¸ªæ¨¡å¼è¢«å¹¿æ³›ç”¨äºç®¡ç†å¤æ‚åº”ç”¨çš„æ¶æ„ã€‚è™½ç„¶ç°åœ¨Hooksæä¾›äº†æ›´å¥½çš„æ›¿ä»£æ–¹æ¡ˆï¼Œä½†ç†è§£è¿™ä¸€æ¨¡å¼å¯¹äºæ„å»ºå¤§å‹åº”ç”¨ä»ç„¶éå¸¸é‡è¦ã€‚åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨å®¹å™¨-å±•ç¤ºæ¨¡å¼çš„æ¦‚å¿µã€å®ç°æ–¹å¼ã€ä¼˜åŠ¿å’Œæœ€ä½³å®è·µã€‚

## æœ¬ç« å­¦ä¹ ç›®æ ‡

- ç†è§£å®¹å™¨-å±•ç¤ºæ¨¡å¼çš„æ ¸å¿ƒæ¦‚å¿µ
- æŒæ¡å¦‚ä½•åˆ†ç¦»æ•°æ®é€»è¾‘å’ŒUIé€»è¾‘
- å­¦ä¼šå®ç°å¯å¤ç”¨çš„å±•ç¤ºç»„ä»¶
- ç†è§£å®¹å™¨ç»„ä»¶çš„èŒè´£
- æŒæ¡çŠ¶æ€æå‡å’Œå±æ€§ä¼ é€’
- å¯¹æ¯”å®¹å™¨-å±•ç¤ºæ¨¡å¼ä¸Hooksçš„å·®å¼‚
- ç†è§£ä½•æ—¶ä½¿ç”¨è¿™ç§æ¨¡å¼
- å­¦ä¼šé¿å…å¸¸è§é™·é˜±
- æŒæ¡ç°ä»£Reactæ¶æ„ä¸­çš„æ›¿ä»£æ–¹æ¡ˆ

---

## 1. ä»€ä¹ˆæ˜¯å®¹å™¨-å±•ç¤ºæ¨¡å¼ï¼Ÿ

å®¹å™¨-å±•ç¤ºæ¨¡å¼æ˜¯ä¸€ç§å°†ç»„ä»¶æ‹†åˆ†ä¸ºä¸¤éƒ¨åˆ†çš„è®¾è®¡æ¨¡å¼ï¼š
- **å®¹å™¨ç»„ä»¶ï¼ˆContainerï¼‰**ï¼šè´Ÿè´£æ•°æ®è·å–ã€çŠ¶æ€ç®¡ç†ã€å‰¯ä½œç”¨å¤„ç†
- **å±•ç¤ºç»„ä»¶ï¼ˆPresenterï¼‰**ï¼šè´Ÿè´£UIæ¸²æŸ“ã€æ¥æ”¶propsã€å‘ˆç°æ•°æ®

<Box style={{ padding: '20px', background: '#e3f2fd', borderRadius: '8px', margin: '20px 0' }}>
  <h4 style={{ margin: 0, color: '#1976d2' }}>ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µ</h4>
  <p style={{ margin: '10px 0 0 0' }}>
    <strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>ï¼šå®¹å™¨ç»„ä»¶å¤„ç†"å¦‚ä½•å·¥ä½œ"ï¼Œå±•ç¤ºç»„ä»¶å¤„ç†"çœ‹èµ·æ¥å¦‚ä½•"ã€‚
  </p>
</Box>

<CodeBlock>

```jsx
// å®¹å™¨ç»„ä»¶ - è´Ÿè´£æ•°æ®è·å–å’ŒçŠ¶æ€ç®¡ç†
class UserListContainer extends React.Component {
  state = {
    users: [],
    loading: false,
    error: null
  };

  componentDidMount() {
    this.loadUsers();
  }

  loadUsers = async () => {
    this.setState({ loading: true });
    try {
      const users = await fetchUsers();
      this.setState({ users, loading: false });
    } catch (error) {
      this.setState({ error, loading: false });
    }
  };

  render() {
    return (
      <UserListPresenter
        users={this.state.users}
        loading={this.state.loading}
        error={this.state.error}
        onRefresh={this.loadUsers}
      />
    );
  }
}

// å±•ç¤ºç»„ä»¶ - è´Ÿè´£UIæ¸²æŸ“
function UserListPresenter({ users, loading, error, onRefresh }) {
  if (loading) return <div>Loading users...</div>;
  if (error) return <div>Error loading users</div>;

  return (
    <div>
      <button onClick={onRefresh}>Refresh</button>
      <ul>
        {users.map(user => (
          <li key={user.id}>{user.name}</li>
        ))}
      </ul>
    </div>
  );
}

// ä½¿ç”¨
<UserListContainer />
```

</CodeBlock>

### 1.1 æ ¸å¿ƒç†å¿µ

<Grid>

<div>
  <h4>å®¹å™¨ç»„ä»¶èŒè´£</h4>
  <ul>
    <li>ğŸ“¦ æ•°æ®è·å–ï¼ˆAPIè°ƒç”¨ï¼‰</li>
    <li>ğŸ“¦ çŠ¶æ€ç®¡ç†</li>
    <li>ğŸ“¦ å‰¯ä½œç”¨å¤„ç†ï¼ˆè®¢é˜…ã€è®¡æ—¶å™¨ï¼‰</li>
    <li>ğŸ“¦ äº‹ä»¶å¤„ç†</li>
    <li>ğŸ“¦ ä¸šåŠ¡é€»è¾‘</li>
    <li>ğŸ“¦ ä¸å…¶ä»–ç³»ç»Ÿäº¤äº’</li>
  </ul>
</div>

<div>
  <h4>å±•ç¤ºç»„ä»¶èŒè´£</h4>
  <ul>
    <li>ğŸ¨ UIæ¸²æŸ“</li>
    <li>ğŸ¨ æ ·å¼å¤„ç†</li>
    <li>ğŸ¨ æ¥æ”¶props</li>
    <li>ğŸ¨ å¸ƒå±€ç®¡ç†</li>
    <li>ğŸ¨ ç”¨æˆ·äº¤äº’ï¼ˆç®€å•äº‹ä»¶ï¼‰</li>
    <li>ğŸ¨ å¯è®¿é—®æ€§</li>
  </ul>
</div>

</Grid>

### 1.2 æ¨¡å¼ä¼˜åŠ¿

<CodeBlock>

```jsx
// âœ… ä¼˜åŠ¿
1. å…³æ³¨ç‚¹åˆ†ç¦» - é€»è¾‘ä¸UIè§£è€¦
2. å¯å¤ç”¨æ€§ - å±•ç¤ºç»„ä»¶å¯å¤ç”¨
3. å¯æµ‹è¯•æ€§ - ç‹¬ç«‹æµ‹è¯•é€»è¾‘å’ŒUI
4. å¯ç»´æŠ¤æ€§ - ä¿®æ”¹é€»è¾‘ä¸å½±å“UI
5. å›¢é˜Ÿåä½œ - å‰åç«¯åˆ†å·¥æ˜ç¡®
6. æ€§èƒ½ä¼˜åŒ– - å¯ç²¾ç¡®æ§åˆ¶æ¸²æŸ“
7. æ˜“äºç†è§£ - ç»„ä»¶èŒè´£æ¸…æ™°

// é€‚ç”¨åœºæ™¯
- å¤æ‚æ•°æ®è·å–
- å¤šä¸ªç»„ä»¶å…±äº«çŠ¶æ€
- éœ€è¦æ§åˆ¶æ¸²æŸ“æ—¶æœº
- å¤§å‹é¡¹ç›®æ¶æ„
```

</CodeBlock>

---

## 2. åŸºç¡€å®ç°

### 2.1 ç±»ç»„ä»¶å®¹å™¨ + å‡½æ•°ç»„ä»¶å±•ç¤º

<LiveCode
  code={`
function TodoListDemo() {
  // å±•ç¤ºç»„ä»¶ - çº¯UIæ¸²æŸ“
  const TodoListPresenter = ({
    todos,
    filter,
    onAdd,
    onToggle,
    onDelete,
    onFilterChange
  }) => {
    const [newTodo, setNewTodo] = React.useState('');

    const handleAdd = (e) => {
      e.preventDefault();
      if (newTodo.trim()) {
        onAdd(newTodo.trim());
        setNewTodo('');
      }
    };

    const TodoItem = ({ todo }) => (
      <li style={{
        marginBottom: '8px',
        display: 'flex',
        alignItems: 'center',
        gap: '10px',
        padding: '8px',
        background: todo.completed ? '#e8f5e9' : '#fff',
        border: '1px solid #ddd',
        borderRadius: '4px',
        textDecoration: todo.completed ? 'line-through' : 'none'
      }}>
        <input
          type="checkbox"
          checked={todo.completed}
          onChange={() => onToggle(todo.id)}
          style={{ cursor: 'pointer' }}
        />
        <span style={{ flex: 1 }}>{todo.text}</span>
        <button
          onClick={() => onDelete(todo.id)}
          style={{
            padding: '4px 8px',
            background: '#f44336',
            color: 'white',
            border: 'none',
            borderRadius: '4px',
            cursor: 'pointer',
            fontSize: '12px'
          }}
        >
          åˆ é™¤
        </button>
      </li>
    );

    return (
      <div style={{
        maxWidth: '600px',
        margin: '0 auto',
        padding: '20px',
        background: '#f5f5f5',
        borderRadius: '8px',
        border: '2px solid #2196f3'
      }}>
        <h1 style={{ margin: '0 0 20px 0', color: '#1976d2' }}>ğŸ“ Todo List</h1>

        <form onSubmit={handleAdd} style={{ marginBottom: '20px' }}>
          <div style={{ display: 'flex', gap: '10px' }}>
            <input
              value={newTodo}
              onChange={(e) => setNewTodo(e.target.value)}
              placeholder="æ·»åŠ æ–°ä»»åŠ¡..."
              style={{
                flex: 1,
                padding: '10px',
                fontSize: '14px',
                border: '1px solid #ccc',
                borderRadius: '4px'
              }}
            />
            <button
              type="submit"
              style={{
                padding: '10px 20px',
                background: '#4caf50',
                color: 'white',
                border: 'none',
                borderRadius: '4px',
                cursor: 'pointer',
                fontWeight: 'bold'
              }}
            >
              æ·»åŠ 
            </button>
          </div>
        </form>

        <div style={{
          display: 'flex',
          gap: '10px',
          marginBottom: '20px'
        }}>
          {['all', 'active', 'completed'].map(filterType => (
            <button
              key={filterType}
              onClick={() => onFilterChange(filterType)}
              style={{
                flex: 1,
                padding: '8px',
                background: filter === filterType ? '#2196f3' : 'white',
                color: filter === filterType ? 'white' : '#333',
                border: '2px solid #2196f3',
                borderRadius: '4px',
                cursor: 'pointer',
                fontWeight: 'bold'
              }}
            >
              {filterType === 'all' ? 'å…¨éƒ¨' :
               filterType === 'active' ? 'è¿›è¡Œä¸­' : 'å·²å®Œæˆ'}
            </button>
          ))}
        </div>

        <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>
          {todos.length === 0 ? (
            <li style={{
              textAlign: 'center',
              padding: '20px',
              color: '#999',
              background: 'white',
              borderRadius: '4px'
            }}>
              æš‚æ— ä»»åŠ¡
            </li>
          ) : (
            todos.map(todo => (
              <TodoItem key={todo.id} todo={todo} />
            ))
          )}
        </ul>
      </div>
    );
  };

  // å®¹å™¨ç»„ä»¶ - çŠ¶æ€ç®¡ç†å’Œä¸šåŠ¡é€»è¾‘
  const [containerState, setContainerState] = React.useState({
    todos: [
      { id: 1, text: 'å­¦ä¹ ReactåŸºç¡€', completed: true },
      { id: 2, text: 'ç†è§£ç»„ä»¶æ¨¡å¼', completed: false },
      { id: 3, text: 'å®è·µHooks', completed: false }
    ],
    filter: 'all',
    nextId: 4
  });

  const loadTodos = () => {
    // æ¨¡æ‹Ÿæ•°æ®åŠ è½½
    setContainerState(prev => ({ ...prev }));
  };

  const addTodo = (text) => {
    setContainerState(prev => ({
      ...prev,
      todos: [
        ...prev.todos,
        { id: prev.nextId, text, completed: false }
      ],
      nextId: prev.nextId + 1
    }));
  };

  const toggleTodo = (id) => {
    setContainerState(prev => ({
      ...prev,
      todos: prev.todos.map(todo =>
        todo.id === id ? { ...todo, completed: !todo.completed } : todo
      )
    }));
  };

  const deleteTodo = (id) => {
    setContainerState(prev => ({
      ...prev,
      todos: prev.todos.filter(todo => todo.id !== id)
    }));
  };

  const setFilter = (filter) => {
    setContainerState(prev => ({ ...prev, filter }));
  };

  const filteredTodos = containerState.todos.filter(todo => {
    if (containerState.filter === 'active') return !todo.completed;
    if (containerState.filter === 'completed') return todo.completed;
    return true;
  });

  return (
    <div>
      <div style={{
        marginBottom: '20px',
        padding: '15px',
        background: '#e3f2fd',
        borderRadius: '8px',
        border: '2px solid #2196f3'
      }}>
        <h4 style={{ margin: '0 0 10px 0', color: '#1976d2' }}>ğŸ’¡ å®¹å™¨-å±•ç¤ºæ¨¡å¼</h4>
        <p style={{ margin: '5px 0', fontSize: '14px' }}>
          <strong>å®¹å™¨ç»„ä»¶</strong>ï¼šç®¡ç†çŠ¶æ€ã€æ•°æ®è·å–ã€ä¸šåŠ¡é€»è¾‘
        </p>
        <p style={{ margin: '5px 0', fontSize: '14px' }}>
          <strong>å±•ç¤ºç»„ä»¶</strong>ï¼šæ¥æ”¶propsã€æ¸²æŸ“UIã€å¤„ç†ç®€å•äº¤äº’
        </p>
      </div>

      <TodoListPresenter
        todos={filteredTodos}
        filter={containerState.filter}
        onAdd={addTodo}
        onToggle={toggleTodo}
        onDelete={deleteTodo}
        onFilterChange={setFilter}
      />

      <div style={{
        marginTop: '20px',
        padding: '15px',
        background: '#fff3e0',
        borderRadius: '8px',
        border: '2px solid #ff9800',
        fontSize: '14px'
      }}>
        <strong>ğŸ’¡ å…³é”®ç‰¹ç‚¹ï¼š</strong>
        <ul style={{ margin: '10px 0 0 20px', lineHeight: '1.8' }}>
          <li>å®¹å™¨ç»„ä»¶å¤„ç†æ‰€æœ‰ä¸šåŠ¡é€»è¾‘</li>
          <li>å±•ç¤ºç»„ä»¶åªè´Ÿè´£UIæ¸²æŸ“</li>
          <li>çŠ¶æ€æå‡åˆ°å®¹å™¨ä¸­ç®¡ç†</li>
          <li>æ¸…æ™°çš„å…³æ³¨ç‚¹åˆ†ç¦»</li>
        </ul>
      </div>
    </div>
  );
}
`}
  scope={{ React }}
/>

### 2.2 å‡½æ•°ç»„ä»¶å®¹å™¨ + Hooks

<LiveCode
  code={`
function UserProfileDemo() {
  // å±•ç¤ºç»„ä»¶ - çº¯UIæ¸²æŸ“
  const UserProfilePresenter = ({
    user,
    posts,
    loading,
    error,
    onUpdate,
    onDeletePost,
    onRefresh
  }) => {
    if (loading) {
      return (
        <div style={{
          padding: '40px',
          textAlign: 'center',
          background: '#fff3e0',
          borderRadius: '8px',
          border: '2px solid #ff9800'
        }}>
          <div style={{ fontSize: '32px', marginBottom: '10px' }}>â³</div>
          <p style={{ color: '#e65100', fontSize: '16px' }}>æ­£åœ¨åŠ è½½ç”¨æˆ·èµ„æ–™...</p>
        </div>
      );
    }

    if (error) {
      return (
        <div style={{
          padding: '40px',
          textAlign: 'center',
          background: '#ffebee',
          borderRadius: '8px',
          border: '2px solid #f44336'
        }}>
          <div style={{ fontSize: '32px', marginBottom: '10px' }}>âŒ</div>
          <p style={{ color: '#c62828', fontSize: '16px' }}>åŠ è½½å¤±è´¥: {error.message}</p>
          <button
            onClick={onRefresh}
            style={{
              marginTop: '15px',
              padding: '10px 20px',
              background: '#f44336',
              color: 'white',
              border: 'none',
              borderRadius: '4px',
              cursor: 'pointer',
              fontWeight: 'bold'
            }}
          >
            é‡è¯•
          </button>
        </div>
      );
    }

    if (!user) {
      return (
        <div style={{
          padding: '40px',
          textAlign: 'center',
          background: '#f5f5f5',
          borderRadius: '8px',
          border: '2px solid #ddd'
        }}>
          <p style={{ color: '#999', fontSize: '16px' }}>æœªæ‰¾åˆ°ç”¨æˆ·</p>
        </div>
      );
    }

    return (
      <div style={{
        maxWidth: '800px',
        margin: '0 auto',
        padding: '20px',
        background: '#f5f5f5',
        borderRadius: '8px',
        border: '2px solid #4caf50'
      }}>
        <div style={{
          display: 'flex',
          alignItems: 'center',
          padding: '20px',
          background: 'white',
          borderRadius: '8px',
          marginBottom: '20px',
          border: '2px solid #4caf50'
        }}>
          <img
            src={user.avatar}
            alt={user.name}
            style={{
              width: '100px',
              height: '100px',
              borderRadius: '50%',
              marginRight: '20px',
              border: '3px solid #4caf50'
            }}
          />
          <div style={{ flex: 1 }}>
            <h1 style={{ margin: '0 0 10px 0', color: '#2e7d32' }}>{user.name}</h1>
            <p style={{ margin: '5px 0', color: '#666' }}>ğŸ“§ {user.email}</p>
            <p style={{ margin: '5px 0', color: '#666' }}>
              ğŸ“… åŠ å…¥æ—¥æœŸ: {user.joinDate}
            </p>
          </div>
          <button
            onClick={onRefresh}
            style={{
              padding: '10px 20px',
              background: '#4caf50',
              color: 'white',
              border: 'none',
              borderRadius: '4px',
              cursor: 'pointer',
              fontWeight: 'bold'
            }}
          >
            ğŸ”„ åˆ·æ–°
          </button>
        </div>

        <div style={{
          padding: '20px',
          background: 'white',
          borderRadius: '8px',
          border: '2px solid #4caf50'
        }}>
          <h2 style={{ margin: '0 0 15px 0', color: '#2e7d32' }}>
            ğŸ“ æ–‡ç«  ({posts.length})
          </h2>
          {posts.length === 0 ? (
            <p style={{ color: '#999', textAlign: 'center', padding: '20px' }}>
              æš‚æ— æ–‡ç« 
            </p>
          ) : (
            <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>
              {posts.map(post => (
                <li
                  key={post.id}
                  style={{
                    padding: '15px',
                    marginBottom: '10px',
                    background: '#f9f9f9',
                    border: '1px solid #e0e0e0',
                    borderRadius: '4px'
                  }}
                >
                  <h3 style={{ margin: '0 0 8px 0', color: '#333' }}>{post.title}</h3>
                  <p style={{ margin: '0 0 10px 0', color: '#666', fontSize: '14px' }}>
                    {post.content}
                  </p>
                  <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                    <span style={{ fontSize: '12px', color: '#999' }}>
                      {post.date}
                    </span>
                    <button
                      onClick={() => onDeletePost(post.id)}
                      style={{
                        padding: '6px 12px',
                        background: '#f44336',
                        color: 'white',
                        border: 'none',
                        borderRadius: '4px',
                        cursor: 'pointer',
                        fontSize: '12px'
                      }}
                    >
                      ğŸ—‘ï¸ åˆ é™¤
                    </button>
                  </div>
                </li>
              ))}
            </ul>
          )}
        </div>
      </div>
    );
  };

  // å®¹å™¨ç»„ä»¶ - ä½¿ç”¨Hooksç®¡ç†çŠ¶æ€
  const [userId, setUserId] = React.useState(1);
  const [user, setUser] = React.useState(null);
  const [posts, setPosts] = React.useState([]);
  const [loading, setLoading] = React.useState(true);
  const [error, setError] = React.useState(null);

  const loadUserData = React.useCallback(async () => {
    try {
      setLoading(true);
      setError(null);

      // æ¨¡æ‹ŸAPIè°ƒç”¨
      const userData = {
        id: userId,
        name: userId === 1 ? 'Alice Johnson' : 'Bob Smith',
        email: userId === 1 ? 'alice@example.com' : 'bob@example.com',
        avatar: userId === 1 ? 'ğŸ‘©â€ğŸ’»' : 'ğŸ‘¨â€ğŸ’»',
        joinDate: '2023-01-15'
      };

      const postsData = [
        {
          id: 1,
          title: 'Reactå­¦ä¹ ç¬”è®°',
          content: 'ä»Šå¤©å­¦ä¹ äº†Reactçš„åŸºç¡€çŸ¥è¯†ï¼ŒåŒ…æ‹¬ç»„ä»¶å’Œprops...',
          date: '2024-01-15'
        },
        {
          id: 2,
          title: 'Hooksä½¿ç”¨æŠ€å·§',
          content: 'æ·±å…¥ç†è§£äº†useStateå’ŒuseEffectçš„ä½¿ç”¨åœºæ™¯...',
          date: '2024-01-20'
        }
      ];

      await new Promise(resolve => setTimeout(resolve, 800));

      setUser(userData);
      setPosts(postsData);
    } catch (err) {
      setError(err);
    } finally {
      setLoading(false);
    }
  }, [userId]);

  React.useEffect(() => {
    loadUserData();
  }, [loadUserData]);

  const updateProfile = async (updates) => {
    try {
      const updatedUser = { ...user, ...updates };
      setUser(updatedUser);
    } catch (err) {
      setError(err);
    }
  };

  const deletePost = async (postId) => {
    try {
      setPosts(prev => prev.filter(post => post.id !== postId));
    } catch (err) {
      setError(err);
    }
  };

  return (
    <div>
      <div style={{
        marginBottom: '20px',
        padding: '15px',
        background: '#e8f5e9',
        borderRadius: '8px',
        border: '2px solid #4caf50'
      }}>
        <h4 style={{ margin: '0 0 10px 0', color: '#2e7d32' }}>ğŸ’¡ å‡½æ•°ç»„ä»¶ + Hooks</h4>
        <p style={{ margin: '5px 0', fontSize: '14px' }}>
          ä½¿ç”¨ <strong>useState</strong> ç®¡ç†çŠ¶æ€ï¼Œ<strong>useEffect</strong> å¤„ç†å‰¯ä½œç”¨
        </p>
        <div style={{ marginTop: '10px' }}>
          <button
            onClick={() => setUserId(1)}
            style={{
              marginRight: '10px',
              padding: '8px 16px',
              background: userId === 1 ? '#4caf50' : 'white',
              color: userId === 1 ? 'white' : '#333',
              border: '2px solid #4caf50',
              borderRadius: '4px',
              cursor: 'pointer',
              fontWeight: 'bold'
            }}
          >
            ğŸ‘©â€ğŸ’» ç”¨æˆ· 1
          </button>
          <button
            onClick={() => setUserId(2)}
            style={{
              padding: '8px 16px',
              background: userId === 2 ? '#4caf50' : 'white',
              color: userId === 2 ? 'white' : '#333',
              border: '2px solid #4caf50',
              borderRadius: '4px',
              cursor: 'pointer',
              fontWeight: 'bold'
            }}
          >
            ğŸ‘¨â€ğŸ’» ç”¨æˆ· 2
          </button>
        </div>
      </div>

      <UserProfilePresenter
        user={user}
        posts={posts}
        loading={loading}
        error={error}
        onUpdate={updateProfile}
        onDeletePost={deletePost}
        onRefresh={loadUserData}
      />

      <div style={{
        marginTop: '20px',
        padding: '15px',
        background: '#fff3e0',
        borderRadius: '8px',
        border: '2px solid #ff9800',
        fontSize: '14px'
      }}>
        <strong>ğŸ’¡ Hooksä¼˜åŠ¿ï¼š</strong>
        <ul style={{ margin: '10px 0 0 20px', lineHeight: '1.8' }}>
          <li>æ›´ç®€æ´çš„ä»£ç ï¼ˆæ— ç±»ç»„ä»¶æ ·æ¿ä»£ç ï¼‰</li>
          <li>æ›´å®¹æ˜“æµ‹è¯•å’Œå¤ç”¨é€»è¾‘</li>
          <li>æ›´å¥½çš„TypeScriptæ”¯æŒ</li>
          <li>æ›´å°‘çš„æ¸²æŸ“ä¼˜åŒ–é—®é¢˜</li>
        </ul>
      </div>
    </div>
  );
}
`}
  scope={{ React }}
/>

### 2.3 å¤ç”¨å®¹å™¨æ¨¡å¼

<LiveCode
  code={`
function ReusableContainerDemo() {
  // ========== HOC Pattern ==========
  const withData = (WrappedComponent, fetcher) => {
    return function DataContainer(props) {
      const [data, setData] = React.useState(null);
      const [loading, setLoading] = React.useState(true);
      const [error, setError] = React.useState(null);

      const loadData = React.useCallback(async () => {
        try {
          setLoading(true);
          setError(null);
          const result = await fetcher(props);
          setData(result);
        } catch (err) {
          setError(err);
        } finally {
          setLoading(false);
        }
      }, [fetcher, props.id, props.category]);

      React.useEffect(() => {
        loadData();
      }, [loadData]);

      return (
        <WrappedComponent
          {...props}
          data={data}
          loading={loading}
          error={error}
          refetch={loadData}
        />
      );
    };
  };

  // ========== Render Props Pattern ==========
  const DataContainer = ({ fetcher, render, deps = [] }) => {
    const [data, setData] = React.useState(null);
    const [loading, setLoading] = React.useState(true);
    const [error, setError] = React.useState(null);

    const loadData = React.useCallback(async () => {
      try {
        setLoading(true);
        setError(null);
        const result = await fetcher();
        setData(result);
      } catch (err) {
        setError(err);
      } finally {
        setLoading(false);
      }
    }, deps);

    React.useEffect(() => {
      loadData();
    }, [loadData]);

    return render({ data, loading, error, refetch: loadData });
  };

  // ========== Demo State ==========
  const [currentDemo, setCurrentDemo] = React.useState('hoc');
  const [filter, setFilter] = React.useState('all');
  const [category, setCategory] = React.useState('electronics');

  // ========== Mock Data Fetchers ==========
  const fetchUsers = React.useCallback((props) => {
    const allUsers = [
      { id: 1, name: 'Alice', role: 'Admin', category: 'electronics' },
      { id: 2, name: 'Bob', role: 'User', category: 'books' },
      { id: 3, name: 'Charlie', role: 'Editor', category: 'electronics' },
      { id: 4, name: 'Diana', role: 'User', category: 'clothing' },
      { id: 5, name: 'Eve', role: 'Admin', category: 'electronics' }
    ];

    return new Promise(resolve => {
      setTimeout(() => {
        let filtered = allUsers;
        if (props?.filter === 'admin') {
          filtered = allUsers.filter(u => u.role === 'Admin');
        }
        if (props?.category) {
          filtered = filtered.filter(u => u.category === props.category);
        }
        resolve(filtered);
      }, 800);
    });
  }, []);

  const fetchProducts = React.useCallback(() => {
    const products = [
      { id: 1, name: 'Laptop', price: 999, category: 'electronics' },
      { id: 2, name: 'Book', price: 20, category: 'books' },
      { id: 3, name: 'Phone', price: 699, category: 'electronics' },
      { id: 4, name: 'Shirt', price: 30, category: 'clothing' }
    ];

    return new Promise(resolve => {
      setTimeout(() => {
        resolve(products.filter(p => p.category === category));
      }, 600);
    });
  }, [category]);

  // ========== HOC Example ==========
  const UserListPresenter = ({ data, loading, error, refetch }) => {
    if (loading) {
      return (
        <div style={{
          padding: '20px',
          textAlign: 'center',
          background: '#fff3e0',
          borderRadius: '8px',
          border: '2px solid #ff9800'
        }}>
          <div style={{ fontSize: '24px', marginBottom: '10px' }}>â³</div>
          <p style={{ color: '#e65100', margin: 0 }}>åŠ è½½ç”¨æˆ·æ•°æ®...</p>
        </div>
      );
    }

    if (error) {
      return (
        <div style={{
          padding: '20px',
          textAlign: 'center',
          background: '#ffebee',
          borderRadius: '8px',
          border: '2px solid #f44336'
        }}>
          <div style={{ fontSize: '24px', marginBottom: '10px' }}>âŒ</div>
          <p style={{ color: '#c62828', margin: '0 0 10px 0' }}>åŠ è½½å¤±è´¥!</p>
          <button
            onClick={refetch}
            style={{
              padding: '8px 16px',
              background: '#f44336',
              color: 'white',
              border: 'none',
              borderRadius: '4px',
              cursor: 'pointer'
            }}
          >
            é‡è¯•
          </button>
        </div>
      );
    }

    return (
      <div style={{
        background: 'white',
        borderRadius: '8px',
        padding: '20px',
        border: '2px solid #4caf50'
      }}>
        <h3 style={{ margin: '0 0 15px 0', color: '#2e7d32' }}>
          ğŸ“‹ ç”¨æˆ·åˆ—è¡¨ (HOCæ¨¡å¼)
        </h3>
        {data && data.length > 0 ? (
          <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>
            {data.map(user => (
              <li
                key={user.id}
                style={{
                  padding: '12px',
                  marginBottom: '8px',
                  background: '#f5f5f5',
                  borderRadius: '4px',
                  display: 'flex',
                  justifyContent: 'space-between',
                  alignItems: 'center'
                }}
              >
                <div>
                  <strong>{user.name}</strong>
                  <span style={{ marginLeft: '10px', color: '#666' }}>
                    {user.role}
                  </span>
                </div>
                <span style={{
                  fontSize: '12px',
                  padding: '4px 8px',
                  background: '#e3f2fd',
                  color: '#1976d2',
                  borderRadius: '4px'
                }}>
                  {user.category}
                </span>
              </li>
            ))}
          </ul>
        ) : (
          <p style={{ textAlign: 'center', color: '#999' }}>æš‚æ— æ•°æ®</p>
        )}
      </div>
    );
  };

  const UserListContainer = withData(UserListPresenter, fetchUsers);

  // ========== Render Props Example ==========
  const ProductList = ({ data, loading, error, refetch }) => {
    if (loading) {
      return (
        <div style={{
          padding: '20px',
          textAlign: 'center',
          background: '#fff3e0',
          borderRadius: '8px',
          border: '2px solid #ff9800'
        }}>
          <div style={{ fontSize: '24px', marginBottom: '10px' }}>â³</div>
          <p style={{ color: '#e65100', margin: 0 }}>åŠ è½½äº§å“æ•°æ®...</p>
        </div>
      );
    }

    if (error) {
      return (
        <div style={{
          padding: '20px',
          textAlign: 'center',
          background: '#ffebee',
          borderRadius: '8px',
          border: '2px solid #f44336'
        }}>
          <div style={{ fontSize: '24px', marginBottom: '10px' }}>âŒ</div>
          <p style={{ color: '#c62828', margin: '0 0 10px 0' }}>åŠ è½½å¤±è´¥!</p>
          <button
            onClick={refetch}
            style={{
              padding: '8px 16px',
              background: '#f44336',
              color: 'white',
              border: 'none',
              borderRadius: '4px',
              cursor: 'pointer'
            }}
          >
            é‡è¯•
          </button>
        </div>
      );
    }

    return (
      <div style={{
        background: 'white',
        borderRadius: '8px',
        padding: '20px',
        border: '2px solid #9c27b0'
      }}>
        <h3 style={{ margin: '0 0 15px 0', color: '#6a1b9a' }}>
          ğŸ›ï¸ äº§å“åˆ—è¡¨ (Render Propsæ¨¡å¼)
        </h3>
        {data && data.length > 0 ? (
          <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>
            {data.map(product => (
              <li
                key={product.id}
                style={{
                  padding: '12px',
                  marginBottom: '8px',
                  background: '#f5f5f5',
                  borderRadius: '4px',
                  display: 'flex',
                  justifyContent: 'space-between',
                  alignItems: 'center'
                }}
              >
                <strong>{product.name}</strong>
                <span style={{
                  fontSize: '18px',
                  fontWeight: 'bold',
                  color: '#2e7d32'
                }}>
                  ${product.price}
                </span>
              </li>
            ))}
          </ul>
        ) : (
          <p style={{ textAlign: 'center', color: '#999' }}>æš‚æ— äº§å“</p>
        )}
      </div>
    );
  };

  // ========== Render ==========
  return (
    <div>
      {/* Header */}
      <div style={{
        marginBottom: '20px',
        padding: '15px',
        background: '#e1f5fe',
        borderRadius: '8px',
        border: '2px solid #0288d1'
      }}>
        <h4 style={{ margin: '0 0 10px 0', color: '#01579b' }}>
          ğŸ’¡ å¯å¤ç”¨å®¹å™¨æ¨¡å¼
        </h4>
        <p style={{ margin: '0', fontSize: '14px', lineHeight: '1.6' }}>
          <strong>HOCæ¨¡å¼</strong>ï¼šåŒ…è£…ç»„ä»¶ï¼Œæ³¨å…¥æ•°æ®é€»è¾‘<br/>
          <strong>Render Props</strong>ï¼šå‡½æ•°ä½œä¸ºchildrenï¼Œçµæ´»ä¼ é€’æ•°æ®
        </p>
      </div>

      {/* Demo Selector */}
      <div style={{
        display: 'flex',
        gap: '10px',
        marginBottom: '20px'
      }}>
        <button
          onClick={() => setCurrentDemo('hoc')}
          style={{
            flex: 1,
            padding: '12px',
            background: currentDemo === 'hoc' ? '#4caf50' : 'white',
            color: currentDemo === 'hoc' ? 'white' : '#333',
            border: '2px solid #4caf50',
            borderRadius: '6px',
            cursor: 'pointer',
            fontWeight: 'bold',
            fontSize: '14px'
          }}
        >
          ğŸ”§ HOC æ¨¡å¼
        </button>
        <button
          onClick={() => setCurrentDemo('render-props')}
          style={{
            flex: 1,
            padding: '12px',
            background: currentDemo === 'render-props' ? '#9c27b0' : 'white',
            color: currentDemo === 'render-props' ? 'white' : '#333',
            border: '2px solid #9c27b0',
            borderRadius: '6px',
            cursor: 'pointer',
            fontWeight: 'bold',
            fontSize: '14px'
          }}
        >
          ğŸ¯ Render Props æ¨¡å¼
        </button>
      </div>

      {/* Controls */}
      {currentDemo === 'hoc' ? (
        <div style={{
          marginBottom: '20px',
          padding: '15px',
          background: '#f5f5f5',
          borderRadius: '8px',
          border: '1px solid #ddd'
        }}>
          <h4 style={{ margin: '0 0 10px 0', fontSize: '14px' }}>HOC æ§åˆ¶é¢æ¿</h4>
          <div style={{ display: 'flex', gap: '10px' }}>
            <button
              onClick={() => setFilter('all')}
              style={{
                flex: 1,
                padding: '8px',
                background: filter === 'all' ? '#4caf50' : 'white',
                color: filter === 'all' ? 'white' : '#333',
                border: '1px solid #4caf50',
                borderRadius: '4px',
                cursor: 'pointer',
                fontSize: '12px'
              }}
            >
              å…¨éƒ¨ç”¨æˆ·
            </button>
            <button
              onClick={() => setFilter('admin')}
              style={{
                flex: 1,
                padding: '8px',
                background: filter === 'admin' ? '#4caf50' : 'white',
                color: filter === 'admin' ? 'white' : '#333',
                border: '1px solid #4caf50',
                borderRadius: '4px',
                cursor: 'pointer',
                fontSize: '12px'
              }}
            >
              ä»…ç®¡ç†å‘˜
            </button>
            <button
              onClick={() => setCategory('electronics')}
              style={{
                flex: 1,
                padding: '8px',
                background: category === 'electronics' ? '#4caf50' : 'white',
                color: category === 'electronics' ? 'white' : '#333',
                border: '1px solid #4caf50',
                borderRadius: '4px',
                cursor: 'pointer',
                fontSize: '12px'
              }}
            >
              ç”µå­äº§å“
            </button>
          </div>
        </div>
      ) : (
        <div style={{
          marginBottom: '20px',
          padding: '15px',
          background: '#f5f5f5',
          borderRadius: '8px',
          border: '1px solid #ddd'
        }}>
          <h4 style={{ margin: '0 0 10px 0', fontSize: '14px' }}>Render Props æ§åˆ¶é¢æ¿</h4>
          <div style={{ display: 'flex', gap: '10px' }}>
            <button
              onClick={() => setCategory('electronics')}
              style={{
                flex: 1,
                padding: '8px',
                background: category === 'electronics' ? '#9c27b0' : 'white',
                color: category === 'electronics' ? 'white' : '#333',
                border: '1px solid #9c27b0',
                borderRadius: '4px',
                cursor: 'pointer',
                fontSize: '12px'
              }}
            >
              ç”µå­äº§å“
            </button>
            <button
              onClick={() => setCategory('books')}
              style={{
                flex: 1,
                padding: '8px',
                background: category === 'books' ? '#9c27b0' : 'white',
                color: category === 'books' ? 'white' : '#333',
                border: '1px solid #9c27b0',
                borderRadius: '4px',
                cursor: 'pointer',
                fontSize: '12px'
              }}
            >
              å›¾ä¹¦
            </button>
            <button
              onClick={() => setCategory('clothing')}
              style={{
                flex: 1,
                padding: '8px',
                background: category === 'clothing' ? '#9c27b0' : 'white',
                color: category === 'clothing' ? 'white' : '#333',
                border: '1px solid #9c27b0',
                borderRadius: '4px',
                cursor: 'pointer',
                fontSize: '12px'
              }}
            >
              æœè£…
            </button>
          </div>
        </div>
      )}

      {/* Demo Component */}
      {currentDemo === 'hoc' ? (
        <UserListContainer filter={filter} category={category} />
      ) : (
        <DataContainer
          fetcher={fetchProducts}
          deps={[category]}
        >
          {(props) => <ProductList {...props} />}
        </DataContainer>
      )}

      {/* Explanation */}
      <div style={{
        marginTop: '20px',
        padding: '15px',
        background: '#fff3e0',
        borderRadius: '8px',
        border: '2px solid #ff9800',
        fontSize: '14px'
      }}>
        <strong>ğŸ’¡ æ¨¡å¼å¯¹æ¯”ï¼š</strong>
        <ul style={{ margin: '10px 0 0 20px', lineHeight: '1.8' }}>
          <li><strong>HOC</strong>ï¼šåŒ…è£…ç°æœ‰ç»„ä»¶ï¼Œç”Ÿæˆæ–°ç»„ä»¶ï¼Œå¯å¤ç”¨ä½†å±‚çº§å¢åŠ </li>
          <li><strong>Render Props</strong>ï¼šé€šè¿‡childrenå‡½æ•°ä¼ é€’æ•°æ®ï¼Œæ›´çµæ´»ä½†éœ€è¦å‡½æ•°å¼æ€ç»´</li>
          <li><strong>ç°ä»£æ–¹æ¡ˆ</strong>ï¼šè‡ªå®šä¹‰Hooksæ›´ç®€æ´ï¼Œæ˜¯æ¨èçš„å¤ç”¨æ–¹å¼</li>
        </ul>
      </div>
    </div>
  );
}
`}
  scope={{ React }}
/>

---

## 3. è¿›é˜¶æ¨¡å¼

### 3.1 çŠ¶æ€æå‡

<CodeBlock>

```jsx
// åœ¨å®¹å™¨ä¸­ç®¡ç†å…±äº«çŠ¶æ€
class FormContainer extends React.Component {
  state = {
    values: {
      name: '',
      email: '',
      password: ''
    },
    errors: {},
    touched: {}
  };

  handleChange = (field, value) => {
    this.setState(prev => ({
      values: { ...prev.values, [field]: value }
    }));

    // å®æ—¶éªŒè¯
    const error = this.validateField(field, value);
    this.setState(prev => ({
      errors: { ...prev.errors, [field]: error }
    }));
  };

  handleBlur = (field) => {
    this.setState(prev => ({
      touched: { ...prev.touched, [field]: true }
    }));
  };

  handleSubmit = async (e) => {
    e.preventDefault();

    // æäº¤å‰éªŒè¯æ‰€æœ‰å­—æ®µ
    const newErrors = {};
    Object.keys(this.state.values).forEach(field => {
      const error = this.validateField(field, this.state.values[field]);
      if (error) newErrors[field] = error;
    });

    if (Object.keys(newErrors).length > 0) {
      this.setState({ errors: newErrors });
      return;
    }

    // æäº¤æ•°æ®
    try {
      await submitForm(this.state.values);
      this.props.onSuccess();
    } catch (error) {
      this.setState({ errors: { submit: error.message } });
    }
  };

  validateField = (field, value) => {
    switch (field) {
      case 'name':
        return !value ? 'Name is required' : '';
      case 'email':
        return !/\S+@\S+\.\S+/.test(value) ? 'Invalid email' : '';
      case 'password':
        return value.length < 6 ? 'Password too short' : '';
      default:
        return '';
    }
  };

  render() {
    return (
      <FormPresenter
        values={this.state.values}
        errors={this.state.errors}
        touched={this.state.touched}
        onChange={this.handleChange}
        onBlur={this.handleBlur}
        onSubmit={this.handleSubmit}
      />
    );
  }
}

function FormPresenter({
  values,
  errors,
  touched,
  onChange,
  onBlur,
  onSubmit
}) {
  return (
    <form onSubmit={onSubmit}>
      <div>
        <label>Name</label>
        <input
          value={values.name}
          onChange={(e) => onChange('name', e.target.value)}
          onBlur={() => onBlur('name')}
        />
        {touched.name && errors.name && <span>{errors.name}</span>}
      </div>

      <div>
        <label>Email</label>
        <input
          value={values.email}
          onChange={(e) => onChange('email', e.target.value)}
          onBlur={() => onBlur('email')}
        />
        {touched.email && errors.email && <span>{errors.email}</span>}
      </div>

      <div>
        <label>Password</label>
        <input
          type="password"
          value={values.password}
          onChange={(e) => onChange('password', e.target.value)}
          onBlur={() => onBlur('password')}
        />
        {touched.password && errors.password && <span>{errors.password}</span>}
      </div>

      {errors.submit && <div className="error">{errors.submit}</div>}

      <button type="submit">Submit</button>
    </form>
  );
}
```

</CodeBlock>

### 3.2 å¤šä¸ªå­å®¹å™¨

<CodeBlock>

```jsx
// ä»ªè¡¨æ¿å®¹å™¨ - ç®¡ç†å¤šä¸ªå­åŒºåŸŸ
class DashboardContainer extends React.Component {
  state = {
    stats: null,
    recentActivity: [],
    notifications: [],
    loading: true
  };

  componentDidMount() {
    this.loadDashboardData();
  }

  loadDashboardData = async () => {
    try {
      this.setState({ loading: true });
      const [stats, activity, notifications] = await Promise.all([
        fetchStats(),
        fetchRecentActivity(),
        fetchNotifications()
      ]);
      this.setState({ stats, recentActivity, notifications, loading: false });
    } catch (error) {
      this.setState({ error, loading: false });
    }
  };

  markNotificationAsRead = async (id) => {
    await markNotificationRead(id);
    this.setState(prev => ({
      notifications: prev.notifications.map(notif =>
        notif.id === id ? { ...notif, read: true } : notif
      )
    }));
  };

  render() {
    const { stats, recentActivity, notifications, loading, error } = this.state;

    if (loading) return <div>Loading dashboard...</div>;
    if (error) return <div>Error loading dashboard</div>;

    return (
      <DashboardPresenter>
        <StatsPanel stats={stats} />
        <ActivityFeed activities={recentActivity} />
        <NotificationCenter
          notifications={notifications}
          onMarkAsRead={this.markNotificationAsRead}
        />
      </DashboardPresenter>
    );
  }
}

function DashboardPresenter({ children }) {
  return (
    <div className="dashboard">
      <header className="dashboard-header">
        <h1>Dashboard</h1>
      </header>
      <div className="dashboard-grid">
        {children}
      </div>
    </div>
  );
}

// å­å®¹å™¨ç»„ä»¶
function StatsPanel({ stats }) {
  return (
    <div className="dashboard-card">
      <h2>Statistics</h2>
      <div className="stats-grid">
        <StatItem label="Users" value={stats.userCount} />
        <StatItem label="Orders" value={stats.orderCount} />
        <StatItem label="Revenue" value={stats.revenue} />
      </div>
    </div>
  );
}

function ActivityFeed({ activities }) {
  return (
    <div className="dashboard-card">
      <h2>Recent Activity</h2>
      <ul className="activity-list">
        {activities.map(activity => (
          <li key={activity.id}>
            <span>{activity.user}</span> {activity.action}
          </li>
        ))}
      </ul>
    </div>
  );
}

function NotificationCenter({ notifications, onMarkAsRead }) {
  return (
    <div className="dashboard-card">
      <h2>Notifications</h2>
      <ul className="notification-list">
        {notifications.map(notification => (
          <li key={notification.id} className={notification.read ? 'read' : 'unread'}>
            <span>{notification.message}</span>
            {!notification.read && (
              <button onClick={() => onMarkAsRead(notification.id)}>
                Mark as read
              </button>
            )}
          </li>
        ))}
      </ul>
    </div>
  );
}
```

</CodeBlock>

### 3.3 çŠ¶æ€æœºæ¨¡å¼

<CodeBlock>

```jsx
// è´­ç‰©è½¦å®¹å™¨ - ä½¿ç”¨çŠ¶æ€æœº
class ShoppingCartContainer extends React.Component {
  state = {
    status: 'loading', // loading, ready, error
    items: [],
    error: null
  };

  transition = (newStatus, data = null) => {
    this.setState(prev => {
      const newState = { ...prev, status: newStatus };
      if (data) newState[data.key] = data.value;
      return newState;
    });
  };

  loadCart = async () => {
    this.transition('loading');
    try {
      const items = await fetchCartItems();
      this.transition('ready', { key: 'items', value: items });
    } catch (error) {
      this.transition('error', { key: 'error', value: error });
    }
  };

  addItem = async (item) => {
    this.transition('loading');
    try {
      const newItem = await addToCart(item);
      this.setState(prev => ({
        status: 'ready',
        items: [...prev.items, newItem]
      }));
    } catch (error) {
      this.transition('error', { key: 'error', value: error });
    }
  };

  removeItem = async (itemId) => {
    this.transition('loading');
    try {
      await removeFromCart(itemId);
      this.setState(prev => ({
        status: 'ready',
        items: prev.items.filter(item => item.id !== itemId)
      }));
    } catch (error) {
      this.transition('error', { key: 'error', value: error });
    }
  };

  updateQuantity = async (itemId, quantity) => {
    this.transition('loading');
    try {
      const updatedItem = await updateCartItem(itemId, quantity);
      this.setState(prev => ({
        status: 'ready',
        items: prev.items.map(item =>
          item.id === itemId ? updatedItem : item
        )
      }));
    } catch (error) {
      this.transition('error', { key: 'error', value: error });
    }
  };

  checkout = async () => {
    this.transition('loading');
    try {
      await checkout();
      this.transition('ready', { key: 'items', value: [] });
    } catch (error) {
      this.transition('error', { key: 'error', value: error });
    }
  };

  componentDidMount() {
    this.loadCart();
  }

  render() {
    const { status, items, error } = this.state;

    return (
      <ShoppingCartPresenter
        status={status}
        items={items}
        error={error}
        onAddItem={this.addItem}
        onRemoveItem={this.removeItem}
        onUpdateQuantity={this.updateQuantity}
        onCheckout={this.checkout}
        onRetry={this.loadCart}
      />
    );
  }
}

function ShoppingCartPresenter({
  status,
  items,
  error,
  onAddItem,
  onRemoveItem,
  onUpdateQuantity,
  onCheckout,
  onRetry
}) {
  if (status === 'loading') {
    return <div className="loading">Loading cart...</div>;
  }

  if (status === 'error') {
    return (
      <div className="error">
        <p>Error: {error.message}</p>
        <button onClick={onRetry}>Retry</button>
      </div>
    );
  }

  if (status === 'ready') {
    return (
      <div className="shopping-cart">
        <h1>Shopping Cart ({items.length} items)</h1>
        {items.length === 0 ? (
          <p>Cart is empty</p>
        ) : (
          <>
            <ul className="cart-items">
              {items.map(item => (
                <CartItem
                  key={item.id}
                  item={item}
                  onRemove={onRemoveItem}
                  onUpdateQuantity={onUpdateQuantity}
                />
              ))}
            </ul>
            <button onClick={onCheckout}>Checkout</button>
          </>
        )}
      </div>
    );
  }

  return null;
}

function CartItem({ item, onRemove, onUpdateQuantity }) {
  return (
    <li className="cart-item">
      <img src={item.image} alt={item.name} />
      <div className="item-details">
        <h3>{item.name}</h3>
        <p>${item.price}</p>
      </div>
      <div className="item-actions">
        <input
          type="number"
          min="1"
          value={item.quantity}
          onChange={(e) => onUpdateQuantity(item.id, parseInt(e.target.value))}
        />
        <button onClick={() => onRemove(item.id)}>Remove</button>
      </div>
    </li>
  );
}
```

</CodeBlock>

---

## 4. ä¸ç°ä»£Reactå¯¹æ¯”

### 4.1 Hooks vs å®¹å™¨-å±•ç¤ºæ¨¡å¼

<Compare>

```jsx
// ä¼ ç»Ÿå®¹å™¨-å±•ç¤ºæ¨¡å¼
class UserListContainer extends React.Component {
  state = { users: [], loading: true };

  componentDidMount() {
    fetchUsers().then(users => {
      this.setState({ users, loading: false });
    });
  }

  render() {
    return (
      <UserListPresenter
        users={this.state.users}
        loading={this.state.loading}
      />
    );
  }
}

function UserListPresenter({ users, loading }) {
  // åªè´Ÿè´£æ¸²æŸ“
}

// ç°ä»£Hooksæ–¹å¼
function UserList() {
  const [users, setUsers] = React.useState([]);
  const [loading, setLoading] = React.useState(true);

  React.useEffect(() => {
    fetchUsers().then(setUsers).finally(() => setLoading(false));
  }, []);

  // é€»è¾‘å’ŒUIåœ¨åŒä¸€ç»„ä»¶ä¸­
  if (loading) return <div>Loading...</div>;
  return (
    <ul>
      {users.map(user => <li key={user.id}>{user.name}</li>)}
    </ul>
  );
}

// å¯¹æ¯”æ€»ç»“
1. ä»£ç é‡: Hooks < å®¹å™¨-å±•ç¤º
2. å¤æ‚åº¦: Hooks < å®¹å™¨-å±•ç¤º
3. å­¦ä¹ æ›²çº¿: Hooksæ›´å®¹æ˜“
4. å¤ç”¨æ€§: Hooksæ›´å¥½
5. æ€§èƒ½: ç›¸ä¼¼
6. å¯è¯»æ€§: Hooksæ›´å¥½
7. è¿ç§»æˆæœ¬: æ— éœ€è¿ç§»ï¼Œæ–°é¡¹ç›®ç”¨Hooks
```

</Compare>

### 4.2 é€‰æ‹©æŒ‡å—

<CodeBlock>

```jsx
// ç»§ç»­ä½¿ç”¨å®¹å™¨-å±•ç¤ºæ¨¡å¼çš„æƒ…å†µ
1. ç°æœ‰å¤§å‹é¡¹ç›®å·²é‡‡ç”¨æ­¤æ¨¡å¼
2. å›¢é˜Ÿç†Ÿæ‚‰æ­¤æ¨¡å¼
3. å¤æ‚çš„çŠ¶æ€è½¬æ¢é€»è¾‘
4. éœ€è¦ç²¾ç¡®æ§åˆ¶æ¸²æŸ“æ—¶æœº
5. å¤šäººåä½œé¡¹ç›®
6. éœ€è¦è¯¦ç»†çš„æ¶æ„æ–‡æ¡£

// ä½¿ç”¨Hooksçš„æƒ…å†µ (æ¨è)
1. æ–°é¡¹ç›®
2. ç®€å•çš„çŠ¶æ€ç®¡ç†
3. é€»è¾‘å¤ç”¨éœ€æ±‚
4. ç°ä»£Reactå¼€å‘
5. æ›´å¥½çš„å¼€å‘ä½“éªŒ
6. TypeScriptæ”¯æŒ
```

</CodeBlock>

### 4.3 æ··åˆæ¨¡å¼

<CodeBlock>

```jsx
// å¯ä»¥ç»“åˆä½¿ç”¨
function UserProfileContainer({ userId }) {
  // ä½¿ç”¨è‡ªå®šä¹‰Hook
  const { user, posts, loading, error, updateUser } = useUserProfile(userId);

  return (
    <UserProfilePresenter
      user={user}
      posts={posts}
      loading={loading}
      error={error}
      onUpdate={updateUser}
    />
  );
}

// ä½¿ç”¨è‡ªå®šä¹‰Hook
function useUserProfile(userId) {
  const [user, setUser] = React.useState(null);
  const [posts, setPosts] = React.useState([]);
  const [loading, setLoading] = React.useState(true);
  const [error, setError] = React.useState(null);

  React.useEffect(() => {
    loadUserProfile();
  }, [userId]);

  const loadUserProfile = async () => {
    try {
      setLoading(true);
      const [userData, postsData] = await Promise.all([
        fetchUser(userId),
        fetchUserPosts(userId)
      ]);
      setUser(userData);
      setPosts(postsData);
    } catch (err) {
      setError(err);
    } finally {
      setLoading(false);
    }
  };

  const updateUser = async (updates) => {
    const updatedUser = await updateUser(userId, updates);
    setUser(updatedUser);
  };

  return { user, posts, loading, error, updateUser, loadUserProfile };
}
```

</CodeBlock>

---

## 5. æœ€ä½³å®è·µ

### 5.1 æ¸…æ™°çš„å‘½å

<CodeBlock>

```jsx
// âœ… å¥½çš„å‘½å
// å®¹å™¨ç»„ä»¶
UserListContainer
ProfileContainer
DashboardContainer
ShoppingCartContainer
DataLoaderContainer

// å±•ç¤ºç»„ä»¶
UserList
Profile
Dashboard
ShoppingCart
UserCard

// é¿å…æ··æ·†
// âŒ å·®çš„å‘½å
UserList
UserListComponent  // å†—ä½™
ContainerUserList  // é¡ºåºæ··ä¹±
```

</CodeBlock>

### 5.2 Propsä¼ é€’ä¼˜åŒ–

<CodeBlock>

```jsx
// âœ… ä½¿ç”¨è§£æ„å’Œå±•å¼€è¿ç®—ç¬¦
function UserListContainer(props) {
  const { userId, onUserSelect, ...otherProps } = props;
  const [users, setUsers] = React.useState([]);

  // é€»è¾‘...

  return (
    <UserList
      users={users}
      onUserSelect={onUserSelect}
      {...otherProps}  // ä¼ é€’å…¶ä»–props
    />
  );
}

// âœ… åªä¼ é€’å¿…è¦çš„props
<PresenterComponent
  data={data}           // å¿…è¦æ•°æ®
  loading={loading}     // çŠ¶æ€
  error={error}         // é”™è¯¯
  onAction={handler}    // äº‹ä»¶å¤„ç†
  // ä¸ä¼ é€’: onClick, onChangeç­‰å†…éƒ¨props
/>
```

</CodeBlock>

### 5.3 é”™è¯¯å¤„ç†

<CodeBox>

```jsx
// âœ… æä¾›ä¸€è‡´çš„é”™è¯¯å¤„ç†
function DataContainer({ fetcher, onError }) {
  const [data, setData] = React.useState(null);
  const [loading, setLoading] = React.useState(true);
  const [error, setError] = React.useState(null);

  React.useEffect(() => {
    loadData();
  }, []);

  const loadData = async () => {
    try {
      setLoading(true);
      setError(null);
      const result = await fetcher();
      setData(result);
    } catch (err) {
      setError(err);
      onError?.(err);
    } finally {
      setLoading(false);
    }
  };

  return (
    <DataPresenter
      data={data}
      loading={loading}
      error={error}
      onRetry={loadData}
    />
  );
}
```

</CodeBox>

### 5.4 æ€§èƒ½ä¼˜åŒ–

<CodeBlock>

```jsx
// âœ… ä½¿ç”¨React.memoä¼˜åŒ–å±•ç¤ºç»„ä»¶
const UserListPresenter = React.memo(function UserListPresenter({
  users,
  loading,
  error,
  onRefresh
}) {
  if (loading) return <div>Loading...</div>;
  if (error) return <div>Error: {error.message}</div>;

  return (
    <ul>
      {users.map(user => (
        <li key={user.id}>{user.name}</li>
      ))}
    </ul>
  );
});

// âœ… ä½¿ç”¨useCallbackä¼˜åŒ–äº‹ä»¶å¤„ç†
function UserListContainer({ userId }) {
  const [users, setUsers] = React.useState([]);

  const handleUserClick = React.useCallback((user) => {
    console.log('User clicked:', user);
  }, []);

  return (
    <UserListPresenter
      users={users}
      onUserClick={handleUserClick}
    />
  );
}
```

</CodeBlock>

---

## 6. å®é™…åº”ç”¨æ¡ˆä¾‹

### 6.1 å®Œæ•´æœç´¢ç»„ä»¶

<CodeBlock>

```jsx
// å®¹å™¨ç»„ä»¶
class SearchContainer extends React.Component {
  state = {
    query: '',
    results: [],
    loading: false,
    error: null,
    suggestions: []
  };

  debouncedSearch = React.useMemo(
    () => debounce(this.performSearch, 300),
    []
  );

  handleQueryChange = (query) => {
    this.setState({ query });
    if (query.length > 2) {
      this.debouncedSearch(query);
    }
  };

  performSearch = async (query) => {
    this.setState({ loading: true, error: null });
    try {
      const [results, suggestions] = await Promise.all([
        searchAPI(query),
        getSuggestions(query)
      ]);
      this.setState({ results, suggestions, loading: false });
    } catch (error) {
      this.setState({ error, loading: false });
    }
  };

  clearSearch = () => {
    this.setState({
      query: '',
      results: [],
      suggestions: []
    });
  };

  render() {
    return (
      <SearchPresenter
        query={this.state.query}
        results={this.state.results}
        suggestions={this.state.suggestions}
        loading={this.state.loading}
        error={this.state.error}
        onQueryChange={this.handleQueryChange}
        onClear={this.clearSearch}
        onResultSelect={this.handleResultSelect}
      />
    );
  }
}

// å±•ç¤ºç»„ä»¶
function SearchPresenter({
  query,
  results,
  suggestions,
  loading,
  error,
  onQueryChange,
  onClear,
  onResultSelect
}) {
  return (
    <div className="search-container">
      <div className="search-box">
        <input
          type="text"
          value={query}
          onChange={(e) => onQueryChange(e.target.value)}
          placeholder="Search..."
        />
        {query && (
          <button onClick={onClear}>Clear</button>
        )}
        {loading && <div className="spinner" />}
      </div>

      {error && (
        <div className="error-message">
          Error: {error.message}
        </div>
      )}

      {suggestions.length > 0 && (
        <div className="suggestions">
          {suggestions.map(suggestion => (
            <div
              key={suggestion}
              className="suggestion-item"
              onClick={() => onQueryChange(suggestion)}
            >
              {suggestion}
            </div>
          ))}
        </div>
      )}

      {results.length > 0 && (
        <div className="search-results">
          <h3>Results ({results.length})</h3>
          {results.map(result => (
            <div
              key={result.id}
              className="result-item"
              onClick={() => onResultSelect(result)}
            >
              <h4>{result.title}</h4>
              <p>{result.description}</p>
            </div>
          ))}
        </div>
      )}
    </div>
  );
}

// è¾…åŠ©å‡½æ•°
function debounce(func, delay) {
  let timeoutId;
  return (...args) => {
    clearTimeout(timeoutId);
    timeoutId = setTimeout(() => func(...args), delay);
  };
}
```

</CodeBlock>

### 6.2 æ— é™æ»šåŠ¨åˆ—è¡¨

<CodeBlock>

```jsx
// å®¹å™¨ç»„ä»¶
class InfiniteListContainer extends React.Component {
  state = {
    items: [],
    loading: false,
    hasMore: true,
    error: null,
    page: 0
  };

  observer = React.useRef(null);

  loadMore = async () => {
    const { page, loading, hasMore } = this.state;

    if (loading || !hasMore) return;

    this.setState({ loading: true, error: null });

    try {
      const newItems = await fetchItems(page, this.props.pageSize);
      this.setState(prev => ({
        items: [...prev.items, ...newItems],
        page: prev.page + 1,
        loading: false,
        hasMore: newItems.length === this.props.pageSize
      }));
    } catch (error) {
      this.setState({ error, loading: false });
    }
  };

  componentDidMount() {
    this.loadMore();

    // åˆ›å»ºIntersection Observer
    this.observer.current = new IntersectionObserver(
      (entries) => {
        if (entries[0].isIntersecting) {
          this.loadMore();
        }
      },
      { threshold: 1.0 }
    );

    // è§‚å¯Ÿåº•éƒ¨å…ƒç´ 
    if (this.bottomElement) {
      this.observer.current.observe(this.bottomElement);
    }
  }

  componentWillUnmount() {
    if (this.observer.current) {
      this.observer.current.disconnect();
    }
  }

  render() {
    const { items, loading, error, hasMore } = this.state;

    return (
      <InfiniteListPresenter
        items={items}
        loading={loading}
        error={error}
        hasMore={hasMore}
        onRetry={this.loadMore}
        bottomElementRef={(el) => (this.bottomElement = el)}
      />
    );
  }
}

// å±•ç¤ºç»„ä»¶
function InfiniteListPresenter({
  items,
  loading,
  error,
  hasMore,
  onRetry,
  bottomElementRef
}) {
  return (
    <div className="infinite-list">
      {error && (
        <div className="error-message">
          <p>Error loading items</p>
          <button onClick={onRetry}>Retry</button>
        </div>
      )}

      <ul className="list-items">
        {items.map(item => (
          <li key={item.id} className="list-item">
            {item.title}
          </li>
        ))}
      </ul>

      {loading && (
        <div className="loading-indicator">
          <div className="spinner" />
          <p>Loading more...</p>
        </div>
      )}

      {!hasMore && items.length > 0 && (
        <div className="end-message">
          <p>You've reached the end!</p>
        </div>
      )}

      <div ref={bottomElementRef} className="scroll-sentinel" />
    </div>
  );
}
```

</CodeBlock>

---

## 7. å®è·µç»ƒä¹ 

### ç»ƒä¹ 1ï¼šå®ç°æ–‡ä»¶ä¸Šä¼ ç»„ä»¶

<Expandable title="ç‚¹å‡»æŸ¥çœ‹è¦æ±‚">

**åŠŸèƒ½è¦æ±‚**ï¼š
- æ–‡ä»¶é€‰æ‹©å’Œæ‹–æ‹½ä¸Šä¼ 
- ä¸Šä¼ è¿›åº¦æ˜¾ç¤º
- é”™è¯¯å¤„ç†
- æ”¯æŒå¤šæ–‡ä»¶ä¸Šä¼ 

**å®ç°è¦æ±‚**ï¼š
```jsx
<FileUploadContainer
  multiple
  accept="image/*"
  maxSize={5 * 1024 * 1024} // 5MB
  onUpload={handleUpload}
>
  <FileUploadPresenter
    onDrop={handleDrop}
    onSelect={handleSelect}
    progress={uploadProgress}
  />
</FileUploadContainer>
```

**æç¤º**ï¼š
- ä½¿ç”¨FormDataå¤„ç†æ–‡ä»¶
- XMLHttpRequestè·Ÿè¸ªè¿›åº¦
- æ–‡ä»¶éªŒè¯ï¼ˆç±»å‹ã€å¤§å°ï¼‰
- æ‹–æ‹½äº‹ä»¶å¤„ç†

</Expandable>

### ç»ƒä¹ 2ï¼šå®ç°èŠå¤©ç»„ä»¶

<Expandable title="ç‚¹å‡»æŸ¥çœ‹è¦æ±‚">

**åŠŸèƒ½è¦æ±‚**ï¼š
- å®æ—¶æ¶ˆæ¯æ¥æ”¶
- æ¶ˆæ¯å‘é€
- è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
- è¾“å…¥çŠ¶æ€æŒ‡ç¤º

**å®ç°è¦æ±‚**ï¼š
```jsx
<ChatContainer
  userId={currentUser.id}
  onMessage={handleIncomingMessage}
>
  <ChatPresenter
    messages={messages}
    onSendMessage={sendMessage}
    typing={otherUserTyping}
  />
</ChatContainer>
```

**æç¤º**ï¼š
- WebSocketè¿æ¥
- æ¶ˆæ¯æ»šåŠ¨
- æ—¶é—´æˆ³æ˜¾ç¤º
- å‘é€çŠ¶æ€

</Expandable>

### ç»ƒä¹ 3ï¼šå®ç°æ—¥å†ç»„ä»¶

<Expandable title="ç‚¹å‡»æŸ¥çœ‹è¦æ±‚">

**åŠŸèƒ½è¦æ±‚**ï¼š
- æœˆè§†å›¾æ˜¾ç¤º
- æ—¥æœŸé€‰æ‹©
- äº‹ä»¶ç®¡ç†ï¼ˆæ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ï¼‰
- å¯¼èˆªï¼ˆä¸Šä¸€æœˆ/ä¸‹ä¸€æœˆï¼‰

**å®ç°è¦æ±‚**ï¼š
```jsx
<CalendarContainer
  events={events}
  onEventAdd={handleAddEvent}
  onEventUpdate={handleUpdateEvent}
  onEventDelete={handleDeleteEvent}
>
  <CalendarPresenter
    currentDate={currentDate}
    selectedDate={selectedDate}
    onDateSelect={setSelectedDate}
    onNavigate={navigate}
  />
</CalendarContainer>
```

**æç¤º**ï¼š
- æ—¥æœŸè®¡ç®—
- äº‹ä»¶æ—¥å†ç®—æ³•
- ç½‘æ ¼å¸ƒå±€
- æ¨¡æ€æ¡†ç¼–è¾‘

</Expandable>

### ç»ƒä¹ 4ï¼šå®ç°å›¾åƒç¼–è¾‘å™¨

<Expandable title="ç‚¹å‡»æŸ¥çœ‹è¦æ±‚">

**åŠŸèƒ½è¦æ±‚**ï¼š
- å›¾åƒè£å‰ª
- æ»¤é•œåº”ç”¨
- æ—‹è½¬å’Œç¼©æ”¾
- æ’¤é”€/é‡åš

**å®ç°è¦æ±‚**ï¼š
```jsx
<ImageEditorContainer
  image={currentImage}
  onSave={handleSave}
>
  <ImageEditorPresenter
    imageData={imageData}
    transform={transformState}
    filters={filterState}
    onTransformChange={setTransform}
    onFilterChange={setFilter}
    onReset={resetChanges}
  />
</ImageEditorContainer>
```

**æç¤º**ï¼š
- Canvasæ“ä½œ
- å›¾åƒå˜æ¢çŸ©é˜µ
- æ»¤é•œç®—æ³•
- å†å²è®°å½•ç®¡ç†

</Expandable>

---

## 8. å¸¸è§é™·é˜±

### é™·é˜±1ï¼šæ··åˆèŒè´£

<ErrorBox>

```jsx
// âŒ é”™è¯¯ - å®¹å™¨ç»„ä»¶å¤„ç†UI
class BadContainer extends React.Component {
  state = { data: [] };

  render() {
    return (
      <div style={{ padding: '20px' }}>  {/* å®¹å™¨å¤„ç†æ ·å¼ */}
        <h1 style={{ color: 'blue' }}>Title</h1>  {/* å®¹å™¨å¤„ç†æ ·å¼ */}
        <ul>  {/* å®¹å™¨æ¸²æŸ“åˆ—è¡¨ */}
          {this.state.data.map(item => (
            <li>{item}</li>  {/* å®¹å™¨å¤„ç†åˆ—è¡¨é¡¹ */}
          ))}
        </ul>
      </div>
    );
  }
}

// âœ… æ­£ç¡® - åˆ†ç¦»èŒè´£
class GoodContainer extends React.Component {
  state = { data: [] };

  render() {
    return (
      <GoodPresenter
        data={this.state.data}
        onRefresh={this.refresh}
      />
    );
  }
}

function GoodPresenter({ data, onRefresh }) {
  return (
    <div className="container">  {/* å±•ç¤ºç»„ä»¶å¤„ç†æ ·å¼ */}
      <h1 className="title">Title</h1>  {/* ä½¿ç”¨CSSç±» */}
      <ul>
        {data.map(item => (
          <li key={item.id}>{item.name}</li>  {/* å±•ç¤ºç»„ä»¶æ¸²æŸ“åˆ—è¡¨ */}
        ))}
      </ul>
    </div>
  );
}
```

</ErrorBox>

### é™·é˜±2ï¼šè¿‡åº¦ä¼ é€’props

<ErrorBox>

```jsx
// âŒ é”™è¯¯ - ä¼ é€’è¿‡å¤šprops
<Container
  data={data}
  loading={loading}
  error={error}
  onRefresh={onRefresh}
  onItemClick={onItemClick}
  onItemEdit={onItemEdit}
  onItemDelete={onItemDelete}
  onItemShare={onItemShare}
  onFilterChange={onFilterChange}
  onSortChange={onSortChange}
  onSearch={onSearch}
  theme={theme}
  locale={locale}
  user={user}
/>

// âœ… æ­£ç¡® - ä½¿ç”¨Contextæˆ–åˆ†ç»„
// æ–¹æ¡ˆ1: ä½¿ç”¨Context
<Container>
  <Presenter />
</Container>

// æ–¹æ¡ˆ2: åˆ†ç»„ä¼ é€’
<Container
  data={data}
  loading={loading}
  onRefresh={onRefresh}
>
  <Presenter
    onItemClick={onItemClick}
    onItemEdit={onItemEdit}
    onItemDelete={onItemDelete}
  />
</Container>
```

</ErrorBox>

### é™·é˜±3ï¼šçŠ¶æ€è€¦åˆ

<ErrorBox>

```jsx
// âŒ é”™è¯¯ - å±•ç¤ºç»„ä»¶ä¾èµ–å®¹å™¨çŠ¶æ€
function Presenter({ data, loading, filter }) {
  // å±•ç¤ºç»„ä»¶è‡ªå·±è¿‡æ»¤æ•°æ®
  const filteredData = data.filter(item => item.status === filter);
  // ...
}

// âœ… æ­£ç¡® - å®¹å™¨å¤„ç†é€»è¾‘
function Container() {
  const [data, setData] = useState([]);
  const [filter, setFilter] = useState('all');

  const filteredData = data.filter(item => {
    if (filter === 'all') return true;
    return item.status === filter;
  });

  return (
    <Presenter
      data={filteredData}  // å®¹å™¨è¿‡æ»¤åä¼ é€’
      filter={filter}
      onFilterChange={setFilter}
    />
  );
}
```

</ErrorBox>

### é™·é˜±4ï¼šå¿½ç•¥é”™è¯¯è¾¹ç•Œ

<ErrorBox>

```jsx
// âŒ é”™è¯¯ - æ²¡æœ‰é”™è¯¯å¤„ç†
function Container() {
  const [data, setData] = useState([]);

  useEffect(() => {
    // å¯èƒ½æŠ›å‡ºé”™è¯¯ä½†æ²¡æœ‰å¤„ç†
    fetchData().then(setData);
  }, []);

  return <Presenter data={data} />;
}

// âœ… æ­£ç¡® - é”™è¯¯å¤„ç†
function Container() {
  const [data, setData] = useState([]);
  const [error, setError] = useState(null);

  useEffect(() => {
    fetchData()
      .then(setData)
      .catch(setError);
  }, []);

  if (error) {
    return <ErrorMessage error={error} onRetry={() => window.location.reload()} />;
  }

  return <Presenter data={data} />;
}
```

</ErrorBox>

---

## 9. æœ¬ç« å°ç»“

### å…³é”®è¦ç‚¹

<Checklist>

- âœ… å®¹å™¨-å±•ç¤ºæ¨¡å¼åˆ†ç¦»é€»è¾‘å’ŒUI
- âœ… å®¹å™¨ç»„ä»¶è´Ÿè´£æ•°æ®è·å–ã€çŠ¶æ€ç®¡ç†ã€å‰¯ä½œç”¨
- âœ… å±•ç¤ºç»„ä»¶è´Ÿè´£UIæ¸²æŸ“ã€æ ·å¼ã€ç®€å•äº¤äº’
- âœ… ä½¿ç”¨æ˜ç¡®çš„å‘½åçº¦å®šï¼ˆContainer/Presenterï¼‰
- âœ… åªä¼ é€’å¿…è¦çš„propsç»™å±•ç¤ºç»„ä»¶
- âœ… æä¾›ç»Ÿä¸€çš„é”™è¯¯å¤„ç†
- âœ… ä½¿ç”¨React.memoä¼˜åŒ–å±•ç¤ºç»„ä»¶
- âœ… é¿å…å®¹å™¨ç»„ä»¶å¤„ç†UIé€»è¾‘
- âœ… ç°ä»£é¡¹ç›®ä¸­ä¼˜å…ˆä½¿ç”¨Hooks
- âœ… å¯ä»¥ä¸è‡ªå®šä¹‰Hookç»“åˆä½¿ç”¨

</Checklist>

### æœ€ä½³å®è·µ

<BestPractices>

1. **èŒè´£æ¸…æ™°** - å®¹å™¨ä¸åšUIï¼Œå±•ç¤ºä¸å¤„ç†æ•°æ®
2. **å‘½åè§„èŒƒ** - ä½¿ç”¨Container/Presenteråç¼€
3. **Propsç²¾ç®€** - åªä¼ é€’å¿…è¦çš„æ•°æ®å’Œæ–¹æ³•
4. **é”™è¯¯å¤„ç†** - å®¹å™¨ç»Ÿä¸€å¤„ç†é”™è¯¯
5. **æ€§èƒ½ä¼˜åŒ–** - ä½¿ç”¨React.memoå’ŒuseCallback
6. **å¯æµ‹è¯•æ€§** - ç‹¬ç«‹æµ‹è¯•å®¹å™¨é€»è¾‘å’Œå±•ç¤ºUI
7. **æ–‡æ¡£å®Œæ•´** - è®°å½•ç»„ä»¶èŒè´£å’ŒAPI
8. **é€æ­¥è¿ç§»** - ç°æœ‰é¡¹ç›®å¯é€æ­¥é‡‡ç”¨Hooks

</BestPractices>

### é€‚ç”¨åœºæ™¯

<BestPractices>

**ç»§ç»­ä½¿ç”¨**ï¼š
- å¤æ‚çŠ¶æ€è½¬æ¢
- ç²¾ç¡®æ¸²æŸ“æ§åˆ¶
- ç°æœ‰å¤§å‹é¡¹ç›®
- å›¢é˜Ÿç†Ÿæ‚‰æ­¤æ¨¡å¼

**ä¼˜å…ˆä½¿ç”¨Hooks**ï¼š
- æ–°é¡¹ç›®
- ç®€å•çŠ¶æ€ç®¡ç†
- é€»è¾‘å¤ç”¨éœ€æ±‚
- ç°ä»£Reactå¼€å‘

</BestPractices>

### ä¸‹ä¸€æ­¥å­¦ä¹ 

ç°åœ¨ä½ å·²ç»æŒæ¡äº†å®¹å™¨-å±•ç¤ºæ¨¡å¼ï¼Œæ¥ä¸‹æ¥å¯ä»¥å­¦ä¹ ï¼š

1. **[Contextæ¨¡å¼](../advanced/context-patterns)** - æ·±å…¥Context API
2. **[é”™è¯¯è¾¹ç•Œ](../advanced/error-boundaries)** - æŒæ¡Reacté”™è¯¯å¤„ç†
3. **[Hooksæ¨¡å¼](../advanced/hooks-patterns)** - ç°ä»£é€»è¾‘å¤ç”¨
4. **[æ€§èƒ½ä¼˜åŒ–](?title=æ€§èƒ½ä¼˜åŒ–æ¨¡å—)** - æå‡åº”ç”¨æ€§èƒ½

---

## 10. å»¶ä¼¸é˜…è¯»

### å®˜æ–¹èµ„æº

- [ç»„ä»¶è®¾è®¡](https://react.dev/learn/thinking-in-react) - ç»„ä»¶è®¾è®¡æ€ç»´
- [çŠ¶æ€æå‡](https://react.dev/learn/thinking-in-react) - çŠ¶æ€ç®¡ç†
- [å—æ§ä¸éå—æ§](https://react.dev/reference/react) - è¡¨å•å¤„ç†

### æ¨èé˜…è¯»

- [Container Components](https://medium.com/@learnreact/container-components) - å®¹å™¨ç»„ä»¶è¯¦è§£
- [Presentational and Container Components](https://medium.com/@dan_abramov/smart-and-dumb-components) - æ¨¡å¼ä»‹ç»
- [React Hooksæ›¿ä»£æ–¹æ¡ˆ](https://react.dev/reference/react) - Hooksæ–‡æ¡£

### ç›¸å…³è¯é¢˜

- [HOC vs Render Props](higher-order-components) - æ¨¡å¼å¯¹æ¯”
- [ç»„åˆæ¨¡å¼](compound-components) - ç»„ä»¶ç»„åˆ
- [çŠ¶æ€ç®¡ç†](../state-management/) - çŠ¶æ€ç®¡ç†è¿›é˜¶

---

[â† ä¸Šä¸€ç« ï¼šå¤åˆç»„ä»¶](compound-components) | [ä¸‹ä¸€ç« ï¼šContextæ¨¡å¼ â†’](../advanced/context-patterns)
