# å¤åˆç»„ä»¶ (Compound Components) - çµæ´»ç»„åˆæ¨¡å¼

import { Tabs, TabItem } from '@docusaurus/theme-common';

å¤åˆç»„ä»¶ï¼ˆCompound Componentsï¼‰æ˜¯Reactä¸­ä¸€ç§å¼ºå¤§è€Œä¼˜é›…çš„æ¨¡å¼ï¼Œå®ƒå…è®¸ä½ å°†ç»„ä»¶çš„åˆ›å»ºé€»è¾‘æ‹†åˆ†åˆ°å¤šä¸ªå­ç»„ä»¶ä¸­ï¼ŒåŒæ—¶ä¿æŒå¯¹ç»„ä»¶ç»„åˆçš„å®Œå…¨æ§åˆ¶ã€‚è¿™ç§æ¨¡å¼æä¾›äº†å‡ºè‰²çš„çµæ´»æ€§ï¼Œè®©ç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦è‡ªç”±ç»„åˆç»„ä»¶çš„å„ä¸ªéƒ¨åˆ†ã€‚åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨å¤åˆç»„ä»¶çš„æ¦‚å¿µã€å®ç°æ–¹å¼ã€æœ€ä½³å®è·µå’Œä½¿ç”¨åœºæ™¯ã€‚

## æœ¬ç« å­¦ä¹ ç›®æ ‡

- ç†è§£å¤åˆç»„ä»¶æ¨¡å¼çš„æ ¸å¿ƒæ¦‚å¿µ
- æŒæ¡Context APIåœ¨å¤åˆç»„ä»¶ä¸­çš„åº”ç”¨
- å­¦ä¼šå®ç°å¯å¤ç”¨çš„å¤åˆç»„ä»¶
- ç†è§£children propçš„é«˜çº§ç”¨æ³•
- æŒæ¡ç»„ä»¶é—´é€šä¿¡çš„æœ€ä½³å®è·µ
- å­¦ä¼šæ„å»ºçµæ´»çš„ç»„ä»¶API
- ç†è§£å¤åˆç»„ä»¶ä¸ç»„åˆæ¨¡å¼çš„åŒºåˆ«
- æŒæ¡å¤åˆç»„ä»¶çš„TypeScriptæ”¯æŒ

---

## 1. ä»€ä¹ˆæ˜¯å¤åˆç»„ä»¶ï¼Ÿ

å¤åˆç»„ä»¶æ˜¯ä¸€ç»„ç›¸äº’åä½œçš„ç»„ä»¶ï¼Œå®ƒä»¬ä¸€èµ·å·¥ä½œæ¥å®ç°ä¸€ä¸ªå®Œæ•´çš„ç”¨æˆ·ç•Œé¢ã€‚ä¸å•ä¸€ç»„ä»¶ä¸åŒï¼Œå¤åˆç»„ä»¶å°†å¤æ‚çš„UIæ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„å­ç»„ä»¶ï¼Œä½†è¿™äº›å­ç»„ä»¶å¿…é¡»ä¸€èµ·ä½¿ç”¨æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚

<Box style={{ padding: '20px', background: '#e3f2fd', borderRadius: '8px', margin: '20px 0' }}>
  <h4 style={{ margin: 0, color: '#1976d2' }}>ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µ</h4>
  <p style={{ margin: '10px 0 0 0' }}>
    <strong>å¤åˆç»„ä»¶</strong>æ˜¯ç”±å¤šä¸ªç»„ä»¶ç»„åˆè€Œæˆçš„ç»„ä»¶æ—ï¼Œå®ƒä»¬å…±äº«çŠ¶æ€å’Œé€»è¾‘ï¼Œä½†å¯ä»¥ç‹¬ç«‹åœ°æ¸²æŸ“ä¸åŒçš„éƒ¨åˆ†ã€‚
  </p>
</Box>

<CodeBlock>

```jsx
// åŸºç¡€ç¤ºä¾‹ï¼šSelectç»„ä»¶
<Select>
  <Select.Button>Choose an option</Select.Button>
  <Select.Options>
    <Select.Option value="option1">Option 1</Select.Option>
    <Select.Option value="option2">Option 2</Select.Option>
  </Select.Options>
</Select>

// å®é™…æ¸²æŸ“ç»“æ„
<div className="select">
  <button className="select-button">Choose an option</button>
  <ul className="select-options">
    <li className="select-option">Option 1</li>
    <li className="select-option">Option 2</li>
  </ul>
</div>
```

</CodeBlock>

### 1.1 å¤åˆç»„ä»¶çš„ç‰¹ç‚¹

<Grid>

<div>
  <h4>ä¼˜åŠ¿</h4>
  <ul>
    <li>âœ… é«˜åº¦çµæ´»å’Œå¯ç»„åˆ</li>
    <li>âœ… æ¸…æ™°çš„ç»„ä»¶å±‚æ¬¡</li>
    <li>âœ… å…±äº«çŠ¶æ€å’Œé€»è¾‘</li>
    <li>âœ… ä¼˜ç§€çš„TypeScriptæ”¯æŒ</li>
    <li>âœ… æ˜“äºæ‰©å±•å’Œç»´æŠ¤</li>
    <li>âœ… è‡ªç„¶çš„APIè®¾è®¡</li>
  </ul>
</div>

<div>
  <h4>ä½¿ç”¨åœºæ™¯</h4>
  <ul>
    <li>ğŸ“Œ Select/Dropdownç»„ä»¶</li>
    <li>ğŸ“Œ Tabsç»„ä»¶</li>
    <li>ğŸ“Œ Modal/Dialogç»„ä»¶</li>
    <li>ğŸ“Œ Accordionç»„ä»¶</li>
    <li>ğŸ“Œ Formç»„ä»¶ç»„</li>
    <li>ğŸ“Œ Menu/Navigationç»„ä»¶</li>
  </ul>
</div>

</Grid>

### 1.2 å¸¸è§æ¡ˆä¾‹

<LiveCode
  code={`
function CompoundComponentDemo() {
  return (
    <div style={{ padding: '20px', fontFamily: 'Arial, sans-serif' }}>
      <h3 style={{ marginTop: 0 }}>å¤åˆç»„ä»¶å¸¸è§æ¨¡å¼</h3>

      <div style={{ marginBottom: '40px' }}>
        <h4>ğŸ“‘ Tabsç»„ä»¶ç¤ºä¾‹</h4>
        <div style={{
          border: '1px solid #ddd',
          borderRadius: '8px',
          padding: '20px',
          background: '#f9f9f9'
        }}>
          <div style={{ marginBottom: '15px' }}>
            <div style={{
              display: 'flex',
              borderBottom: '2px solid #2196f3'
            }}>
              <div style={{
                padding: '10px 20px',
                background: '#2196f3',
                color: 'white',
                borderRadius: '4px 4px 0 0',
                marginRight: '5px'
              }}>
                Tab 1
              </div>
              <div style={{
                padding: '10px 20px',
                background: '#e3f2fd',
                color: '#333',
                borderRadius: '4px 4px 0 0',
                marginRight: '5px'
              }}>
                Tab 2
              </div>
            </div>
            <div style={{ padding: '15px', background: 'white' }}>
              <strong>æ ‡ç­¾é¡µå†…å®¹åŒºåŸŸ</strong>
              <p>å½“å‰æ˜¾ç¤ºçš„æ˜¯ Tab 1 çš„å†…å®¹</p>
            </div>
          </div>
        </div>
      </div>

      <div>
        <h4>ğŸ“‹ Menuç»„ä»¶ç¤ºä¾‹</h4>
        <div style={{
          border: '1px solid #ddd',
          borderRadius: '8px',
          padding: '20px',
          background: '#f9f9f9'
        }}>
          <button style={{
            padding: '10px 20px',
            background: '#4caf50',
            color: 'white',
            border: 'none',
            borderRadius: '4px',
            cursor: 'pointer',
            fontSize: '16px'
          }}>
            ğŸ“‹ Menu
          </button>
          <div style={{
            marginTop: '15px',
            padding: '10px',
            background: 'white',
            borderRadius: '4px',
            border: '1px solid #ddd'
          }}>
            <div style={{ padding: '8px', cursor: 'pointer' }}>âœï¸ Edit</div>
            <div style={{ padding: '8px', cursor: 'pointer' }}>ğŸ—‘ï¸ Delete</div>
            <div style={{
              height: '1px',
              background: '#ddd',
              margin: '5px 0'
            }} />
            <div style={{ padding: '8px', cursor: 'pointer' }}>ğŸ“¤ Export</div>
          </div>
        </div>
      </div>

      <div style={{
        marginTop: '30px',
        padding: '20px',
        background: '#e8f5e9',
        borderRadius: '8px',
        border: '2px solid #4caf50'
      }}>
        <h4 style={{ margin: '0 0 10px 0', color: '#2e7d32' }}>ğŸ’¡ æ ¸å¿ƒä¼˜åŠ¿</h4>
        <ul style={{ margin: '0', paddingLeft: '20px', lineHeight: '1.8' }}>
          <li><strong>é«˜åº¦çµæ´»</strong> - å¯ä»¥è‡ªç”±ç»„åˆç»„ä»¶çš„å„ä¸ªéƒ¨åˆ†</li>
          <li><strong>çŠ¶æ€å…±äº«</strong> - å­ç»„ä»¶ä¹‹é—´å¯ä»¥å…±äº«çŠ¶æ€å’Œé€»è¾‘</li>
          <li><strong>æ¸…æ™°ç»“æ„</strong> - ç»„ä»¶å±‚æ¬¡æ¸…æ™°ï¼Œæ˜“äºç†è§£</li>
          <li><strong>TypeScriptå‹å¥½</strong> - è‰¯å¥½çš„ç±»å‹æ”¯æŒ</li>
        </ul>
      </div>
    </div>
  );
}
`}
  scope={{ React }}
/>

---

## 2. å®ç°å¤åˆç»„ä»¶åŸºç¡€

### 2.1 ä½¿ç”¨React.Childrenå’ŒReact.cloneElement

<LiveCode
  code={`
function CompoundComponentsImplementation() {
  // æ¨¡æ‹ŸReact.Children.mapå’ŒReact.cloneElementçš„ç®€å•Selectç»„ä»¶
  const [isOpen, setIsOpen] = React.useState(false);
  const [selectedValue, setSelectedValue] = React.useState(null);

  const toggle = () => {
    setIsOpen(!isOpen);
  };

  const selectOption = (value) => {
    setSelectedValue(value);
    setIsOpen(false);
  };

  // Buttonå­ç»„ä»¶
  const SelectButton = ({ children, selectedValue, onToggle, isOpen }) => {
    return (
      <button
        className="select-button"
        onClick={onToggle}
        style={{
          padding: '10px 15px',
          background: '#fff',
          border: '2px solid #2196f3',
          borderRadius: '6px',
          cursor: 'pointer',
          fontSize: '14px',
          display: 'flex',
          alignItems: 'center',
          gap: '8px',
          minWidth: '200px',
          justifyContent: 'space-between'
        }}
      >
        <span>{selectedValue || children}</span>
        <span style={{
          color: '#2196f3',
          transition: 'transform 0.2s',
          transform: isOpen ? 'rotate(180deg)' : 'rotate(0deg)'
        }}>
          â–¼
        </span>
      </button>
    );
  };

  // Optionså®¹å™¨
  const SelectOptions = ({ children, isOpen, onSelect }) => {
    if (!isOpen) return null;

    return (
      <ul className="select-options" style={{
        margin: '5px 0 0 0',
        padding: '5px 0',
        listStyle: 'none',
        background: '#fff',
        border: '2px solid #2196f3',
        borderRadius: '6px',
        boxShadow: '0 4px 6px rgba(0,0,0,0.1)',
        width: '200px',
        position: 'relative',
        zIndex: 1000
      }}>
        {React.Children.map(children, (child, index) => {
          return React.cloneElement(child, { onSelect });
        })}
      </ul>
    );
  };

  // Optioné¡¹
  const SelectOption = ({ value, children, onSelect }) => {
    return (
      <li
        className="select-option"
        onClick={() => onSelect(value)}
        style={{
          padding: '10px 15px',
          cursor: 'pointer',
          transition: 'background 0.2s',
          background: '#fff'
        }}
        onMouseEnter={(e) => {
          e.target.style.background = '#e3f2fd';
        }}
        onMouseLeave={(e) => {
          e.target.style.background = '#fff';
        }}
      >
        {children}
      </li>
    );
  };

  return (
    <div style={{ padding: '20px', fontFamily: 'Arial, sans-serif' }}>
      <h3 style={{ marginTop: 0 }}>å¤åˆç»„ä»¶å®ç°æ¼”ç¤º</h3>

      <div style={{ marginBottom: '20px' }}>
        <p style={{ margin: '10px 0', fontSize: '14px', color: '#666' }}>
          <strong>å®ç°æ–¹å¼ï¼š</strong>ä½¿ç”¨React.Children.mapå’ŒReact.cloneElementä¼ é€’props
        </p>
        <p style={{ margin: '10px 0', fontSize: '14px', color: '#666' }}>
          <strong>äº¤äº’è¯´æ˜ï¼š</strong>ç‚¹å‡»æŒ‰é’®æŸ¥çœ‹é€‰é¡¹ï¼Œç‚¹å‡»é€‰é¡¹è¿›è¡Œé€‰æ‹©
        </p>
      </div>

      <div style={{ marginBottom: '20px' }}>
        <h4 style={{ margin: '10px 0' }}>âœ… äº¤äº’å¼ç¤ºä¾‹</h4>
        <div style={{ position: 'relative', display: 'inline-block' }}>
          <Select>
            <SelectButton>Choose an option</SelectButton>
            <SelectOptions>
              <SelectOption value="option1">Option 1</SelectOption>
              <SelectOption value="option2">Option 2</SelectOption>
              <SelectOption value="option3">Option 3</SelectOption>
            </SelectOptions>
          </Select>
        </div>
        {selectedValue && (
          <p style={{ margin: '10px 0 0 0', color: '#2196f3', fontSize: '14px' }}>
            <strong>å·²é€‰æ‹©ï¼š</strong>{selectedValue}
          </p>
        )}
      </div>

      <div style={{
        padding: '15px',
        background: '#e3f2fd',
        borderRadius: '8px',
        border: '2px solid #2196f3',
        marginTop: '20px'
      }}>
        <h4 style={{ margin: '0 0 10px 0', color: '#1976d2' }}>ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µ</h4>
        <ul style={{ margin: '0', paddingLeft: '20px', lineHeight: '1.6' }}>
          <li><strong>React.Children.map</strong> - éå†å­ç»„ä»¶</li>
          <li><strong>React.cloneElement</strong> - å¤åˆ¶å¹¶æ·»åŠ propsåˆ°å­ç»„ä»¶</li>
          <li><strong>çŠ¶æ€æå‡</strong> - çˆ¶ç»„ä»¶ç®¡ç†æ‰€æœ‰çŠ¶æ€</li>
          <li><strong>å‘ä¸‹ä¼ é€’</strong> - é€šè¿‡propsä¼ é€’çŠ¶æ€å’Œæ–¹æ³•</li>
        </ul>
      </div>
    </div>
  );
}

function Select({ children }) {
  // æ¨¡æ‹ŸReact.Children.mapå’ŒcloneElement
  // åœ¨å®é™…ä»£ç ä¸­ï¼Œçˆ¶ç»„ä»¶ä¼šå¤„ç†è¿™äº›
  return children;
}
`}
  scope={{ React }}
/>

### 2.2 ä½¿ç”¨Context APIï¼ˆæ¨èï¼‰

<LiveCode
  code={`
function ContextAPIImplementation() {
  // ä½¿ç”¨Contextå…±äº«çŠ¶æ€
  const SelectContext = React.useContext({});

  function Select({ children, defaultValue, onChange }) {
    const [isOpen, setIsOpen] = React.useState(false);
    const [selectedValue, setSelectedValue] = React.useState(defaultValue);

    const toggle = () => setIsOpen(prev => !prev);
    const close = () => setIsOpen(false);
    const selectOption = (value) => {
      setSelectedValue(value);
      onChange?.(value);
      close();
    };

    return (
      <div className="select">
        {React.Children.map(children, (child) => {
          return React.cloneElement(child, {
            isOpen,
            selectedValue,
            onToggle: toggle,
            onSelect: selectOption
          });
        })}
      </div>
    );
  }

  // Buttonå­ç»„ä»¶
  const SelectButton = ({ children, isOpen, selectedValue, onToggle }) => {
    return (
      <button
        className="select-button"
        onClick={onToggle}
        style={{
          padding: '10px 15px',
          background: '#fff',
          border: '2px solid #4caf50',
          borderRadius: '6px',
          cursor: 'pointer',
          fontSize: '14px',
          display: 'flex',
          alignItems: 'center',
          gap: '8px',
          minWidth: '200px',
          justifyContent: 'space-between'
        }}
      >
        <span>{selectedValue || children}</span>
        <span style={{
          color: '#4caf50',
          transition: 'transform 0.2s',
          transform: isOpen ? 'rotate(180deg)' : 'rotate(0deg)'
        }}>
          â–¼
        </span>
      </button>
    );
  };

  // Optionså®¹å™¨
  const SelectOptions = ({ children, isOpen, onSelect }) => {
    if (!isOpen) return null;

    return (
      <ul className="select-options" style={{
        margin: '5px 0 0 0',
        padding: '5px 0',
        listStyle: 'none',
        background: '#fff',
        border: '2px solid #4caf50',
        borderRadius: '6px',
        boxShadow: '0 4px 6px rgba(0,0,0,0.1)',
        width: '200px',
        position: 'relative',
        zIndex: 1000
      }}>
        {React.Children.map(children, child => {
          return React.cloneElement(child, { onSelect });
        })}
      </ul>
    );
  };

  // Optioné¡¹
  const SelectOption = ({ value, children, onSelect }) => {
    return (
      <li
        className="select-option"
        onClick={() => onSelect(value)}
        style={{
          padding: '10px 15px',
          cursor: 'pointer',
          transition: 'background 0.2s',
          background: '#fff'
        }}
        onMouseEnter={(e) => {
          e.target.style.background = '#e8f5e9';
        }}
        onMouseLeave={(e) => {
          e.target.style.background = '#fff';
        }}
      >
        {children}
      </li>
    );
  };

  return (
    <div style={{ padding: '20px', fontFamily: 'Arial, sans-serif' }}>
      <h3 style={{ marginTop: 0 }}>Context APIå®ç°æ¼”ç¤º</h3>

      <div style={{ marginBottom: '20px' }}>
        <p style={{ margin: '10px 0', fontSize: '14px', color: '#666' }}>
          <strong>å®ç°æ–¹å¼ï¼š</strong>ä½¿ç”¨Context APIåœ¨ç»„ä»¶é—´å…±äº«çŠ¶æ€
        </p>
        <p style={{ margin: '10px 0', fontSize: '14px', color: '#666' }}>
          <strong>ä¼˜åŠ¿ï¼š</strong>æ— éœ€å±‚å±‚ä¼ é€’propsï¼Œç»„ä»¶ç»“æ„æ›´æ¸…æ™°
        </p>
      </div>

      <div style={{ marginBottom: '20px' }}>
        <h4 style={{ margin: '10px 0' }}>âœ… äº¤äº’å¼ç¤ºä¾‹</h4>
        <div style={{ position: 'relative', display: 'inline-block' }}>
          <Select defaultValue="option1" onChange={(value) => console.log('Selected:', value)}>
            <SelectButton>Choose an option</SelectButton>
            <SelectOptions>
              <SelectOption value="option1">Option 1</SelectOption>
              <SelectOption value="option2">Option 2</SelectOption>
              <SelectOption value="option3">Option 3</SelectOption>
            </SelectOptions>
          </Select>
        </div>
      </div>

      <div style={{
        padding: '15px',
        background: '#e8f5e9',
        borderRadius: '8px',
        border: '2px solid #4caf50',
        marginTop: '20px'
      }}>
        <h4 style={{ margin: '0 0 10px 0', color: '#2e7d32' }}>ğŸ’¡ Context APIä¼˜åŠ¿</h4>
        <ul style={{ margin: '0', paddingLeft: '20px', lineHeight: '1.6' }}>
          <li><strong>æ— éœ€propsä¼ é€’</strong> - é¿å…å±‚å±‚ä¼ é€’</li>
          <li><strong>çµæ´»ç»„åˆ</strong> - å­ç»„ä»¶å¯ä»¥ä»»æ„ç»„åˆ</li>
          <li><strong>ç°ä»£æ–¹æ¡ˆ</strong> - Reactå®˜æ–¹æ¨èæ–¹å¼</li>
          <li><strong>TypeScriptå‹å¥½</strong> - è‰¯å¥½çš„ç±»å‹æ”¯æŒ</li>
        </ul>
      </div>
    </div>
  );
}
`}
  scope={{ React }}
/>

### 2.3 æ·»åŠ Display Namesï¼ˆè°ƒè¯•å‹å¥½ï¼‰

<LiveCode
  code={`
function DisplayNamesDemo() {
  // æ·»åŠ displayNameä¾¿äºè°ƒè¯•
  const SelectContext = React.createContext();

  function Select({ children, defaultValue, onChange }) {
    const [isOpen, setIsOpen] = React.useState(false);
    const [selectedValue, setSelectedValue] = React.useState(defaultValue);

    const toggle = () => setIsOpen(prev => !prev);
    const selectOption = (value) => {
      setSelectedValue(value);
      onChange?.(value);
      setIsOpen(false);
    };

    return (
      <SelectContext.Provider value={{ isOpen, selectedValue, onToggle: toggle, onSelect: selectOption }}>
        <div className="select">{children}</div>
      </SelectContext.Provider>
    );
  }

  const SelectButton = ({ children, isOpen, selectedValue, onToggle }) => {
    return (
      <button
        onClick={onToggle}
        style={{
          padding: '10px 15px',
          background: '#fff',
          border: '2px solid #9c27b0',
          borderRadius: '6px',
          cursor: 'pointer',
          fontSize: '14px',
          display: 'flex',
          alignItems: 'center',
          gap: '8px',
          minWidth: '200px',
          justifyContent: 'space-between'
        }}
      >
        <span>{selectedValue || children}</span>
        <span style={{
          color: '#9c27b0',
          transition: 'transform 0.2s',
          transform: isOpen ? 'rotate(180deg)' : 'rotate(0deg)'
        }}>
          â–¼
        </span>
      </button>
    );
  };

  const SelectOptions = ({ children, isOpen, onSelect }) => {
    if (!isOpen) return null;

    return (
      <ul className="select-options" style={{
        margin: '5px 0 0 0',
        padding: '5px 0',
        listStyle: 'none',
        background: '#fff',
        border: '2px solid #9c27b0',
        borderRadius: '6px',
        boxShadow: '0 4px 6px rgba(0,0,0,0.1)',
        width: '200px',
        position: 'relative',
        zIndex: 1000
      }}>
        {React.Children.map(children, child => {
          return React.cloneElement(child, { onSelect });
        })}
      </ul>
    );
  };

  const SelectOption = ({ value, children, onSelect }) => {
    return (
      <li
        onClick={() => onSelect(value)}
        style={{
          padding: '10px 15px',
          cursor: 'pointer',
          transition: 'background 0.2s',
          background: '#fff'
        }}
        onMouseEnter={(e) => {
          e.target.style.background = '#f3e5f5';
        }}
        onMouseLeave={(e) => {
          e.target.style.background = '#fff';
        }}
      >
        {children}
      </li>
    );
  };

  // æ·»åŠ displayNameä¾¿äºè°ƒè¯•
  Select.Button = SelectButton;
  Select.Options = SelectOptions;
  Select.Option = SelectOption;

  SelectButton.displayName = 'Select.Button';
  SelectOptions.displayName = 'Select.Options';
  SelectOption.displayName = 'Select.Option';

  return (
    <div style={{ padding: '20px', fontFamily: 'Arial, sans-serif' }}>
      <h3 style={{ marginTop: 0 }}>ğŸ” Display Names è°ƒè¯•å‹å¥½</h3>

      <div style={{ marginBottom: '20px' }}>
        <p style={{ margin: '10px 0', fontSize: '14px', color: '#666' }}>
          <strong>ä½œç”¨ï¼š</strong>åœ¨React DevToolsä¸­æ˜¾ç¤ºæ›´å‹å¥½çš„ç»„ä»¶åç§°
        </p>
        <p style={{ margin: '10px 0', fontSize: '14px', color: '#666' }}>
          <strong>æ•ˆæœï¼š</strong>ç»„ä»¶ä¼šæ˜¾ç¤ºä¸º Select.Button è€Œä¸ä»…ä»…æ˜¯ Button
        </p>
      </div>

      <div style={{ marginBottom: '20px' }}>
        <h4 style={{ margin: '10px 0' }}>âœ… äº¤äº’å¼ç¤ºä¾‹</h4>
        <div style={{ position: 'relative', display: 'inline-block' }}>
          <Select defaultValue="option1" onChange={(value) => console.log('Selected:', value)}>
            <SelectButton>Choose an option</SelectButton>
            <SelectOptions>
              <SelectOption value="option1">Option 1</SelectOption>
              <SelectOption value="option2">Option 2</SelectOption>
              <SelectOption value="option3">Option 3</SelectOption>
            </SelectOptions>
          </Select>
        </div>
      </div>

      <div style={{
        padding: '15px',
        background: '#f3e5f5',
        borderRadius: '8px',
        border: '2px solid #9c27b0',
        marginTop: '20px'
      }}>
        <h4 style={{ margin: '0 0 10px 0', color: '#6a1b9a' }}>ğŸ’¡ Display Names ä¼˜åŠ¿</h4>
        <ul style={{ margin: '0', paddingLeft: '20px', lineHeight: '1.6' }}>
          <li><strong>è°ƒè¯•å‹å¥½</strong> - React DevToolsä¸­æ˜¾ç¤º Select.Button</li>
          <li><strong>æ˜“äºè¯†åˆ«</strong> - å¿«é€Ÿæ‰¾åˆ°ç»„ä»¶çš„çˆ¶ç»„ä»¶</li>
          <li><strong>å¼€å‘ä½“éªŒ</strong> - å¤æ‚ç»„ä»¶æ ‘æ›´å®¹æ˜“ç†è§£</li>
          <li><strong>é”™è¯¯è¿½è¸ª</strong> - é”™è¯¯ä¿¡æ¯æ›´æ¸…æ™°</li>
        </ul>
      </div>
    </div>
  );
}
`}
  scope={{ React }}
/>

---

## 3. é«˜çº§å¤åˆç»„ä»¶æ¨¡å¼

### 3.1 çµæ´»å­ç»„ä»¶ç±»å‹

<LiveCode
  code={`
function FlexibleMenuDemo() {
  const [isOpen, setIsOpen] = React.useState(false);
  const [menuPosition, setMenuPosition] = React.useState({ x: 0, y: 0 });

  // æ¨¡æ‹Ÿèœå•æ“ä½œ
  const handleNew = () => alert('New File');
  const handleOpen = () => alert('Open File');
  const handleRecent1 = () => alert('Open file1.txt');
  const handleRecent2 = () => alert('Open file2.txt');
  const handleSave = () => alert('Save');
  const handleExport = () => alert('Export');

  // MenuContextæ¨¡æ‹Ÿ
  const MenuContext = React.createContext();

  function Menu({ children }) {
    const { isOpen, onClose } = React.useContext(MenuContext);

    // ç‚¹å‡»å¤–éƒ¨å…³é—­
    React.useEffect(() => {
      if (!isOpen) return;

      const handleClickOutside = (event) => {
        if (event.target.closest('.menu')) return;
        onClose();
      };

      document.addEventListener('mousedown', handleClickOutside);
      return () => document.removeEventListener('mousedown', handleClickOutside);
    }, [isOpen, onClose]);

    if (!isOpen) return null;

    return (
      <div className="menu" style={{
        position: 'absolute',
        background: 'white',
        border: '2px solid #ff9800',
        borderRadius: '8px',
        boxShadow: '0 4px 12px rgba(0,0,0,0.15)',
        minWidth: '200px',
        padding: '8px 0',
        zIndex: 1000
      }}>
        {children}
      </div>
    );
  }

  const MenuButton = ({ children, onClick }) => {
    return (
      <button
        onClick={onClick}
        style={{
          padding: '10px 20px',
          background: '#ff9800',
          color: 'white',
          border: 'none',
          borderRadius: '6px',
          cursor: 'pointer',
          fontSize: '16px',
          fontWeight: 'bold',
          boxShadow: '0 2px 4px rgba(0,0,0,0.2)'
        }}
      >
        {children}
      </button>
    );
  };

  const MenuItems = ({ children }) => {
    return <div>{children}</div>;
  };

  const MenuItem = ({ onSelect, children }) => {
    return (
      <div
        onClick={onSelect}
        style={{
          padding: '10px 16px',
          cursor: 'pointer',
          transition: 'background 0.2s',
          fontSize: '14px'
        }}
        onMouseEnter={(e) => {
          e.target.style.background = '#fff3e0';
        }}
        onMouseLeave={(e) => {
          e.target.style.background = 'transparent';
        }}
      >
        {children}
      </div>
    );
  };

  const MenuDivider = () => {
    return (
      <div style={{
        height: '1px',
        background: '#e0e0e0',
        margin: '8px 0'
      }} />
    );
  };

  const MenuLabel = ({ children }) => {
    return (
      <div style={{
        padding: '8px 16px',
        fontSize: '12px',
        fontWeight: 'bold',
        color: '#666',
        background: '#f5f5f5'
      }}>
        {children}
      </div>
    );
  };

  // ç»„åˆæ‰€æœ‰å­ç»„ä»¶
  Menu.Button = MenuButton;
  Menu.Items = MenuItems;
  Menu.Item = MenuItem;
  Menu.Divider = MenuDivider;
  Menu.Label = MenuLabel;

  const contextValue = {
    isOpen,
    onClose: () => setIsOpen(false)
  };

  return (
    <div style={{ padding: '20px', fontFamily: 'Arial, sans-serif' }}>
      <h3 style={{ marginTop: 0 }}>ğŸ›ï¸ çµæ´»å­ç»„ä»¶ç±»å‹</h3>

      <div style={{ marginBottom: '20px' }}>
        <p style={{ margin: '10px 0', fontSize: '14px', color: '#666' }}>
          <strong>ç‰¹ç‚¹ï¼š</strong>æ”¯æŒå¤šç§å­ç»„ä»¶ç±»å‹ï¼ŒåŒ…æ‹¬æŒ‰é’®ã€åˆ—è¡¨é¡¹ã€åˆ†éš”ç¬¦å’Œæ ‡ç­¾
        </p>
        <p style={{ margin: '10px 0', fontSize: '14px', color: '#666' }}>
          <strong>ä¼˜åŠ¿ï¼š</strong>æä¾›çµæ´»APIè®¾è®¡ï¼Œç”¨æˆ·å¯ä»¥è‡ªç”±ç»„åˆä¸åŒçš„å­ç»„ä»¶
        </p>
      </div>

      <div style={{ marginBottom: '20px', position: 'relative' }}>
        <h4 style={{ margin: '10px 0' }}>âœ… äº¤äº’å¼èœå•ç¤ºä¾‹</h4>
        <div style={{ position: 'relative', display: 'inline-block' }}>
          <MenuContext.Provider value={contextValue}>
            <MenuButton onClick={() => setIsOpen(!isOpen)}>
              ğŸ“‹ Menu
            </MenuButton>
            {isOpen && (
              <Menu>
                <Menu.Items>
                  <Menu.Item onSelect={() => { handleNew(); setIsOpen(false); }}>
                    âœï¸ New File
                  </Menu.Item>
                  <Menu.Item onSelect={() => { handleOpen(); setIsOpen(false); }}>
                    ğŸ“ Open File
                  </Menu.Item>
                  <Menu.Divider />
                  <Menu.Label>Recent</Menu.Label>
                  <Menu.Item onSelect={() => { handleRecent1(); setIsOpen(false); }}>
                    ğŸ“„ file1.txt
                  </Menu.Item>
                  <Menu.Item onSelect={() => { handleRecent2(); setIsOpen(false); }}>
                    ğŸ“„ file2.txt
                  </Menu.Item>
                  <Menu.Divider />
                  <Menu.Item onSelect={() => { handleSave(); setIsOpen(false); }}>
                    ğŸ’¾ Save
                  </Menu.Item>
                  <Menu.Item onSelect={() => { handleExport(); setIsOpen(false); }}>
                    ğŸ“¤ Export
                  </Menu.Item>
                </Menu.Items>
              </Menu>
            )}
          </MenuContext.Provider>
        </div>
      </div>

      <div style={{
        padding: '15px',
        background: '#fff3e0',
        borderRadius: '8px',
        border: '2px solid #ff9800',
        marginTop: '20px'
      }}>
        <h4 style={{ margin: '0 0 10px 0', color: '#e65100' }}>ğŸ’¡ çµæ´»è®¾è®¡ä¼˜åŠ¿</h4>
        <ul style={{ margin: '0', paddingLeft: '20px', lineHeight: '1.6' }}>
          <li><strong>å¤šç§ç»„ä»¶ç±»å‹</strong> - Itemã€Dividerã€Labelç­‰</li>
          <li><strong>è‡ªç”±ç»„åˆ</strong> - ç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦ç»„åˆä½¿ç”¨</li>
          <li><strong>æ¸…æ™°è¯­ä¹‰</strong> - æ¯ç§ç»„ä»¶éƒ½æœ‰æ˜ç¡®çš„ç”¨é€”</li>
          <li><strong>æ˜“äºæ‰©å±•</strong> - å¯ä»¥è½»æ¾æ·»åŠ æ–°çš„å­ç»„ä»¶ç±»å‹</li>
          <li><strong>ä¸€è‡´ä½“éªŒ</strong> - æ‰€æœ‰å­ç»„ä»¶éµå¾ªç›¸åŒçš„è®¾è®¡è§„èŒƒ</li>
        </ul>
      </div>
    </div>
  );
}
`}
  scope={{ React }}
/>

### 3.2 å­ç»„ä»¶çŠ¶æ€ç®¡ç†

<LiveCode
  code={`
function AccordionStateManagementDemo() {
  const [accordionType, setAccordionType] = React.useState('single');
  const [openItems, setOpenItems] = React.useState(new Set());

  const toggleItem = (value) => {
    if (accordionType === 'single') {
      setOpenItems(prev => {
        const newSet = new Set();
        if (!prev.has(value)) {
          newSet.add(value);
        }
        return newSet;
      });
    } else {
      setOpenItems(prev => {
        const newSet = new Set(prev);
        if (newSet.has(value)) {
          newSet.delete(value);
        } else {
          newSet.add(value);
        }
        return newSet;
      });
    }
  };

  const isOpen = (value) => openItems.has(value);

  const sections = [
    {
      id: 'section1',
      title: 'ğŸŒŸ ä»€ä¹ˆæ˜¯Reactï¼Ÿ',
      content: 'Reactæ˜¯ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„JavaScriptåº“ï¼Œç”±Facebookå¼€å‘å¹¶å¼€æºã€‚å®ƒä½¿ç”¨ç»„ä»¶åŒ–çš„æ–¹å¼æ¥æ„å»ºå¤æ‚çš„UIã€‚'
    },
    {
      id: 'section2',
      title: 'âš¡ æ ¸å¿ƒç‰¹æ€§',
      content: 'Reactçš„ä¸»è¦ç‰¹æ€§åŒ…æ‹¬ï¼šè™šæ‹ŸDOMã€ç»„ä»¶åŒ–å¼€å‘ã€JSXè¯­æ³•ã€å•å‘æ•°æ®æµã€ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿã€‚'
    },
    {
      id: 'section3',
      title: 'ğŸ£ Hooksç®€ä»‹',
      content: 'Hooksæ˜¯React 16.8å¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œè®©ä½ å¯ä»¥åœ¨ä¸ç¼–å†™classçš„æƒ…å†µä¸‹ä½¿ç”¨stateä»¥åŠå…¶ä»–çš„Reactç‰¹æ€§ã€‚'
    },
    {
      id: 'section4',
      title: 'ğŸ§© ç»„ä»¶æ¨¡å¼',
      content: 'Reactæä¾›äº†å¤šç§ç»„ä»¶ç»„åˆæ¨¡å¼ï¼ŒåŒ…æ‹¬ï¼šå¤åˆç»„ä»¶ã€é«˜é˜¶ç»„ä»¶ã€æ¸²æŸ“å±æ€§ã€è‡ªå®šä¹‰Hooksç­‰ã€‚'
    }
  ];

  return (
    <div style={{ padding: '20px', fontFamily: 'Arial, sans-serif' }}>
      <h3 style={{ marginTop: 0 }}>ğŸ“Š æ‰‹é£ç´ç»„ä»¶çŠ¶æ€ç®¡ç†</h3>

      <div style={{
        marginBottom: '20px',
        padding: '15px',
        background: '#f5f5f5',
        borderRadius: '8px',
        display: 'flex',
        alignItems: 'center',
        gap: '15px',
        flexWrap: 'wrap'
      }}>
        <span style={{ fontWeight: 'bold' }}>å±•å¼€æ¨¡å¼ï¼š</span>
        <button
          onClick={() => {
            setAccordionType('single');
            setOpenItems(new Set());
          }}
          style={{
            padding: '8px 16px',
            background: accordionType === 'single' ? '#2196f3' : 'white',
            color: accordionType === 'single' ? 'white' : '#333',
            border: '2px solid #2196f3',
            borderRadius: '6px',
            cursor: 'pointer',
            fontWeight: 'bold',
            transition: 'all 0.2s'
          }}
        >
          ğŸ”’ å•é€‰æ¨¡å¼ï¼ˆåªèƒ½æ‰“å¼€ä¸€ä¸ªï¼‰
        </button>
        <button
          onClick={() => {
            setAccordionType('multiple');
            setOpenItems(new Set());
          }}
          style={{
            padding: '8px 16px',
            background: accordionType === 'multiple' ? '#4caf50' : 'white',
            color: accordionType === 'multiple' ? 'white' : '#333',
            border: '2px solid #4caf50',
            borderRadius: '6px',
            cursor: 'pointer',
            fontWeight: 'bold',
            transition: 'all 0.2s'
          }}
        >
          ğŸ”“ å¤šé€‰æ¨¡å¼ï¼ˆå¯ä»¥æ‰“å¼€å¤šä¸ªï¼‰
        </button>
        <button
          onClick={() => setOpenItems(new Set())}
          style={{
            padding: '8px 16px',
            background: '#ff9800',
            color: 'white',
            border: '2px solid #ff9800',
            borderRadius: '6px',
            cursor: 'pointer',
            fontWeight: 'bold',
            transition: 'all 0.2s'
          }}
        >
          ğŸ”„ å…¨éƒ¨æŠ˜å 
        </button>
      </div>

      <div style={{
        border: '2px solid #ddd',
        borderRadius: '8px',
        overflow: 'hidden',
        background: 'white'
      }}>
        {sections.map((section) => (
          <div key={section.id} style={{ borderBottom: '1px solid #eee' }}>
            <button
              onClick={() => toggleItem(section.id)}
              style={{
                width: '100%',
                padding: '15px 20px',
                background: isOpen(section.id) ? '#e3f2fd' : 'white',
                color: '#333',
                border: 'none',
                textAlign: 'left',
                fontSize: '16px',
                fontWeight: 'bold',
                cursor: 'pointer',
                display: 'flex',
                justifyContent: 'space-between',
                alignItems: 'center',
                transition: 'all 0.2s',
                borderLeft: isOpen(section.id) ? '4px solid #2196f3' : '4px solid transparent'
              }}
            >
              <span>{section.title}</span>
              <span style={{
                fontSize: '24px',
                fontWeight: 'bold',
                color: isOpen(section.id) ? '#2196f3' : '#999',
                transition: 'transform 0.2s',
                transform: isOpen(section.id) ? 'rotate(180deg)' : 'rotate(0deg)'
              }}>
                â–¼
              </span>
            </button>
            {isOpen(section.id) && (
              <div style={{
                padding: '20px',
                background: '#fafafa',
                borderTop: '1px solid #eee'
              }}>
                <p style={{ margin: 0, lineHeight: '1.6', color: '#666' }}>
                  {section.content}
                </p>
              </div>
            )}
          </div>
        ))}
      </div>

      <div style={{
        marginTop: '20px',
        padding: '15px',
        background: accordionType === 'single' ? '#e3f2fd' : '#e8f5e9',
        borderRadius: '8px',
        border: \`2px solid ${accordionType === 'single' ? '#2196f3' : '#4caf50'}\`
      }}>
        <h4 style={{
          margin: '0 0 10px 0',
          color: accordionType === 'single' ? '#1976d2' : '#2e7d32'
        }}>
          ğŸ’¡ å½“å‰çŠ¶æ€
        </h4>
        <p style={{ margin: '5px 0', fontSize: '14px' }}>
          <strong>å±•å¼€æ¨¡å¼ï¼š</strong>{accordionType === 'single' ? 'å•é€‰æ¨¡å¼' : 'å¤šé€‰æ¨¡å¼'}
        </p>
        <p style={{ margin: '5px 0', fontSize: '14px' }}>
          <strong>å·²å±•å¼€ï¼š</strong>
          {openItems.size === 0
            ? 'æ— '
            : Array.from(openItems).map(id => {
                const section = sections.find(s => s.id === id);
                return section ? section.title : id;
              }).join(', ')
          }
        </p>
        <p style={{ margin: '5px 0', fontSize: '14px' }}>
          <strong>å·²å±•å¼€æ•°é‡ï¼š</strong>{openItems.size} / {sections.length}
        </p>
      </div>

      <div style={{
        marginTop: '20px',
        padding: '15px',
        background: '#fff3e0',
        borderRadius: '8px',
        border: '2px solid #ff9800'
      }}>
        <h4 style={{ margin: '0 0 10px 0', color: '#e65100' }}>
          ğŸ“š çŠ¶æ€ç®¡ç†å®ç°
        </h4>
        <ul style={{ margin: 0, paddingLeft: '20px', lineHeight: '1.8', fontSize: '14px' }}>
          <li><strong>ä½¿ç”¨Setå­˜å‚¨</strong> - è®°å½•æ‰€æœ‰å·²å±•å¼€çš„é¡¹ç›®ID</li>
          <li><strong>å•é€‰æ¨¡å¼</strong> - å±•å¼€æ–°é¡¹æ—¶è‡ªåŠ¨æŠ˜å ä¹‹å‰çš„é¡¹</li>
          <li><strong>å¤šé€‰æ¨¡å¼</strong> - ç‚¹å‡»åˆ‡æ¢é¡¹ç›®çš„å±•å¼€/æŠ˜å çŠ¶æ€</li>
          <li><strong>Contextå…±äº«</strong> - é€šè¿‡Contextå‘ä¸‹ä¼ é€’çŠ¶æ€å’Œæ–¹æ³•</li>
          <li><strong>æ¡ä»¶æ¸²æŸ“</strong> - æ ¹æ®çŠ¶æ€å†³å®šæ˜¯å¦æ¸²æŸ“Panelå†…å®¹</li>
        </ul>
      </div>
    </div>
  );
}
`}
  scope={{ React }}
/>

### 3.3 åŠ¨æ€å­ç»„ä»¶æ¸²æŸ“

<LiveCode
  code={`
function DynamicStepperDemo() {
  const [activeStep, setActiveStep] = React.useState(0);
  const [isLinear, setIsLinear] = React.useState(true);

  const steps = [
    { id: 0, title: 'å¡«å†™ä¿¡æ¯', description: 'è¾“å…¥åŸºæœ¬ä¿¡æ¯' },
    { id: 1, title: 'ç¡®è®¤è¯¦æƒ…', description: 'æ£€æŸ¥è¾“å…¥å†…å®¹' },
    { id: 2, title: 'å®Œæˆæ³¨å†Œ', description: 'æ³¨å†ŒæˆåŠŸ' }
  ];

  const next = () => {
    if (activeStep < steps.length - 1) {
      setActiveStep(prev => prev + 1);
    }
  };

  const prev = () => {
    if (activeStep > 0) {
      setActiveStep(prev => prev - 1);
    }
  };

  const goTo = (stepIndex) => {
    if (isLinear) {
      // çº¿æ€§æ¨¡å¼ï¼šåªèƒ½è®¿é—®å½“å‰æˆ–ä¹‹å‰çš„æ­¥éª¤
      if (stepIndex <= activeStep) {
        setActiveStep(stepIndex);
      }
    } else {
      // éçº¿æ€§æ¨¡å¼ï¼šå¯ä»¥è®¿é—®ä»»ä½•æ­¥éª¤
      setActiveStep(stepIndex);
    }
  };

  const reset = () => {
    setActiveStep(0);
  };

  return (
    <div style={{ padding: '20px', fontFamily: 'Arial, sans-serif' }}>
      <h3 style={{ marginTop: 0 }}>ğŸ“‹ æ­¥éª¤æ¡ç»„ä»¶</h3>

      <div style={{
        marginBottom: '20px',
        padding: '15px',
        background: '#f5f5f5',
        borderRadius: '8px',
        display: 'flex',
        alignItems: 'center',
        gap: '10px',
        flexWrap: 'wrap'
      }}>
        <button
          onClick={prev}
          disabled={activeStep === 0}
          style={{
            padding: '8px 16px',
            background: activeStep === 0 ? '#ccc' : '#2196f3',
            color: 'white',
            border: 'none',
            borderRadius: '6px',
            cursor: activeStep === 0 ? 'not-allowed' : 'pointer',
            fontWeight: 'bold',
            transition: 'all 0.2s',
            opacity: activeStep === 0 ? 0.6 : 1
          }}
        >
          â† ä¸Šä¸€æ­¥
        </button>
        <button
          onClick={next}
          disabled={activeStep === steps.length - 1}
          style={{
            padding: '8px 16px',
            background: activeStep === steps.length - 1 ? '#ccc' : '#4caf50',
            color: 'white',
            border: 'none',
            borderRadius: '6px',
            cursor: activeStep === steps.length - 1 ? 'not-allowed' : 'pointer',
            fontWeight: 'bold',
            transition: 'all 0.2s',
            opacity: activeStep === steps.length - 1 ? 0.6 : 1
          }}
        >
          ä¸‹ä¸€æ­¥ â†’
        </button>
        <button
          onClick={reset}
          style={{
            padding: '8px 16px',
            background: '#ff9800',
            color: 'white',
            border: 'none',
            borderRadius: '6px',
            cursor: 'pointer',
            fontWeight: 'bold',
            transition: 'all 0.2s'
          }}
        >
          ğŸ”„ é‡ç½®
        </button>
        <label style={{
          display: 'flex',
          alignItems: 'center',
          gap: '8px',
          marginLeft: 'auto',
          cursor: 'pointer'
        }}>
          <input
            type="checkbox"
            checked={isLinear}
            onChange={(e) => setIsLinear(e.target.checked)}
            style={{ width: '18px', height: '18px', cursor: 'pointer' }}
          />
          <span style={{ fontWeight: 'bold' }}>
            ğŸ”’ çº¿æ€§æ¨¡å¼ï¼ˆåªèƒ½è®¿é—®å½“å‰æˆ–ä¹‹å‰çš„æ­¥éª¤ï¼‰
          </span>
        </label>
      </div>

      <div style={{ marginBottom: '30px' }}>
        <div style={{
          display: 'flex',
          justifyContent: 'space-between',
          alignItems: 'center',
          position: 'relative',
          marginBottom: '40px'
        }}>
          {/* è¿æ¥çº¿ */}
          <div style={{
            position: 'absolute',
            top: '25px',
            left: '25px',
            right: '25px',
            height: '2px',
            background: '#e0e0e0',
            zIndex: 1
          }} />
          <div style={{
            position: 'absolute',
            top: '25px',
            left: '25px',
            width: \`${(activeStep / (steps.length - 1)) * 100}%\`,
            height: '2px',
            background: '#4caf50',
            zIndex: 2,
            transition: 'width 0.3s'
          }} />

          {steps.map((step, index) => {
            const isActive = index === activeStep;
            const isCompleted = index < activeStep;
            const isClickable = isLinear ? index <= activeStep : true;

            return (
              <div
                key={step.id}
                onClick={() => goTo(index)}
                style={{
                  display: 'flex',
                  flexDirection: 'column',
                  alignItems: 'center',
                  position: 'relative',
                  zIndex: 3,
                  cursor: isClickable ? 'pointer' : 'not-allowed',
                  opacity: isClickable || !isLinear ? 1 : 0.5
                }}
              >
                {/* æ­¥éª¤åœ†åœˆ */}
                <div style={{
                  width: '50px',
                  height: '50px',
                  borderRadius: '50%',
                  background: isCompleted
                    ? '#4caf50'
                    : isActive
                    ? '#2196f3'
                    : '#e0e0e0',
                  color: isCompleted || isActive ? 'white' : '#999',
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'center',
                  fontSize: '20px',
                  fontWeight: 'bold',
                  boxShadow: isActive ? '0 0 0 4px rgba(33, 150, 243, 0.2)' : 'none',
                  transition: 'all 0.3s',
                  border: '3px solid white'
                }}>
                  {isCompleted ? 'âœ“' : index + 1}
                </div>
                {/* æ­¥éª¤ä¿¡æ¯ */}
                <div style={{
                  marginTop: '10px',
                  textAlign: 'center',
                  maxWidth: '120px'
                }}>
                  <div style={{
                    fontSize: '14px',
                    fontWeight: 'bold',
                    color: isActive ? '#2196f3' : '#333',
                    marginBottom: '4px'
                  }}>
                    {step.title}
                  </div>
                  <div style={{
                    fontSize: '12px',
                    color: '#666'
                  }}>
                    {step.description}
                  </div>
                </div>
              </div>
            );
          })}
        </div>

        {/* æ­¥éª¤å†…å®¹åŒºåŸŸ */}
        <div style={{
          padding: '30px',
          background: 'white',
          borderRadius: '8px',
          border: '2px solid #2196f3',
          minHeight: '200px'
        }}>
          <h4 style={{ margin: '0 0 15px 0', color: '#2196f3', fontSize: '20px' }}>
            æ­¥éª¤ {activeStep + 1}ï¼š{steps[activeStep].title}
          </h4>
          {activeStep === 0 && (
            <div>
              <div style={{ marginBottom: '15px' }}>
                <label style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}>
                  ç”¨æˆ·å
                </label>
                <input
                  type="text"
                  placeholder="è¯·è¾“å…¥ç”¨æˆ·å"
                  style={{
                    width: '100%',
                    padding: '10px',
                    border: '2px solid #ddd',
                    borderRadius: '6px',
                    fontSize: '14px'
                  }}
                />
              </div>
              <div style={{ marginBottom: '15px' }}>
                <label style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}>
                  é‚®ç®±
                </label>
                <input
                  type="email"
                  placeholder="è¯·è¾“å…¥é‚®ç®±"
                  style={{
                    width: '100%',
                    padding: '10px',
                    border: '2px solid #ddd',
                    borderRadius: '6px',
                    fontSize: '14px'
                  }}
                />
              </div>
            </div>
          )}
          {activeStep === 1 && (
            <div>
              <div style={{
                padding: '15px',
                background: '#f5f5f5',
                borderRadius: '6px',
                marginBottom: '15px'
              }}>
                <p style={{ margin: '5px 0' }}><strong>ç”¨æˆ·åï¼š</strong> æœªå¡«å†™</p>
                <p style={{ margin: '5px 0' }}><strong>é‚®ç®±ï¼š</strong> æœªå¡«å†™</p>
              </div>
              <p style={{ color: '#666', fontSize: '14px' }}>
                â„¹ï¸ è¯·è¿”å›ä¸Šä¸€æ­¥å¡«å†™å®Œæ•´ä¿¡æ¯
              </p>
            </div>
          )}
          {activeStep === 2 && (
            <div style={{ textAlign: 'center' }}>
              <div style={{ fontSize: '64px', marginBottom: '20px' }}>ğŸ‰</div>
              <h4 style={{ color: '#4caf50', fontSize: '24px', margin: '0 0 10px 0' }}>
                æ³¨å†ŒæˆåŠŸï¼
              </h4>
              <p style={{ color: '#666' }}>
                æ­å–œæ‚¨å®Œæˆæ³¨å†Œï¼Œæ¬¢è¿ä½¿ç”¨æˆ‘ä»¬çš„æœåŠ¡
              </p>
            </div>
          )}
        </div>
      </div>

      <div style={{
        padding: '15px',
        background: '#e3f2fd',
        borderRadius: '8px',
        border: '2px solid #2196f3'
      }}>
        <h4 style={{ margin: '0 0 10px 0', color: '#1976d2' }}>
          ğŸ’¡ åŠ¨æ€æ¸²æŸ“ç‰¹æ€§
        </h4>
        <ul style={{ margin: 0, paddingLeft: '20px', lineHeight: '1.8', fontSize: '14px' }}>
          <li><strong>çŠ¶æ€å…±äº«</strong> - é€šè¿‡propså‘å­ç»„ä»¶ä¼ é€’çŠ¶æ€</li>
          <li><strong>åŠ¨æ€å±æ€§</strong> - isActiveã€isCompletedã€isClickable</li>
          <li><strong>æ¡ä»¶æ¸²æŸ“</strong> - æ ¹æ®çŠ¶æ€æ˜¾ç¤ºä¸åŒæ ·å¼</li>
          <li><strong>æ§åˆ¶æµç¨‹</strong> - çº¿æ€§/éçº¿æ€§æ¨¡å¼åˆ‡æ¢</li>
          <li><strong>ç‚¹å‡»å¯¼èˆª</strong> - å¯ç‚¹å‡»è·³è½¬åˆ°å·²å®Œæˆæ­¥éª¤</li>
        </ul>
      </div>

      <div style={{
        marginTop: '15px',
        padding: '10px',
        background: '#f5f5f5',
        borderRadius: '6px',
        fontSize: '14px',
        color: '#666'
      }}>
        <strong>å½“å‰æ­¥éª¤ï¼š</strong>{activeStep + 1} / {steps.length} |
        <strong> çŠ¶æ€ï¼š</strong>
        {activeStep === 0 ? 'å¡«å†™ä¸­' :
         activeStep === 1 ? 'ç¡®è®¤ä¸­' : 'å·²å®Œæˆ'}
      </div>
    </div>
  );
}
`}
  scope={{ React }}
/>

### 3.4 åµŒå¥—å¤åˆç»„ä»¶

<LiveCode
  code={`
function NestedTreeDemo() {
  // TreeContextç”¨äºç®¡ç†å±•å¼€çŠ¶æ€
  const TreeContext = React.createContext();

  // Treeä¸»ç»„ä»¶
  function Tree({ children, defaultExpanded = [] }) {
    const [expandedItems, setExpandedItems] = React.useState(
      new Set(defaultExpanded)
    );

    const toggleItem = (itemId) => {
      setExpandedItems(prev => {
        const newSet = new Set(prev);
        if (newSet.has(itemId)) {
          newSet.delete(itemId);
        } else {
          newSet.add(itemId);
        }
        return newSet;
      });
    };

    const isExpanded = (itemId) => expandedItems.has(itemId);

    return (
      <TreeContext.Provider value={{ isExpanded, toggleItem }}>
        <ul style={{
          listStyle: 'none',
          padding: '0',
          margin: '0',
          fontFamily: 'Arial, sans-serif'
        }}>
          {children}
        </ul>
      </TreeContext.Provider>
    );
  }

  // TreeItemåŒ…è£…ç»„ä»¶
  Tree.Item = function TreeItem({ id, children }) {
    return (
      <li style={{
        margin: '0',
        padding: '0',
        position: 'relative'
      }}>
        {children}
      </li>
    );
  };

  // TreeNodeèŠ‚ç‚¹ç»„ä»¶
  Tree.Node = function TreeNode({ id, label, children, level = 0 }) {
    const { isExpanded, toggleItem } = React.useContext(TreeContext);
    const hasChildren = React.Children.count(children) > 0;
    const expanded = isExpanded(id);

    return (
      <li style={{ marginBottom: '4px' }}>
        <div style={{
          display: 'flex',
          alignItems: 'center',
          paddingLeft: \`${level * 24}px\`,
          background: '#f8f9fa',
          border: '1px solid #dee2e6',
          borderRadius: '4px',
          minHeight: '36px'
        }}>
          {hasChildren && (
            <button
              onClick={() => toggleItem(id)}
              style={{
                width: '28px',
                height: '28px',
                border: 'none',
                background: expanded ? '#4caf50' : '#2196f3',
                color: 'white',
                borderRadius: '4px',
                cursor: 'pointer',
                fontSize: '16px',
                fontWeight: 'bold',
                marginRight: '8px',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                transition: 'all 0.2s'
              }}
            >
              {expanded ? 'âˆ’' : '+'}
            </button>
          )}
          <span style={{
            fontSize: '14px',
            fontWeight: '500',
            color: '#333'
          }}>
            {label}
          </span>
          {hasChildren && (
            <span style={{
              marginLeft: 'auto',
              fontSize: '12px',
              color: '#666',
              paddingRight: '8px'
            }}>
              {expanded ? 'å·²å±•å¼€' : 'å·²æŠ˜å '}
            </span>
          )}
        </div>
        {hasChildren && expanded && (
          <ul style={{
            listStyle: 'none',
            padding: '0',
            margin: '4px 0 0 16px',
            borderLeft: '2px solid #e0e0e0'
          }}>
            {children}
          </ul>
        )}
      </li>
    );
  };

  // å¤æ‚çš„åµŒå¥—æ•°æ®
  const [expandedItems, setExpandedItems] = React.useState(new Set(['root', 'child2']));

  const toggleItem = (itemId) => {
    setExpandedItems(prev => {
      const newSet = new Set(prev);
      if (newSet.has(itemId)) {
        newSet.delete(itemId);
      } else {
        newSet.add(itemId);
      }
      return newSet;
    });
  };

  const isExpanded = (itemId) => expandedItems.has(itemId);

  return (
    <div style={{ padding: '20px' }}>
      <h3 style={{ marginTop: 0 }}>ğŸŒ³ åµŒå¥—æ ‘å½¢ç»„ä»¶</h3>

      <div style={{
        marginBottom: '15px',
        padding: '12px',
        background: '#e3f2fd',
        borderRadius: '6px',
        border: '1px solid #2196f3'
      }}>
        <p style={{ margin: '0', fontSize: '14px', color: '#1976d2' }}>
          <strong>ğŸ’¡ äº¤äº’è¯´æ˜ï¼š</strong> ç‚¹å‡» +/- æŒ‰é’®å±•å¼€æˆ–æŠ˜å èŠ‚ç‚¹
        </p>
      </div>

      <div style={{
        padding: '15px',
        background: 'white',
        border: '2px solid #2196f3',
        borderRadius: '8px',
        maxWidth: '500px'
      }}>
        <TreeContext.Provider value={{ isExpanded, toggleItem }}>
          <Tree>
            <Tree.Item>
              <Tree.Node id="root" label="ğŸ“ é¡¹ç›®æ ¹ç›®å½•" level={0}>
                <Tree.Item>
                  <Tree.Node id="src" label="ğŸ“ src æºä»£ç " level={1}>
                    <Tree.Item>
                      <Tree.Node id="components" label="ğŸ“ components ç»„ä»¶" level={2}>
                        <Tree.Item>
                          <Tree.Node id="Button" label="ğŸ“„ Button.jsx æŒ‰é’®ç»„ä»¶" level={3} />
                        </Tree.Item>
                        <Tree.Item>
                          <Tree.Node id="Input" label="ğŸ“„ Input.jsx è¾“å…¥æ¡†ç»„ä»¶" level={3} />
                        </Tree.Item>
                      </Tree.Node>
                    </Tree.Item>
                    <Tree.Item>
                      <Tree.Node id="utils" label="ğŸ“ utils å·¥å…·å‡½æ•°" level={2}>
                        <Tree.Item>
                          <Tree.Node id="helpers" label="ğŸ“„ helpers.js" level={3} />
                        </Tree.Item>
                        <Tree.Item>
                          <Tree.Node id="constants" label="ğŸ“„ constants.js" level={3} />
                        </Tree.Item>
                      </Tree.Node>
                    </Tree.Item>
                  </Tree.Node>
                </Tree.Item>
                <Tree.Item>
                  <Tree.Node id="public" label="ğŸ“ public é™æ€èµ„æº" level={1}>
                    <Tree.Item>
                      <Tree.Node id="index.html" label="ğŸ“„ index.html" level={2} />
                    </Tree.Item>
                    <Tree.Item>
                      <Tree.Node id="favicon" label="ğŸ–¼ï¸ favicon.ico" level={2} />
                    </Tree.Item>
                  </Tree.Node>
                </Tree.Item>
                <Tree.Item>
                  <Tree.Node id="package.json" label="ğŸ“„ package.json é¡¹ç›®é…ç½®" level={1} />
                </Tree.Item>
              </Tree.Node>
            </Tree.Item>
          </Tree>
        </TreeContext.Provider>
      </div>

      <div style={{
        marginTop: '15px',
        padding: '15px',
        background: '#f5f5f5',
        borderRadius: '6px',
        fontSize: '14px'
      }}>
        <h4 style={{ margin: '0 0 10px 0', color: '#1565c0' }}>
          ğŸ’¡ åµŒå¥—å¤åˆç»„ä»¶ç‰¹ç‚¹
        </h4>
        <ul style={{ margin: '0', paddingLeft: '20px', lineHeight: '1.6' }}>
          <li><strong>é€’å½’ç»“æ„</strong> - èŠ‚ç‚¹å¯ä»¥åŒ…å«å­èŠ‚ç‚¹ï¼Œæ”¯æŒæ— é™åµŒå¥—</li>
          <li><strong>Contextå…±äº«</strong> - é€šè¿‡Contextä¼ é€’å±•å¼€/æŠ˜å çŠ¶æ€</li>
          <li><strong>æ¡ä»¶æ¸²æŸ“</strong> - åªæœ‰å±•å¼€æ—¶æ‰æ¸²æŸ“å­èŠ‚ç‚¹</li>
          <li><strong>å±‚çº§ç®¡ç†</strong> - é€šè¿‡levelå‚æ•°å®ç°ç¼©è¿›</li>
          <li><strong>çŠ¶æ€æå‡</strong> - æ‰€æœ‰çŠ¶æ€åœ¨é¡¶çº§ç»„ä»¶ä¸­ç®¡ç†</li>
        </ul>
      </div>

      <div style={{
        marginTop: '10px',
        padding: '10px',
        background: '#fff3e0',
        borderRadius: '6px',
        fontSize: '13px',
        color: '#e65100'
      }}>
        <strong>ğŸ“Š å½“å‰çŠ¶æ€ï¼š</strong> {expandedItems.size} ä¸ªèŠ‚ç‚¹å·²å±•å¼€
      </div>
    </div>
  );
}
`}
  scope={{ React }}
/>

---

## 4. TypeScriptæ”¯æŒ

### 4.1 ç±»å‹å®šä¹‰

<CodeBlock>

```tsx
// TypeScriptç±»å‹å®šä¹‰
interface SelectContextType {
  isOpen: boolean;
  selectedValue: string | null;
  onToggle: () => void;
  onSelect: (value: string) => void;
}

const SelectContext = React.createContext<SelectContextType | undefined>(undefined);

function Select({
  children,
  defaultValue,
  onChange
}: {
  children: React.ReactNode;
  defaultValue?: string;
  onChange?: (value: string) => void;
}) {
  // ...å®ç°
  return (
    <SelectContext.Provider value={contextValue}>
      <div className="select">{children}</div>
    </SelectContext.Provider>
  );
}

interface SelectButtonProps {
  children: React.ReactNode;
}

const SelectButton: React.FC<SelectButtonProps> = ({ children }) => {
  const context = React.useContext(SelectContext);
  if (!context) {
    throw new Error('SelectButton must be used within a Select component');
  }

  return <button onClick={context.onToggle}>{children}</button>;
};

interface SelectOptionProps {
  value: string;
  children: React.ReactNode;
}

const SelectOption: React.FC<SelectOptionProps> = ({ value, children }) => {
  const context = React.useContext(SelectContext);
  if (!context) {
    throw new Error('SelectOption must be used within a Select component');
  }

  return (
    <li onClick={() => context.onSelect(value)}>
      {children}
    </li>
  );
};

// ç»„åˆç±»å‹
export interface SelectProps {
  children: React.ReactNode;
  defaultValue?: string;
  onChange?: (value: string) => void;
}

export type SelectComponent = React.FC<SelectProps> & {
  Button: React.FC<SelectButtonProps>;
  Options: React.FC<SelectOptionsProps>;
  Option: React.FC<SelectOptionProps>;
};

// ä½¿ç”¨
const Select: SelectComponent = ({ children, defaultValue, onChange }) => {
  // å®ç°
  return <div>{children}</div>;
};

Select.Button = SelectButton;
Select.Options = SelectOptions;
Select.Option = SelectOption;
```

</CodeBlock>

### 4.2 æ³›å‹æ”¯æŒ

<CodeBlock>

```tsx
// æ³›å‹Selectç»„ä»¶
interface GenericSelectProps<T> {
  children: React.ReactNode;
  defaultValue?: T;
  onChange?: (value: T) => void;
  renderValue?: (value: T) => React.ReactNode;
}

const GenericSelectContext = React.createContext<any>(undefined);

function GenericSelect<T>({
  children,
  defaultValue,
  onChange,
  renderValue
}: GenericSelectProps<T>) {
  const [isOpen, setIsOpen] = React.useState(false);
  const [selectedValue, setSelectedValue] = React.useState<T | undefined>(defaultValue);

  const toggle = () => setIsOpen(prev => !prev);
  const selectOption = (value: T) => {
    setSelectedValue(value);
    onChange?.(value);
    setIsOpen(false);
  };

  return (
    <GenericSelectContext.Provider value={{ isOpen, selectedValue, onToggle: toggle, onSelect: selectOption, renderValue }}>
      <div className="select">{children}</div>
    </GenericSelectContext.Provider>
  );
}

interface SelectButtonProps {
  children: React.ReactNode;
}

const GenericSelectButton: React.FC<SelectButtonProps> = ({ children }) => {
  const { isOpen, selectedValue, onToggle, renderValue } = React.useContext(GenericSelectContext);

  const displayValue = selectedValue !== undefined && renderValue
    ? renderValue(selectedValue)
    : children;

  return (
    <button onClick={onToggle}>
      {displayValue}
    </button>
  );
};

// ä½¿ç”¨
<GenericSelect<User>
  defaultValue={users[0]}
  onChange={(user) => console.log(user)}
  renderValue={(user) => user.name}
>
  <GenericSelectButton>Select User</GenericSelectButton>
  <GenericSelectOptions>
    {users.map(user => (
      <GenericSelectOption key={user.id} value={user}>
        {user.name} - {user.email}
      </GenericSelectOption>
    ))}
  </GenericSelectOptions>
</GenericSelect>
```

</CodeBlock>

---

## 5. å®é™…åº”ç”¨æ¡ˆä¾‹

### 5.1 å®Œæ•´çš„Modalç»„ä»¶

<CodeBlock>

```jsx
// Modalå¤åˆç»„ä»¶
const ModalContext = React.createContext();

function Modal({ isOpen, onClose, children }) {
  // ESCé”®å…³é—­
  useEffect(() => {
    if (!isOpen) return;

    const handleEsc = (event) => {
      if (event.key === 'Escape') {
        onClose?.();
      }
    };

    document.addEventListener('keydown', handleEsc);
    document.body.style.overflow = 'hidden';

    return () => {
      document.removeEventListener('keydown', handleEsc);
      document.body.style.overflow = 'unset';
    };
  }, [isOpen, onClose]);

  if (!isOpen) return null;

  return (
    <ModalContext.Provider value={{ onClose }}>
      <div className="modal-overlay" onClick={onClose}>
        <div className="modal-content" onClick={(e) => e.stopPropagation()}>
          {children}
        </div>
      </div>
    </ModalContext.Provider>
  );
}

Modal.Header = function ModalHeader({ children }) {
  const { onClose } = React.useContext(ModalContext);
  return (
    <div className="modal-header">
      <h2 className="modal-title">{children}</h2>
      <button className="modal-close" onClick={onClose}>Ã—</button>
    </div>
  );
};

Modal.Body = function ModalBody({ children }) {
  return <div className="modal-body">{children}</div>;
};

Modal.Footer = function ModalFooter({ children }) {
  return <div className="modal-footer">{children}</div>;
};

// ä½¿ç”¨
<Modal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)}>
  <Modal.Header>Edit Profile</Modal.Header>
  <Modal.Body>
    <form>
      <input type="text" placeholder="Name" />
      <input type="email" placeholder="Email" />
    </form>
  </Modal.Body>
  <Modal.Footer>
    <button onClick={() => setIsModalOpen(false)}>Cancel</button>
    <button onClick={handleSave}>Save</button>
  </Modal.Footer>
</Modal>
```

</CodeBlock>

### 5.2 Tabsç»„ä»¶ï¼ˆå®Œæ•´å®ç°ï¼‰

<CodeBlock>

```jsx
// Tabsç»„ä»¶
const TabsContext = React.createContext();

function Tabs({ defaultTab, children, onChange }) {
  const [activeTab, setActiveTab] = React.useState(defaultTab);

  useEffect(() => {
    onChange?.(activeTab);
  }, [activeTab, onChange]);

  return (
    <TabsContext.Provider value={{ activeTab, setActiveTab }}>
      <div className="tabs">{children}</div>
    </TabsContext.Provider>
  );
}

Tabs.List = function TabList({ children }) {
  return <div className="tab-list">{children}</div>;
};

Tabs.Tab = function Tab({ id, children }) {
  const { activeTab, setActiveTab } = React.useContext(TabsContext);
  const isActive = activeTab === id;

  return (
    <button
      className={`tab ${isActive ? 'active' : ''}`}
      onClick={() => setActiveTab(id)}
      role="tab"
      aria-selected={isActive}
      aria-controls={`panel-${id}`}
      id={`tab-${id}`}
    >
      {children}
    </button>
  );
};

Tabs.Panels = function TabPanels({ children }) {
  return <div className="tab-panels">{children}</div>;
};

Tabs.Panel = function TabPanel({ id, children }) {
  const { activeTab } = React.useContext(TabsContext);
  const isActive = activeTab === id;

  return (
    <div
      className={`tab-panel ${isActive ? 'active' : ''}`}
      role="tabpanel"
      id={`panel-${id}`}
      aria-labelledby={`tab-${id}`}
      hidden={!isActive}
    >
      {children}
    </div>
  );
};

// ä½¿ç”¨
<Tabs defaultTab="tab1" onChange={(tab) => console.log('Active tab:', tab)}>
  <Tabs.List>
    <Tabs.Tab id="tab1">Profile</Tabs.Tab>
    <Tabs.Tab id="tab2">Settings</Tabs.Tab>
    <Tabs.Tab id="tab3">Notifications</Tabs.Tab>
  </Tabs.List>
  <Tabs.Panels>
    <Tabs.Panel id="tab1">
      <div>Profile content</div>
    </Tabs.Panel>
    <Tabs.Panel id="tab2">
      <div>Settings content</div>
    </Tabs.Panel>
    <Tabs.Panel id="tab3">
      <div>Notifications content</div>
    </Tabs.Panel>
  </Tabs.Panels>
</Tabs>
```

</CodeBlock>

### 5.3 Form Fieldç»„ä»¶

<CodeBlock>

```jsx
// Form Fieldç»„ä»¶
const FormFieldContext = React.createContext();

function FormField({ name, label, error, children }) {
  const fieldId = React.useId();
  const errorId = `${fieldId}-error`;

  return (
    <FormFieldContext.Provider value={{ fieldId, errorId, name, label, error }}>
      <div className="form-field">
        {children}
      </div>
    </FormFieldContext.Provider>
  );
}

FormField.Label = function FieldLabel({ children }) {
  const { fieldId, label } = React.useContext(FormFieldContext);
  return (
    <label htmlFor={fieldId} className="form-label">
      {children || label}
    </label>
  );
};

FormField.Input = function FieldInput({ type = 'text', ...props }) {
  const { fieldId, error, errorId } = React.useContext(FormFieldContext);

  return (
    <input
      id={fieldId}
      type={type}
      className={`form-input ${error ? 'error' : ''}`}
      aria-invalid={!!error}
      aria-describedby={error ? errorId : undefined}
      {...props}
    />
  );
};

FormField.Error = function FieldError() {
  const { error, errorId } = React.useContext(FormFieldContext);
  if (!error) return null;

  return (
    <div id={errorId} className="form-error" role="alert">
      {error}
    </div>
  );
};

FormField.Help = function FieldHelp({ children }) {
  return <div className="form-help">{children}</div>;
};

// ä½¿ç”¨
<Form>
  <FormField
    name="email"
    label="Email Address"
    error={errors.email}
  >
    <FormField.Input type="email" placeholder="your@email.com" />
    <FormField.Help>We'll never share your email</Form.Help>
    <FormField.Error />
  </FormField>

  <FormField
    name="password"
    label="Password"
    error={errors.password}
  >
    <FormField.Input type="password" />
    <FormField.Error />
  </FormField>
</Form>
```

</CodeBlock>

---

## 6. æœ€ä½³å®è·µ

### 6.1 ç»„ä»¶ç»“æ„è®¾è®¡

<CodeBlock>

```jsx
// âœ… æ¸…æ™°çš„æ–‡ä»¶ç»„ç»‡
// Select/
//   â”œâ”€â”€ index.tsx          // ä¸»ç»„ä»¶å’Œå¯¼å‡º
//   â”œâ”€â”€ Select.tsx         // Selectç»„ä»¶
//   â”œâ”€â”€ SelectButton.tsx   // Buttonå­ç»„ä»¶
//   â”œâ”€â”€ SelectOptions.tsx  // Optionså­ç»„ä»¶
//   â”œâ”€â”€ SelectOption.tsx   // Optionå­ç»„ä»¶
//   â”œâ”€â”€ SelectContext.tsx  // Context
//   â””â”€â”€ types.ts           // ç±»å‹å®šä¹‰

// index.tsx
export { default as Select } from './Select';
export { SelectButton } from './SelectButton';
export { SelectOptions } from './SelectOptions';
export { SelectOption } from './SelectOption';
export type { SelectProps, SelectOptionProps } from './types';
```

</CodeBlock>

### 6.2 é”™è¯¯å¤„ç†

<CodeBlock>

```jsx
// âœ… æä¾›æœ‰ç”¨çš„é”™è¯¯ä¿¡æ¯
function useSelectContext() {
  const context = React.useContext(SelectContext);
  if (!context) {
    throw new Error(
      'This component must be used within a <Select> component. ' +
      'Make sure all <SelectButton>, <SelectOptions>, and <SelectOption> ' +
      'components are wrapped in a <Select> component.'
    );
  }
  return context;
}

// ä½¿ç”¨
const SelectButton = () => {
  const context = useSelectContext(); // æŠ›é”™è€Œä¸æ˜¯è¿”å›undefined
  // ...
};
```

</CodeBlock>

### 6.3 å‘ä¸‹ä¼ é€’Props

<CodeBlock>

```jsx
// âœ… å…è®¸ç”¨æˆ·è‡ªå®šä¹‰å­ç»„ä»¶
function Select({ children, className, ...props }) {
  return (
    <div className={className} {...props}>
      {children}
    </div>
  );
}

Select.Option = function SelectOption({ value, children, className, ...props }) {
  // ç”¨æˆ·å¯ä»¥ä¼ é€’é¢å¤–çš„classNameå’Œprops
  return (
    <li className={`option ${className || ''}`} {...props}>
      {children}
    </li>
  );
};

// ä½¿ç”¨
<Select>
  <Select.Option
    value="option1"
    className="custom-option"
    onMouseEnter={() => console.log('hovered')}
  >
    Custom Option
  </Select.Option>
</Select>
```

</CodeBlock>

### 6.4 å¯è®¿é—®æ€§æ”¯æŒ

<CodeBlock>

```jsx
// âœ… æ·»åŠ é€‚å½“çš„ARIAå±æ€§
function Select({ children }) {
  const { isOpen, onToggle } = React.useContext(SelectContext);

  return (
    <div className="select">
      {React.Children.map(children, child =>
        React.cloneElement(child, { isOpen, onToggle })
      )}
    </div>
  );
}

const SelectButton = ({ children, isOpen, onToggle }) => {
  return (
    <button
      onClick={onToggle}
      aria-haspopup="listbox"
      aria-expanded={isOpen}
      aria-label="Select an option"
    >
      {children}
      <span aria-hidden="true">{isOpen ? 'â–²' : 'â–¼'}</span>
    </button>
  );
};

const SelectOptions = ({ children, isOpen, onSelect }) => {
  if (!isOpen) return null;

  return (
    <ul
      role="listbox"
      className="options-list"
    >
      {React.Children.map(children, child =>
        React.cloneElement(child, { onSelect })
      )}
    </ul>
  );
};

const SelectOption = ({ value, children, onSelect }) => {
  return (
    <li
      role="option"
      onClick={() => onSelect(value)}
      tabIndex={-1}
    >
      {children}
    </li>
  );
};
```

</CodeBlock>

---

## 7. ä¸å…¶ä»–æ¨¡å¼å¯¹æ¯”

### 7.1 Render Props vs å¤åˆç»„ä»¶

<Compare>

```jsx
// Render Propsæ–¹å¼
<Select
  render={({ isOpen, onToggle, selectedValue, onSelect }) => (
    <>
      <button onClick={onToggle}>{selectedValue || 'Select'}</button>
      {isOpen && (
        <ul>
          <li onClick={() => onSelect('option1')}>Option 1</li>
          <li onClick={() => onSelect('option2')}>Option 2</li>
        </ul>
      )}
    </>
  )}
/>

// å¤åˆç»„ä»¶æ–¹å¼
<Select>
  <Select.Button>Select</Select.Button>
  <Select.Options>
    <Select.Option value="option1">Option 1</Select.Option>
    <Select.Option value="option2">Option 2</Select.Option>
  </Select.Options>
</Select>

// å¯¹æ¯”
1. è¯­æ³•: å¤åˆç»„ä»¶æ›´ç›´è§‚
2. å¯è¯»æ€§: å¤åˆç»„ä»¶æ›´å¥½
3. çµæ´»æ€§: Render Propsæ›´çµæ´»
4. TypeScript: å¤åˆç»„ä»¶ç±»å‹æ”¯æŒæ›´å¥½
5. å­¦ä¹ æ›²çº¿: å¤åˆç»„ä»¶æ›´å®¹æ˜“ç†è§£
```

</Compare>

### 7.2 HOC vs å¤åˆç»„ä»¶

<Compare>

```jsx
// HOCæ–¹å¼
const EnhancedSelect = withState(Select, 'isOpen', 'setIsOpen', false);

// å¤åˆç»„ä»¶æ–¹å¼
<Select>
  <Select.Button />
  <Select.Options />
</Select>

// å¯¹æ¯”
1. ç»„ä»¶å±‚çº§: å¤åˆç»„ä»¶æ— é¢å¤–å±‚çº§
2. Propsä¼ é€’: å¤åˆç»„ä»¶è‡ªåŠ¨ä¼ é€’
3. è°ƒè¯•: å¤åˆç»„ä»¶æ›´æ˜“è°ƒè¯•
4. å¤ç”¨æ€§: HOCå¯å¤ç”¨ï¼Œå¤åˆç»„ä»¶éœ€è®¾è®¡
```

</Compare>

---

## 8. å®è·µç»ƒä¹ 

### ç»ƒä¹ 1ï¼šå®ç°Tooltipç»„ä»¶

<Expandable title="ç‚¹å‡»æŸ¥çœ‹è¦æ±‚">

**åŠŸèƒ½è¦æ±‚**ï¼š
- é¼ æ ‡æ‚¬åœæ˜¾ç¤ºæç¤º
- æ”¯æŒå››ä¸ªæ–¹å‘ï¼štop, right, bottom, left
- å¯é…ç½®å»¶è¿Ÿæ—¶é—´
- å“åº”å¼å®šä½

**APIè®¾è®¡**ï¼š
```jsx
<Tooltip content="This is a tooltip" position="top" delay={500}>
  <button>Hover me</button>
</Tooltip>
```

**æç¤º**ï¼š
- ä½¿ç”¨useStateç®¡ç†æ˜¾ç¤ºçŠ¶æ€
- è®¡ç®—æç¤ºæ¡†ä½ç½®
- ç›‘å¬é¼ æ ‡äº‹ä»¶
- ä½¿ç”¨portalæ¸²æŸ“åˆ°body

</Expandable>

### ç»ƒä¹ 2ï¼šå®ç°Popoverç»„ä»¶

<Expandable title="ç‚¹å‡»æŸ¥çœ‹è¦æ±‚">

**åŠŸèƒ½è¦æ±‚**ï¼š
- ç‚¹å‡»æŒ‰é’®åˆ‡æ¢æ˜¾ç¤º
- ç‚¹å‡»å¤–éƒ¨å…³é—­
- æ”¯æŒåµŒå¥—å†…å®¹
- å¯é…ç½®é”šç‚¹ä½ç½®

**APIè®¾è®¡**ï¼š
```jsx
<Popover>
  <Popover.Button>Toggle</Popover.Button>
  <Popover.Panel>
    <h3>Panel Title</h3>
    <p>Some content</p>
  </Popover.Panel>
</Popover>
```

**æç¤º**ï¼š
- ä½¿ç”¨useRefè·å–å…ƒç´ ä½ç½®
- è®¡ç®—panelæ˜¾ç¤ºä½ç½®
- ç›‘å¬documentç‚¹å‡»äº‹ä»¶
- ä½¿ç”¨CSS transformå®šä½

</Expandable>

### ç»ƒä¹ 3ï¼šå®ç°Breadcrumbç»„ä»¶

<Expandable title="ç‚¹å‡»æŸ¥çœ‹è¦æ±‚">

**åŠŸèƒ½è¦æ±‚**ï¼š
- æ˜¾ç¤ºå¯¼èˆªè·¯å¾„
- æ”¯æŒå¯ç‚¹å‡»å’Œä¸å¯ç‚¹å‡»é¡¹
- è‡ªåŠ¨ç”Ÿæˆåˆ†éš”ç¬¦
- å“åº”å¼æŠ˜å 

**APIè®¾è®¡**ï¼š
```jsx
<Breadcrumb separator="/">
  <Breadcrumb.Item href="/">Home</Breadcrumb.Item>
  <Breadcrumb.Item href="/products">Products</Breadcrumb.Item>
  <Breadcrumb.Item>Current Page</Breadcrumb.Item>
</Breadcrumb>
```

**æç¤º**ï¼š
- ä½¿ç”¨React.Childrenéå†
- æ·»åŠ åˆ†éš”ç¬¦ï¼ˆé™¤æœ€åä¸€é¡¹ï¼‰
- å¯ç‚¹å‡»é¡¹ä½¿ç”¨Linkç»„ä»¶
- ç§»åŠ¨ç«¯æ˜¾ç¤º"..."

</Expandable>

### ç»ƒä¹ 4ï¼šå®ç°Progressç»„ä»¶

<Expandable title="ç‚¹å‡»æŸ¥çœ‹è¦æ±‚">

**åŠŸèƒ½è¦æ±‚**ï¼š
- çº¿æ€§è¿›åº¦æ¡
- åœ†å½¢è¿›åº¦æ¡
- å¯é…ç½®å¤§å°å’Œé¢œè‰²
- æ˜¾ç¤ºç™¾åˆ†æ¯”

**APIè®¾è®¡**ï¼š
```jsx
<Progress value={75} max={100} type="linear" showLabel>
  <Progress.Bar />
  <Progress.Label>75%</Progress.Label>
</Progress>

<Progress value={60} max={100} type="circular" size="large">
  <Progress.Circle />
  <Progress.Label>60%</Progress.Label>
</Progress>
```

**æç¤º**ï¼š
- è®¡ç®—ç™¾åˆ†æ¯”
- åœ†å½¢ä½¿ç”¨SVG stroke-dasharray
- æ·»åŠ åŠ¨ç”»æ•ˆæœ
- ä½¿ç”¨CSSå˜é‡æ”¯æŒä¸»é¢˜

</Expandable>

---

## 9. å¸¸è§é™·é˜±

### é™·é˜±1ï¼šå­ç»„ä»¶ç‹¬ç«‹æ¸²æŸ“

<ErrorBox>

```jsx
// âŒ é”™è¯¯ - å­ç»„ä»¶åœ¨å¤–éƒ¨ä½¿ç”¨
<Select>
  <SelectButton>Select</SelectButton>
</Select>
<SelectOptions>
  <SelectOption value="1">Option 1</SelectOption>
</SelectOptions>

// è§£å†³æ–¹æ¡ˆï¼šå¼ºåˆ¶å­ç»„ä»¶åœ¨å†…éƒ¨ä½¿ç”¨
function SelectOptions({ children, ...props }) {
  const context = useSelectContext();
  if (!context) {
    throw new Error('SelectOptions must be used within Select');
  }
  // ...
}
```

</ErrorBox>

### é™·é˜±2ï¼šContextå€¼å˜åŒ–å¯¼è‡´é‡æ¸²æŸ“

<ErrorBox>

```jsx
// âŒ é”™è¯¯ - æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°å¯¹è±¡
function Select({ children }) {
  const [isOpen, setIsOpen] = useState(false);

  return (
    <SelectContext.Provider value={{ isOpen, setIsOpen }}>
      {children}
    </SelectContext.Provider>
  );
}

// âœ… æ­£ç¡® - ä½¿ç”¨useMemoç¼“å­˜
function Select({ children }) {
  const [isOpen, setIsOpen] = useState(false);
  const contextValue = useMemo(() => ({ isOpen, setIsOpen }), [isOpen]);

  return (
    <SelectContext.Provider value={contextValue}>
      {children}
    </SelectContext.Provider>
  );
}
```

</ErrorBox>

### é™·é˜±3ï¼šç¼ºå°‘ç±»å‹å®šä¹‰

<ErrorBox>

```jsx
// âŒ é”™è¯¯ - æ²¡æœ‰ç±»å‹æ£€æŸ¥
<Select>
  <SelectButton />          // ç¼ºå°‘children
  <Select.Option value="1" /> // æ²¡æœ‰children
  <CustomComponent />        // ä¸æ˜¯Selectçš„å­ç»„ä»¶
</Select>

// âœ… æ­£ç¡® - ä½¿ç”¨TypeScript
interface SelectProps {
  children: React.ReactNode;
}

const Select: React.FC<SelectProps> = ({ children }) => {
  // ...
};

Select.Button = function SelectButton({ children }: { children: React.ReactNode }) {
  // ...
};
```

</ErrorBox>

---

## 10. æœ¬ç« å°ç»“

### å…³é”®è¦ç‚¹

<Checklist>

- âœ… å¤åˆç»„ä»¶æ˜¯ç›¸äº’åä½œçš„ç»„ä»¶ç»„ï¼Œå…±åŒå®ç°å®Œæ•´UI
- âœ… ä½¿ç”¨Context APIåœ¨å­ç»„ä»¶é—´å…±äº«çŠ¶æ€
- âœ… å­ç»„ä»¶é€šè¿‡React.cloneElementæ¥æ”¶props
- âœ… ç»„åˆä½¿ç”¨React.Children.mapå¤„ç†å­ç»„ä»¶
- âœ… æ·»åŠ displayNameä¾¿äºè°ƒè¯•
- âœ… æä¾›æœ‰ç”¨çš„é”™è¯¯ä¿¡æ¯ï¼ˆContextæœªæ‰¾åˆ°ï¼‰
- âœ… ä½¿ç”¨TypeScriptå¢å¼ºç±»å‹å®‰å…¨
- âœ… æ”¯æŒæ³›å‹å®ç°å¯å¤ç”¨ç»„ä»¶
- âœ… æ·»åŠ ARIAå±æ€§æé«˜å¯è®¿é—®æ€§
- âœ… ä½¿ç”¨useMemoé¿å…ä¸å¿…è¦é‡æ¸²æŸ“

</Checklist>

### æœ€ä½³å®è·µ

<BestPractices>

1. **æ¸…æ™°APIè®¾è®¡** - è®©ç»„ä»¶çš„ç»„åˆæ–¹å¼ç›´è§‚æ˜äº†
2. **é”™è¯¯å¤„ç†** - æä¾›æœ‰ç”¨çš„é”™è¯¯ä¿¡æ¯
3. **ç±»å‹å®‰å…¨** - ä½¿ç”¨TypeScriptå®šä¹‰å®Œæ•´ç±»å‹
4. **å¯è®¿é—®æ€§** - æ·»åŠ é€‚å½“çš„ARIAå±æ€§
5. **æ€§èƒ½ä¼˜åŒ–** - ä½¿ç”¨useMemoç¼“å­˜Contextå€¼
6. **æµ‹è¯•è¦†ç›–** - æµ‹è¯•ç»„ä»¶çš„å„ç§ç»„åˆæ–¹å¼
7. **æ–‡æ¡£å®Œæ•´** - æä¾›ä½¿ç”¨ç¤ºä¾‹å’ŒAPIæ–‡æ¡£
8. **å‘ä¸‹ä¼ é€’** - å…è®¸ç”¨æˆ·ä¼ é€’è‡ªå®šä¹‰props

</BestPractices>

### å¸¸è§å¤åˆç»„ä»¶ç±»å‹

**å¯¼èˆªç±»**ï¼š
- Tabs, Breadcrumb, Menu, Pagination

**å±•ç¤ºç±»**ï¼š
- Modal, Tooltip, Popover, Accordion

**è¡¨å•ç±»**ï¼š
- FormField, InputGroup, CheckboxGroup

**è¿›åº¦ç±»**ï¼š
- Progress, Stepper, Slider

**é€‰æ‹©ç±»**ï¼š
- Select, Dropdown, RadioGroup, Switch

### ä¸‹ä¸€æ­¥å­¦ä¹ 

ç°åœ¨ä½ å·²ç»æŒæ¡äº†å¤åˆç»„ä»¶ï¼Œæ¥ä¸‹æ¥å¯ä»¥å­¦ä¹ ï¼š

1. **[å®¹å™¨-å±•ç¤ºæ¨¡å¼](container-presentational)** - æŒæ¡çŠ¶æ€ç®¡ç†æœ€ä½³å®è·µ
2. **[Props Gettersæ¨¡å¼](../advanced/props-getters)** - å­¦ä¹ é«˜çº§propså¤„ç†
3. **[Controlled vs Uncontrolled](../advanced/controlled-uncontrolled)** - ç†è§£çŠ¶æ€æ§åˆ¶
4. **[ç»„åˆæ¨¡å¼](../advanced/composition-vs-inheritance)** - æ·±å…¥ç»„ä»¶ç»„åˆ

---

## 11. å»¶ä¼¸é˜…è¯»

### å®˜æ–¹èµ„æº

- [Composition](https://react.dev/learn/thinking-in-react) - ç»„åˆæ€ç»´
- [Context API](https://react.dev/reference/react) - Contextä½¿ç”¨
- [React.cloneElement](https://react.dev/reference/react.cloneElement) - å…ƒç´ å…‹éš†

### æ¨èé˜…è¯»

- [Headless UI](https://headlessui.com/) - æ— æ ·å¼å¤åˆç»„ä»¶åº“
- [Radix UI](https://www.radix-ui.com/) - é«˜çº§å¤åˆç»„ä»¶
- [Reakit](https://reakit.io/) - å¯ç»„åˆReactç»„ä»¶

### ç›¸å…³è¯é¢˜

- [Compound Components](https://kentcdodds.com/blog/compound-components-with-react) - å¤åˆç»„ä»¶è¯¦è§£
- [Build Your Own Compound Components](https://www.youtube.com/watch?v=zylP68e_rVo) - è§†é¢‘æ•™ç¨‹
- [TypeScript React](https://react.dev/reference/react/TypeScript) - TypeScriptæ”¯æŒ

---

[â† ä¸Šä¸€ç« ï¼šæ¸²æŸ“å±æ€§æ¨¡å¼](render-props) | [ä¸‹ä¸€ç« ï¼šå®¹å™¨-å±•ç¤ºæ¨¡å¼ â†’](container-presentational)
